// ==UserScript==
// @name         AFM
// @namespace    http://tampermonkey.net/
// @version      1.4
// @description  АФМ
// @author       Ecash
// @match        https://websfm.kz/form-fm/*
// @grant        none
// ==/UserScript==
const _0x1768c4 = _0x3c7d; (function (_0x336275, _0x59de3f) { const _0x45aa3a = _0x3c7d, _0x7d93ff = _0x336275(); while (!![]) { try { const _0x3ce9e4 = parseInt(_0x45aa3a(0x167)) / 0x1 * (parseInt(_0x45aa3a(0x1bc)) / 0x2) + -parseInt(_0x45aa3a(0x118)) / 0x3 + parseInt(_0x45aa3a(0x1ab)) / 0x4 + parseInt(_0x45aa3a(0x13e)) / 0x5 * (parseInt(_0x45aa3a(0x139)) / 0x6) + parseInt(_0x45aa3a(0x1b7)) / 0x7 + parseInt(_0x45aa3a(0x1b2)) / 0x8 + -parseInt(_0x45aa3a(0x174)) / 0x9 * (parseInt(_0x45aa3a(0x11b)) / 0xa); if (_0x3ce9e4 === _0x59de3f) break; else _0x7d93ff['push'](_0x7d93ff['shift']()); } catch (_0x4b4067) { _0x7d93ff['push'](_0x7d93ff['shift']()); } } }(_0x565d, 0x36e34)); const AFM_STATE = { 'businessKey': '', 'initiator': '' }, AFM_PROTECTED_NAMES = new Set(['form.form_number']); async function waitForElement(_0x301435, _0x4cde52 = 0xc8) { const _0x509ec4 = _0x3c7d, _0x14e2b4 = Date[_0x509ec4(0x1c8)](); while (Date['now']() - _0x14e2b4 < _0x4cde52) { const _0x193521 = document[_0x509ec4(0x1b6)](_0x301435); if (_0x193521) return _0x193521; await new Promise(_0x5390a4 => setTimeout(_0x5390a4, 0x32)); } return null; } const _raf = () => new Promise(_0x25646a => requestAnimationFrame(() => requestAnimationFrame(_0x25646a))); function _nativeSet(_0x558261, _0x4afe32 = '') { const _0x4233f1 = _0x3c7d, _0x4d7947 = Object[_0x4233f1(0x15b)](HTMLInputElement[_0x4233f1(0x177)], _0x4233f1(0x166)); _0x4d7947 && _0x4d7947['set'] ? _0x4d7947[_0x4233f1(0x195)][_0x4233f1(0x154)](_0x558261, _0x4afe32) : _0x558261[_0x4233f1(0x166)] = _0x4afe32; } function _touchTracker(_0x98e440, _0x16ed76) { const _0x50b0d3 = _0x3c7d; try { _0x98e440[_0x50b0d3(0x172)] && _0x98e440[_0x50b0d3(0x172)][_0x50b0d3(0x1b8)](_0x16ed76); } catch { } } async function hardClearInput(_0x4886b4, _0xe81d5a = 0x3) { const _0xbc67ed = _0x3c7d; for (let _0x5a8623 = 0x0; _0x5a8623 < _0xe81d5a; _0x5a8623++) { const _0x293894 = _0x4886b4[_0xbc67ed(0x166)]; _0x4886b4['focus'](); try { _0x4886b4[_0xbc67ed(0x138)](), _0x4886b4[_0xbc67ed(0x1d6)](0x0, _0x293894[_0xbc67ed(0x198)]); } catch { } _nativeSet(_0x4886b4, ''), _touchTracker(_0x4886b4, _0x293894), _0x4886b4[_0xbc67ed(0x1b3)](new InputEvent(_0xbc67ed(0x116), { 'bubbles': !![], 'inputType': 'deleteContentBackward' })), _0x4886b4['dispatchEvent'](new Event('change', { 'bubbles': !![] })), await _raf(); if ((_0x4886b4['value'] || '') === '') return !![]; _0x4886b4[_0xbc67ed(0x1b3)](new KeyboardEvent(_0xbc67ed(0x169), { 'key': _0xbc67ed(0x17f), 'bubbles': !![] })), _0x4886b4['dispatchEvent'](new InputEvent(_0xbc67ed(0x116), { 'bubbles': !![], 'inputType': _0xbc67ed(0x135) })), _0x4886b4[_0xbc67ed(0x1b3)](new KeyboardEvent(_0xbc67ed(0x117), { 'key': _0xbc67ed(0x17f), 'bubbles': !![] })), await _raf(); if ((_0x4886b4[_0xbc67ed(0x166)] || '') === '') return !![]; } return (_0x4886b4[_0xbc67ed(0x166)] || '') === ''; } async function openAccordionByHeader(_0x584563, _0x2aa7e1 = [], _0x998ac = 0x5dc) { const _0x399b2f = _0x3c7d, _0x560a89 = Array[_0x399b2f(0x1af)](document[_0x399b2f(0x132)]('p'))['find'](_0x9edfc => _0x9edfc['textContent'][_0x399b2f(0x11d)]()[_0x399b2f(0x153)]()['includes'](_0x584563[_0x399b2f(0x11d)]()[_0x399b2f(0x153)]())); if (!_0x560a89) return ![]; const _0x2c4ae5 = _0x560a89[_0x399b2f(0x126)]('div'); if (!_0x2c4ae5) return ![]; const _0x2d02b3 = _0x2aa7e1[_0x399b2f(0x12f)](_0x11b7e8 => document[_0x399b2f(0x1b6)]('[name=\x22' + _0x11b7e8 + '\x22]')); if (_0x2d02b3) return !![]; _0x2c4ae5[_0x399b2f(0x185)](); const _0x1f1287 = Date[_0x399b2f(0x1c8)](); while (Date[_0x399b2f(0x1c8)]() - _0x1f1287 < _0x998ac) { const _0x1270d1 = _0x2aa7e1[_0x399b2f(0x12f)](_0x55450b => document['querySelector'](_0x399b2f(0x19f) + _0x55450b + '\x22]')); if (_0x1270d1) return !![]; await new Promise(_0x2e5db8 => setTimeout(_0x2e5db8, 0x64)); } return console['warn'](_0x399b2f(0x142), _0x584563), ![]; } async function realUserType(_0x448bbc, _0x544090, _0xa56a86 = 0xa) { const _0x372b2e = _0x3c7d; _0x448bbc[_0x372b2e(0x18f)](), _0x448bbc[_0x372b2e(0x1b3)](new CompositionEvent(_0x372b2e(0x18b), { 'bubbles': !![] })); for (let _0x44e3e1 = 0x0; _0x44e3e1 < _0x544090[_0x372b2e(0x198)]; _0x44e3e1++) { const _0x3db143 = _0x544090[_0x44e3e1]; _0x448bbc[_0x372b2e(0x1b3)](new KeyboardEvent(_0x372b2e(0x169), { 'key': _0x3db143, 'code': _0x3db143, 'bubbles': !![] })), _0x448bbc[_0x372b2e(0x1b3)](new KeyboardEvent(_0x372b2e(0x143), { 'key': _0x3db143, 'code': _0x3db143, 'bubbles': !![] })); const _0x5673c5 = Object[_0x372b2e(0x15b)](window[_0x372b2e(0x184)][_0x372b2e(0x177)], _0x372b2e(0x166))[_0x372b2e(0x195)]; _0x5673c5[_0x372b2e(0x154)](_0x448bbc, _0x448bbc[_0x372b2e(0x166)] + _0x3db143), _0x448bbc[_0x372b2e(0x1b3)](new InputEvent(_0x372b2e(0x116), { 'data': _0x3db143, 'inputType': _0x372b2e(0x176), 'bubbles': !![] })), _0x448bbc['dispatchEvent'](new KeyboardEvent(_0x372b2e(0x117), { 'key': _0x3db143, 'code': _0x3db143, 'bubbles': !![] })), await new Promise(_0x455d9d => setTimeout(_0x455d9d, _0xa56a86)); } _0x448bbc[_0x372b2e(0x1b3)](new CompositionEvent(_0x372b2e(0x1d2), { 'data': _0x544090, 'bubbles': !![] })); const _0x7008cc = new DataTransfer(); _0x7008cc[_0x372b2e(0x16d)](_0x372b2e(0x1a6), _0x544090), _0x448bbc[_0x372b2e(0x1b3)](new ClipboardEvent(_0x372b2e(0x127), { 'clipboardData': _0x7008cc, 'bubbles': !![] })), _0x448bbc[_0x372b2e(0x1b3)](new Event(_0x372b2e(0x128), { 'bubbles': !![] })); } function setReactInputValue(_0x4e6420, _0x5ed1bf) { const _0x41aedb = _0x3c7d, _0x11a962 = _0x4e6420[_0x41aedb(0x166)]; _0x4e6420[_0x41aedb(0x166)] = _0x5ed1bf; const _0x1e0a83 = _0x4e6420[_0x41aedb(0x172)]; if (_0x1e0a83) _0x1e0a83['setValue'](_0x11a962); _0x4e6420[_0x41aedb(0x1b3)](new Event('input', { 'bubbles': !![] })), _0x4e6420[_0x41aedb(0x1b3)](new Event(_0x41aedb(0x128), { 'bubbles': !![] })); } async function selectDropdownUniversal(_0x1cafd8, _0x53ee90, _0xc5867f = {}) { const _0x12ae76 = _0x3c7d, { openDelay: openDelay = 0x96, step: step = 0x1f4, maxScrolls: maxScrolls = 0x28, findTimeout: findTimeout = 0xbb8 } = _0xc5867f, _0x1781c5 = _0x3de53e => new Promise(_0x3e2fe6 => setTimeout(_0x3e2fe6, _0x3de53e)), _0x23ab14 = document[_0x12ae76(0x1b6)](_0x12ae76(0x1d1) + CSS[_0x12ae76(0x13b)](_0x1cafd8) + '\x22]'); if (!_0x23ab14) return ![]; _0x23ab14[_0x12ae76(0x18f)](), _0x23ab14['click'](), await _0x1781c5(openDelay); let _0x27fc82 = _0x23ab14[_0x12ae76(0x126)]('div')?.['querySelector']('input[placeholder]'); !_0x27fc82 && (_0x27fc82 = Array[_0x12ae76(0x1af)](document[_0x12ae76(0x132)](_0x12ae76(0x14c)))[_0x12ae76(0x16e)](_0x25ba0e => _0x25ba0e[_0x12ae76(0x194)] !== null)); _0x27fc82 && (await realUserType(_0x27fc82, _0x53ee90, 0x14), await _0x1781c5(0x50)); function _0x3bb4f0(_0x3909e5) { const _0x47b2ec = _0x12ae76; let _0xa8f768 = _0x3909e5; while (_0xa8f768 && _0xa8f768 !== document['body']) { const _0x16de2c = getComputedStyle(_0xa8f768), _0x45f759 = /(auto|scroll)/['test'](_0x16de2c[_0x47b2ec(0x12d)]); if (_0x45f759 && _0xa8f768['scrollHeight'] > _0xa8f768[_0x47b2ec(0x1ce)]) return _0xa8f768; _0xa8f768 = _0xa8f768[_0x47b2ec(0x1b9)]; } const _0x1735fd = Array[_0x47b2ec(0x1af)](document[_0x47b2ec(0x132)](_0x47b2ec(0x168)))[_0x47b2ec(0x1dd)](_0x5c7d25 => _0x5c7d25[_0x47b2ec(0x15a)] > _0x5c7d25[_0x47b2ec(0x1ce)] && /(auto|scroll)/[_0x47b2ec(0x18e)](getComputedStyle(_0x5c7d25)[_0x47b2ec(0x12d)]))[_0x47b2ec(0x18a)]((_0x48c0e4, _0x192e6d) => _0x192e6d[_0x47b2ec(0x15a)] - _0x48c0e4[_0x47b2ec(0x15a)]); return _0x1735fd[0x0] || document[_0x47b2ec(0x150)]; } function _0x153624() { const _0x4e791f = _0x12ae76, _0x5598cb = Array['from'](document[_0x4e791f(0x132)]('button[name=\x22' + CSS['escape'](_0x1cafd8) + _0x4e791f(0x130)))[_0x4e791f(0x1dd)](_0x4c336b => _0x4c336b !== _0x23ab14); if (!_0x5598cb[_0x4e791f(0x198)]) return Array[_0x4e791f(0x1af)](document[_0x4e791f(0x132)](_0x4e791f(0x1d1) + CSS[_0x4e791f(0x13b)](_0x1cafd8) + '\x22]'))[_0x4e791f(0x1dd)](_0x2fd452 => _0x2fd452 !== _0x23ab14); return _0x5598cb; } const _0x572e64 = _0x3800d4 => (_0x3800d4 || '')[_0x12ae76(0x148)](/\s+/g, '\x20')[_0x12ae76(0x11d)]()[_0x12ae76(0x153)](), _0x1d2e84 = _0x572e64(_0x53ee90); let _0x16b5d2 = null; const _0x549122 = Date[_0x12ae76(0x1c8)](); while (Date[_0x12ae76(0x1c8)]() - _0x549122 < findTimeout && !_0x16b5d2) { const _0x4b0dca = _0x153624(); _0x16b5d2 = _0x4b0dca[_0x12ae76(0x16e)](_0x2d6ba5 => _0x572e64(_0x2d6ba5['dataset']?.[_0x12ae76(0x19a)] || _0x2d6ba5['textContent']) === _0x1d2e84) || _0x4b0dca[_0x12ae76(0x16e)](_0x15d19b => _0x572e64(_0x15d19b['dataset']?.[_0x12ae76(0x19a)] || _0x15d19b[_0x12ae76(0x1ad)])[_0x12ae76(0x164)](_0x1d2e84)); if (_0x16b5d2) break; await _0x1781c5(0x3c); } if (!_0x16b5d2) { const _0x534bf5 = _0x153624()[0x0] || _0x27fc82 || _0x23ab14, _0x1f53ea = _0x3bb4f0(_0x534bf5); let _0x24542b = 0x0, _0x146c45 = -0x1; while (_0x24542b < maxScrolls) { if (_0x1f53ea[_0x12ae76(0x1aa)] === _0x146c45) break; _0x146c45 = _0x1f53ea[_0x12ae76(0x1aa)], _0x1f53ea['scrollBy'](0x0, step), await _0x1781c5(0x78); const _0x349ee7 = _0x153624(); _0x16b5d2 = _0x349ee7['find'](_0x20b630 => _0x572e64(_0x20b630[_0x12ae76(0x1cd)]?.['name'] || _0x20b630[_0x12ae76(0x1ad)]) === _0x1d2e84) || _0x349ee7[_0x12ae76(0x16e)](_0x25de40 => _0x572e64(_0x25de40['dataset']?.[_0x12ae76(0x19a)] || _0x25de40[_0x12ae76(0x1ad)])[_0x12ae76(0x164)](_0x1d2e84)); if (_0x16b5d2) break; _0x24542b++; } } if (!_0x16b5d2 && _0x27fc82) for (let _0x196e76 = 0x0; _0x196e76 < 0x32; _0x196e76++) { _0x27fc82[_0x12ae76(0x1b3)](new KeyboardEvent(_0x12ae76(0x169), { 'key': _0x12ae76(0x162), 'bubbles': !![] })), await _0x1781c5(0x28); const _0x3d6a60 = document[_0x12ae76(0x1b6)]('[aria-selected=\x22true\x22],\x20[data-highlighted=\x22true\x22]'); if (_0x3d6a60) { const _0x187c1f = _0x572e64(_0x3d6a60[_0x12ae76(0x1ad)] || _0x3d6a60[_0x12ae76(0x1cd)]?.['name']); if (_0x187c1f['includes'](_0x1d2e84)) { _0x16b5d2 = _0x3d6a60; break; } } } if (_0x16b5d2) return _0x16b5d2[_0x12ae76(0x185)](), await _0x1781c5(0x50), document[_0x12ae76(0x150)][_0x12ae76(0x185)](), !![]; return ![]; } function setReactCheckbox(_0x578d46, _0x505f32 = !![]) { const _0x25ba54 = _0x3c7d, _0x37319a = document['querySelector'](_0x25ba54(0x160) + _0x578d46 + '\x22]'); if (_0x37319a) { if (_0x37319a['checked'] !== _0x505f32) _0x37319a['click'](); return _0x37319a['dispatchEvent'](new Event(_0x25ba54(0x128), { 'bubbles': !![] })), !![]; } return ![]; } const norm = _0x4a31aa => String(_0x4a31aa ?? '')[_0x1768c4(0x11d)]()['toLowerCase'](); function isFieldFilled(_0xb6a079) { const _0x49e66d = _0x1768c4; if (_0xb6a079[_0x49e66d(0x12b)] === _0x49e66d(0x116)) { const _0xeb8bbd = document[_0x49e66d(0x1b6)](_0x49e66d(0x19f) + _0xb6a079[_0x49e66d(0x147)] + '\x22]'); if (!_0xeb8bbd) return ![]; return norm(_0xeb8bbd[_0x49e66d(0x166)]) === norm(_0xb6a079[_0x49e66d(0x133)]); } if (_0xb6a079[_0x49e66d(0x12b)] === _0x49e66d(0x1a3)) { const _0x2ac76c = document[_0x49e66d(0x1b6)](_0x49e66d(0x160) + _0xb6a079[_0x49e66d(0x147)] + '\x22]'); return !!_0x2ac76c && _0x2ac76c[_0x49e66d(0x11f)] === !!_0xb6a079[_0x49e66d(0x133)]; } if (_0xb6a079[_0x49e66d(0x12b)] === _0x49e66d(0x138)) { const _0x42fdd4 = document[_0x49e66d(0x1b6)](_0x49e66d(0x199) + _0xb6a079[_0x49e66d(0x147)] + '\x22]'); if (_0x42fdd4 && _0x42fdd4['value']) return norm(_0x42fdd4[_0x49e66d(0x166)]) === norm(_0xb6a079['Value']); const _0x335d0c = document[_0x49e66d(0x1b6)](_0x49e66d(0x1d1) + _0xb6a079[_0x49e66d(0x147)] + '\x22]'); if (!_0x335d0c) return ![]; const _0x5ba53a = norm(_0x335d0c[_0x49e66d(0x1cd)]?.[_0x49e66d(0x19a)] || _0x335d0c['textContent'] || ''), _0x165da1 = norm(_0xb6a079['Value']); return _0x5ba53a[_0x49e66d(0x164)](_0x165da1) || _0x5ba53a === _0x165da1; } return ![]; } async function ensureSectionsForField(_0x438b44) { const _0x5ee46b = _0x1768c4; _0x438b44['Name'] === _0x5ee46b(0x140) && (await openAccordionByHeader(_0x5ee46b(0x15e), [_0x5ee46b(0x121), _0x5ee46b(0x175)]), await openAccordionByHeader(_0x5ee46b(0x19d), [_0x5ee46b(0x121)]), await openAccordionByHeader(_0x5ee46b(0x1b5), [_0x5ee46b(0x11a)]), await openAccordionByHeader(_0x5ee46b(0x12c), [_0x5ee46b(0x1c7)]), await openAccordionByHeader('фактический\x20адрес', ['participants[0].address.country'])), _0x438b44['Name'] === _0x5ee46b(0x13c) && (await openAccordionByHeader(_0x5ee46b(0x16c), [_0x5ee46b(0x17c), 'participants[0].full_name.first_name']), await openAccordionByHeader('документ,\x20удостоверяющий\x20личность', [_0x5ee46b(0x12e), 'participants[0].document.number', 'participants[0].document.issue_date'])); } async function clearField(_0x4d30b4) { const _0x11a24f = _0x1768c4; if (AFM_PROTECTED_NAMES[_0x11a24f(0x1b1)](_0x4d30b4[_0x11a24f(0x147)])) return; if (_0x4d30b4[_0x11a24f(0x12b)] === _0x11a24f(0x116)) { const _0x978c2a = document[_0x11a24f(0x1b6)](_0x11a24f(0x19f) + _0x4d30b4['Name'] + '\x22]'); _0x978c2a && (_0x978c2a[_0x11a24f(0x180)] === _0x11a24f(0x13d) || _0x978c2a['tagName'] === _0x11a24f(0x1d4)) && (await hardClearInput(_0x978c2a), _0x978c2a['dispatchEvent'](new Event(_0x11a24f(0x190), { 'bubbles': !![] })), _0x978c2a[_0x11a24f(0x1b3)](new Event(_0x11a24f(0x18f), { 'bubbles': !![] }))); return; } if (_0x4d30b4[_0x11a24f(0x12b)] === _0x11a24f(0x1a3)) { const _0x58ea55 = document[_0x11a24f(0x1b6)](_0x11a24f(0x160) + _0x4d30b4['Name'] + '\x22]'); _0x58ea55 && _0x58ea55['checked'] && (_0x58ea55[_0x11a24f(0x185)](), _0x58ea55[_0x11a24f(0x1b3)](new Event(_0x11a24f(0x128), { 'bubbles': !![] })), await _raf()); return; } if (_0x4d30b4['FieldType'] === _0x11a24f(0x138)) { const _0x175d93 = document['querySelector'](_0x11a24f(0x199) + _0x4d30b4['Name'] + '\x22]'); if (_0x175d93) { const _0x356151 = _0x175d93[_0x11a24f(0x166)]; _nativeSet(_0x175d93, ''), _touchTracker(_0x175d93, _0x356151), _0x175d93[_0x11a24f(0x1b3)](new Event('input', { 'bubbles': !![] })), _0x175d93[_0x11a24f(0x1b3)](new Event(_0x11a24f(0x128), { 'bubbles': !![] })), await _raf(); } document['body'][_0x11a24f(0x185)](); return; } } async function fillFieldOnce(_0x22aa2d) { const _0x89910f = _0x1768c4; await ensureSectionsForField(_0x22aa2d); if (_0x22aa2d['FieldType'] === _0x89910f(0x116)) { let _0x7a7b27 = document[_0x89910f(0x1b6)](_0x89910f(0x19f) + _0x22aa2d['Name'] + '\x22]'); if (!_0x7a7b27) { const _0xbacfd4 = Date['now'](); while (!_0x7a7b27 && Date['now']() - _0xbacfd4 < 0x7d0) { await new Promise(_0x52ae1 => setTimeout(_0x52ae1, 0x64)), _0x7a7b27 = document[_0x89910f(0x1b6)]('[name=\x22' + _0x22aa2d[_0x89910f(0x147)] + '\x22]'); } } if (_0x7a7b27 && (_0x7a7b27[_0x89910f(0x180)] === _0x89910f(0x13d) || _0x7a7b27[_0x89910f(0x180)] === _0x89910f(0x1d4))) setReactInputValue(_0x7a7b27, _0x22aa2d[_0x89910f(0x133)]); } else { if (_0x22aa2d[_0x89910f(0x12b)] === 'select') await selectDropdownUniversal(_0x22aa2d[_0x89910f(0x147)], _0x22aa2d['Value']); else _0x22aa2d[_0x89910f(0x12b)] === _0x89910f(0x1a3) && setReactCheckbox(_0x22aa2d['Name'], _0x22aa2d[_0x89910f(0x133)]); } return await new Promise(_0x3fb7e4 => setTimeout(_0x3fb7e4, 0x3c)), isFieldFilled(_0x22aa2d); } async function fillFieldsWithRetries(_0x5dcec4, _0xe5e179 = 0x3) { const _0x51be12 = _0x1768c4; let _0x31a765 = _0x5dcec4[_0x51be12(0x1dd)](_0xd103c8 => [_0x51be12(0x116), _0x51be12(0x138), _0x51be12(0x1a3)][_0x51be12(0x164)](_0xd103c8[_0x51be12(0x12b)]))['filter'](_0x2859c4 => !AFM_PROTECTED_NAMES[_0x51be12(0x1b1)](_0x2859c4[_0x51be12(0x147)])); const _0x24cc88 = _0x31a765['length']; let _0x36d8c4 = new Set(); updateOverlayCounters({ 'total': _0x24cc88, 'filled': 0x0 }); for (let _0xaec6f5 = 0x1; _0xaec6f5 <= _0xe5e179 && _0x31a765[_0x51be12(0x198)]; _0xaec6f5++) { const _0x3454cb = []; if (_0xaec6f5 > 0x1) await new Promise(_0x271bf6 => setTimeout(_0x271bf6, 0x78)); for (const _0x1c3df1 of _0x31a765) { if (_0xaec6f5 > 0x1) { try { await clearField(_0x1c3df1); } catch (_0x5acb9f) { console[_0x51be12(0x151)](_0x51be12(0x120), _0x1c3df1['Name'], _0x5acb9f); } await new Promise(_0x416290 => setTimeout(_0x416290, 0x28)); } const _0x1936e8 = await fillFieldOnce(_0x1c3df1); !_0x1936e8 ? _0x3454cb[_0x51be12(0x136)](_0x1c3df1) : (_0x36d8c4[_0x51be12(0x173)](_0x1c3df1[_0x51be12(0x147)]), updateOverlayCounters({ 'total': _0x24cc88, 'filled': _0x36d8c4[_0x51be12(0x14f)] })); } _0x31a765 = _0x3454cb, console['log'](_0x51be12(0x1c9) + _0xaec6f5 + '\x20done,\x20remaining:\x20' + _0x31a765[_0x51be12(0x198)]); } return _0x31a765; } function _0x565d() { const _0x3ec3c5 = ['Не\x20удалось\x20заполнить\x20поля:', 'pointermove', '[AFM]\x20Autofill\x20error:', 'background:#ec4141;color:#fff;cursor:not-allowed;', 'div', 'overflow', 'hidden', 'touchstart', 'disabled', 'touchmove', 'participants[0].legal_address.country', 'now', '[AFM]\x20Pass\x20', 'error', 'form-fm', 'afm-total', 'dataset', 'clientHeight', 'forEach', 'remove', 'button[name=\x22', 'compositionend', 'documentElement', 'TEXTAREA', 'stringify', 'setSelectionRange', 'stopPropagation', 'operation.currency', 'bodyOverflow', 'afm-style', 'hasAttribute', 'max', 'filter', 'businessKey', 'input', 'keyup', '72573BrDsRz', 'initiator', 'participants[0].bank.country', '3740AeKlzi', 'head', 'trim', 'mousemove', 'checked', '[AFM]\x20clearField\x20error:', 'participants[0].participant', 'Идёт\x20автозаполнение\x20формы.\x20Пожалуйста,\x20не\x20кликайте\x20и\x20не\x20используйте\x20клавиатуру.', 'background:#1976d2;color:#fff;cursor:pointer;', 'style', 'background:#ffa726;color:#222;cursor:wait;', 'closest', 'paste', 'change', 'input[name=\x22form.form_number\x22]', 'afm-time', 'FieldType', 'юридический\x20адрес', 'overflowY', 'participants[0].document.type_document', 'some', '\x22][type=\x22button\x22]', 'background:#43a047;color:#fff;cursor:pointer;', 'querySelectorAll', 'Value', 'operation.number', 'deleteContentBackward', 'push', 'afm-listener', 'select', '2564634BxTnxE', 'сведения\x20об\x20операции', 'escape', 'participants[0].iin', 'INPUT', '5KBPXca', 'button', 'operation.address.house_number', 'selectstart', '⛔️\x20Аккордеон\x20не\x20раскрыл\x20нужные\x20поля:', 'keypress', 'form.operation_state', 'contextmenu', 'wheel', 'Name', 'replace', 'форма\x20фм-1', 'createElement', 'Ошибка\x20запроса:', 'input[placeholder]', '\x0a\x20\x20\x20\x20padding:\x2012px\x2026px;\x20font-size:\x2016px;\x20border:\x20none;\x20border-radius:\x208px;\x0a\x20\x20\x20\x20background:\x20#1976d2;\x20color:\x20#fff;\x20cursor:\x20pointer;\x0a\x20\x20', 'form.form_number', 'size', 'body', 'warn', 'Загрузка...', 'toLowerCase', 'call', 'addEventListener', 'mouseup', 'touchAction', 'userSelect', 'dragstart', 'scrollHeight', 'getOwnPropertyDescriptor', 'form.operation_date', 'документ,\x20удостоверяющий\x20личность', 'участники', 'afm-interaction-lock', 'input[type=\x22checkbox\x22][name=\x22', 'split', 'ArrowDown', 'Заполнить', 'includes', 'floor', 'value', '145751cLFJTg', 'div,ul', 'keydown', 'innerHTML', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-kpi\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Время:\x20<b\x20id=\x22afm-time\x22>00:00</b></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Заполнено:\x20<b\x20id=\x22afm-filled\x22>0</b>\x20из\x20<b\x20id=\x22afm-total\x22>0</b></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Осталось:\x20<b\x20id=\x22afm-left\x22>0</b></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-bar\x22><div\x20id=\x22afm-bar-inner\x22\x20style=\x22width:0%\x22></div></div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'фио', 'setData', 'find', '[AFM]\x20Ошибка\x20в\x20ретраях,\x20fallback\x20legacyFillOnce:', 'overscrollBehavior', 'button[name=\x22subscribe\x22]', '_valueTracker', 'add', '31401JUtxNt', 'participants[0].iin]', 'insertText', 'prototype', 'participants[0].full_name.first_name', 'button[name=\x22save\x22]', 'POST', 'pointerup', 'participants[0].full_name.last_name', 'application/json', 'https://api.quiq.kz/Application/afmStatus', 'Backspace', 'tagName', '[AFM]\x20Loaded\x20v1.6.6\x20(lite:\x20stronger\x20lock\x20+\x20bigger\x20modal)', 'Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.', 'afm-bar-inner', 'HTMLInputElement', 'click', 'participants[0].document.issue_date', 'dblclick', 'undefined', 'appendChild', 'sort', 'compositionstart', 'afm-left', 'clipboard', 'test', 'focus', 'blur', 'none', 'removeEventListener', 'afm-pulse', 'offsetParent', 'set', 'afm-loading-overlay', 'overscroll', 'length', 'input[name=\x22', 'name', 'onclick', 'innerText', 'участник\x201', 'className', '[name=\x22', 'pathname', 'json', 'participants[0].document.number', 'checkbox', 'preventDefault', 'cssText', 'text/plain', '\x0a\x20\x20\x20\x20<div\x20class=\x22afm-card\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-spin\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-title\x22>Автозаполнение\x20формы</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-sub\x22\x20id=\x22afm-sub\x22>', 'getElementById', 'parse', 'scrollTop', '1357164BQPGch', '\x0a\x20\x20\x20\x20:root{\x0a\x20\x20\x20\x20\x20\x20--afm-overlay-bg:\x20rgba(14,18,26,.26);\x0a\x20\x20\x20\x20\x20\x20--afm-card-grad-top:#1f2530;\x20--afm-card-grad-bot:#1b212b;\x0a\x20\x20\x20\x20\x20\x20--afm-card-border:#2e3644;\x20--afm-text-main:#fff;\x20--afm-text-sub:#d0d6e2;\x0a\x20\x20\x20\x20\x20\x20--afm-accent-1:#1fd1f9;\x20--afm-accent-2:#b621fe;\x20--afm-spinner:#7da2ff;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay{\x0a\x20\x20\x20\x20\x20\x20position:fixed;\x20inset:0;\x20background:var(--afm-overlay-bg);\x20z-index:99999;\x0a\x20\x20\x20\x20\x20\x20display:flex;\x20align-items:center;\x20justify-content:center;\x0a\x20\x20\x20\x20\x20\x20font-family:system-ui,-apple-system,Segoe\x20UI,Roboto,Arial;\x20color:var(--afm-text-main);\x0a\x20\x20\x20\x20\x20\x20animation:afm-fade-in\x20.12s\x20ease-out;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-card{\x0a\x20\x20\x20\x20\x20\x20width:min(680px,94vw);\x20/*\x20больше\x20карточка\x20*/\x0a\x20\x20\x20\x20\x20\x20background:linear-gradient(180deg,var(--afm-card-grad-top),var(--afm-card-grad-bot));\x0a\x20\x20\x20\x20\x20\x20border:1px\x20solid\x20var(--afm-card-border);\x20border-radius:16px;\x0a\x20\x20\x20\x20\x20\x20padding:26px\x2026px;\x20/*\x20чуть\x20больше\x20отступы\x20*/\x0a\x20\x20\x20\x20\x20\x20box-shadow:0\x2014px\x2060px\x20rgba(0,0,0,.38);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-row{display:flex;align-items:center;gap:14px;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-title{font-size:18px;font-weight:700;}\x20/*\x20+2px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-sub{font-size:14px;color:var(--afm-text-sub);opacity:.9;margin-top:4px;}\x20/*\x20+1px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-kpi{margin-top:12px;font-size:14px;opacity:.95;display:flex;gap:18px;flex-wrap:wrap;}\x20/*\x20+1px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-kpi\x20b{color:#fff;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-bar{margin-top:16px;width:100%;height:10px;background:#2a3240;border-radius:999px;overflow:hidden;}\x20/*\x20выше\x20и\x20толще\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-bar>div{height:100%;width:0%;background:linear-gradient(90deg,var(--afm-accent-1),var(--afm-accent-2));transition:width\x20.25s\x20ease;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-spin{width:26px;height:26px;flex:0\x200\x2026px;border-radius:50%;border:3px\x20solid\x20var(--afm-spinner);border-top-color:transparent;animation:afm-rot\x20.8s\x20linear\x20infinite;}\x20/*\x20больше\x20спиннер\x20*/\x0a\x20\x20\x20\x20@keyframes\x20afm-rot{to{transform:rotate(360deg);}}\x0a\x20\x20\x20\x20@keyframes\x20afm-fade-in{from{opacity:0;transform:translateY(-4px);}to{opacity:1;transform:none;}}\x0a\x20\x20', 'textContent', 'indexOf', 'from', 'isArray', 'has', '2317760RZkBoA', 'dispatchEvent', 'mousedown', 'банк\x20участника\x20операции', 'querySelector', '2461872IBOtHW', 'setValue', 'parentElement', 'setAttribute', 'фактический\x20адрес', '2BHEflx']; _0x565d = function () { return _0x3ec3c5; }; return _0x565d(); } async function getDataFromBuffer() { const _0x3b5e1d = _0x1768c4; try { const _0x1a02ea = await navigator[_0x3b5e1d(0x18d)]['readText'](), _0x2e44d8 = JSON[_0x3b5e1d(0x1a9)](_0x1a02ea); if (_0x2e44d8?.[_0x3b5e1d(0x119)]) AFM_STATE[_0x3b5e1d(0x119)] = _0x2e44d8['initiator']; if (_0x2e44d8?.[_0x3b5e1d(0x1a1)] && Array[_0x3b5e1d(0x1b0)](_0x2e44d8[_0x3b5e1d(0x1a1)])) { const _0x4e0fda = _0x2e44d8[_0x3b5e1d(0x1a1)][_0x3b5e1d(0x16e)](_0x4e3448 => _0x4e3448[_0x3b5e1d(0x147)] === 'businessKey')?.['Value']; if (_0x4e0fda) AFM_STATE['businessKey'] = _0x4e0fda; } return _0x2e44d8; } catch { return null; } } function getAppIdFromUrl() { const _0x5745e8 = _0x1768c4, _0x105549 = location[_0x5745e8(0x1a0)][_0x5745e8(0x161)]('/')['filter'](Boolean), _0x4ae35d = _0x105549[_0x5745e8(0x1ae)](_0x5745e8(0x1cb)); if (_0x4ae35d >= 0x0 && _0x105549[_0x4ae35d + 0x1]) return _0x105549[_0x4ae35d + 0x1]; return ''; } async function getAfmDocId() { const _0x262233 = _0x1768c4; let _0x532dd2 = document[_0x262233(0x1b6)](_0x262233(0x129)); (!_0x532dd2 || !_0x532dd2[_0x262233(0x166)]?.['trim']()) && (await openAccordionByHeader(_0x262233(0x149), [_0x262233(0x14e)]), await new Promise(_0x253fa2 => setTimeout(_0x253fa2, 0x64)), _0x532dd2 = document[_0x262233(0x1b6)]('input[name=\x22form.form_number\x22]')); const _0x56785f = _0x532dd2 && typeof _0x532dd2['value'] !== _0x262233(0x188) ? String(_0x532dd2['value'])['trim']() : ''; return _0x56785f || getAppIdFromUrl(); } let _afmTimerId = null, _afmStartTs = 0x0; function ensureOverlayStyles() { const _0x1cd78e = _0x1768c4; if (document[_0x1cd78e(0x1a8)]('afm-style')) return; const _0x598441 = document['createElement']('style'); _0x598441['id'] = _0x1cd78e(0x1da), _0x598441[_0x1cd78e(0x1ad)] = _0x1cd78e(0x1ac), document[_0x1cd78e(0x11c)][_0x1cd78e(0x189)](_0x598441); } function fmt(_0x2e813d) { const _0x288fcb = _0x1768c4, _0x5bf223 = Math['floor'](_0x2e813d / 0x3e8), _0x54204f = Math[_0x288fcb(0x165)](_0x5bf223 / 0xe10), _0x5e1734 = Math['floor'](_0x5bf223 % 0xe10 / 0x3c), _0x44f71a = _0x5bf223 % 0x3c, _0x3ea7ff = _0x36c38b => _0x36c38b < 0xa ? '0' + _0x36c38b : '' + _0x36c38b; return _0x54204f > 0x0 ? _0x3ea7ff(_0x54204f) + ':' + _0x3ea7ff(_0x5e1734) + ':' + _0x3ea7ff(_0x44f71a) : _0x3ea7ff(_0x5e1734) + ':' + _0x3ea7ff(_0x44f71a); } function showOverlay(_0x58d9c6 = _0x1768c4(0x152)) { const _0x5c08c9 = _0x1768c4; ensureOverlayStyles(); if (document[_0x5c08c9(0x1a8)]('afm-loading-overlay')) return; _afmStartTs = Date['now'](); const _0x4321fa = document[_0x5c08c9(0x14a)](_0x5c08c9(0x1c1)); _0x4321fa['id'] = _0x5c08c9(0x196), _0x4321fa[_0x5c08c9(0x16a)] = _0x5c08c9(0x1a7) + _0x58d9c6 + _0x5c08c9(0x16b), document['body'][_0x5c08c9(0x189)](_0x4321fa); const _0x19890b = () => { const _0x7f01be = _0x5c08c9, _0x72dd4a = document['getElementById'](_0x7f01be(0x12a)); if (!_0x72dd4a) return; _0x72dd4a['textContent'] = fmt(Date[_0x7f01be(0x1c8)]() - _afmStartTs); }; _afmTimerId = setInterval(_0x19890b, 0x3e8), _0x19890b(); } function updateOverlayCounters({ total: _0x30b377, filled: _0x240528 }) { const _0x89c9b3 = _0x1768c4, _0x3a4417 = document[_0x89c9b3(0x1a8)](_0x89c9b3(0x1cc)), _0x4d5b9b = document[_0x89c9b3(0x1a8)]('afm-filled'), _0x724322 = document[_0x89c9b3(0x1a8)](_0x89c9b3(0x18c)), _0x4128a8 = document[_0x89c9b3(0x1a8)](_0x89c9b3(0x183)); if (!_0x3a4417 || !_0x4d5b9b || !_0x724322 || !_0x4128a8) return; const _0x448714 = Math['max'](0x0, _0x30b377 | 0x0), _0x459388 = Math['min'](Math[_0x89c9b3(0x1dc)](0x0, _0x240528 | 0x0), _0x448714), _0x27ae9b = Math['max'](0x0, _0x448714 - _0x459388), _0x57ce2c = _0x448714 === 0x0 ? 0x0 : Math['round'](_0x459388 / _0x448714 * 0x64); _0x3a4417[_0x89c9b3(0x1ad)] = String(_0x448714), _0x4d5b9b[_0x89c9b3(0x1ad)] = String(_0x459388), _0x724322[_0x89c9b3(0x1ad)] = String(_0x27ae9b), _0x4128a8[_0x89c9b3(0x124)]['width'] = _0x57ce2c + '%'; } function hideOverlay() { const _0x115fb7 = _0x1768c4; _afmTimerId && (clearInterval(_afmTimerId), _afmTimerId = null); const _0xc0aebe = document[_0x115fb7(0x1a8)]('afm-loading-overlay'); if (_0xc0aebe) _0xc0aebe[_0x115fb7(0x1d0)](); } const AFM_BLOCKER_ID = _0x1768c4(0x15f); let _afm_unbinders = [], _afm_prevBody = null; function lockInteraction() { const _0x17c338 = _0x1768c4; if (document[_0x17c338(0x1a8)](AFM_BLOCKER_ID)) return; !_afm_prevBody && (_afm_prevBody = { 'bodyOverflow': document[_0x17c338(0x150)][_0x17c338(0x124)][_0x17c338(0x1c2)], 'htmlOverflow': document['documentElement'][_0x17c338(0x124)]['overflow'], 'userSelect': document[_0x17c338(0x150)][_0x17c338(0x124)][_0x17c338(0x158)], 'touchAction': document[_0x17c338(0x150)][_0x17c338(0x124)]['touchAction'], 'overscroll': document[_0x17c338(0x1d3)][_0x17c338(0x124)]['overscrollBehavior'] }); document[_0x17c338(0x150)][_0x17c338(0x124)][_0x17c338(0x1c2)] = _0x17c338(0x1c3), document[_0x17c338(0x1d3)]['style'][_0x17c338(0x1c2)] = _0x17c338(0x1c3), document[_0x17c338(0x150)][_0x17c338(0x124)]['userSelect'] = _0x17c338(0x191), document[_0x17c338(0x150)][_0x17c338(0x124)]['touchAction'] = _0x17c338(0x191), document[_0x17c338(0x1d3)][_0x17c338(0x124)]['overscrollBehavior'] = _0x17c338(0x191); const _0x183b57 = document[_0x17c338(0x14a)]('div'); _0x183b57['id'] = AFM_BLOCKER_ID, _0x183b57['style'] = 'position:\x20fixed;\x20inset:\x200;\x20z-index:\x2099998;\x20cursor:\x20wait;\x20background:\x20transparent;'; const _0x864476 = _0x3708cd => { const _0x4a75cb = _0x17c338; _0x3708cd[_0x4a75cb(0x1d7)](), _0x3708cd[_0x4a75cb(0x1a4)](); };['pointerdown', _0x17c338(0x17b), _0x17c338(0x1be), 'click', _0x17c338(0x187), _0x17c338(0x145), _0x17c338(0x1b4), _0x17c338(0x156), _0x17c338(0x11e), _0x17c338(0x146), _0x17c338(0x1c4), _0x17c338(0x1c6), 'touchend', _0x17c338(0x159), _0x17c338(0x141)][_0x17c338(0x1cf)](_0x5b2bba => _0x183b57[_0x17c338(0x155)](_0x5b2bba, _0x864476, { 'passive': ![] })), document['body'][_0x17c338(0x189)](_0x183b57); const _0xed8a19 = _0x41faf0 => { const _0x269eb1 = _0x17c338; _0x41faf0[_0x269eb1(0x1d7)](), _0x41faf0[_0x269eb1(0x1a4)](); }; window[_0x17c338(0x155)](_0x17c338(0x169), _0xed8a19, !![]), window['addEventListener'](_0x17c338(0x143), _0xed8a19, !![]), window[_0x17c338(0x155)](_0x17c338(0x117), _0xed8a19, !![]), _afm_unbinders['push'](() => { const _0x554094 = _0x17c338; window[_0x554094(0x192)](_0x554094(0x169), _0xed8a19, !![]), window[_0x554094(0x192)](_0x554094(0x143), _0xed8a19, !![]), window[_0x554094(0x192)]('keyup', _0xed8a19, !![]), _0x183b57[_0x554094(0x1d0)](); }); } function unlockInteraction() { const _0x14be85 = _0x1768c4; try { _afm_unbinders[_0x14be85(0x1cf)](_0x2b77ac => _0x2b77ac()); } catch { } _afm_unbinders = []; const _0x47b4dc = document[_0x14be85(0x1a8)](AFM_BLOCKER_ID); if (_0x47b4dc) _0x47b4dc[_0x14be85(0x1d0)](); _afm_prevBody && (document[_0x14be85(0x150)]['style'][_0x14be85(0x1c2)] = _afm_prevBody[_0x14be85(0x1d9)] ?? '', document['documentElement'][_0x14be85(0x124)][_0x14be85(0x1c2)] = _afm_prevBody['htmlOverflow'] ?? '', document[_0x14be85(0x150)][_0x14be85(0x124)][_0x14be85(0x158)] = _afm_prevBody[_0x14be85(0x158)] ?? '', document[_0x14be85(0x150)]['style'][_0x14be85(0x157)] = _afm_prevBody[_0x14be85(0x157)] ?? '', document[_0x14be85(0x1d3)][_0x14be85(0x124)][_0x14be85(0x170)] = _afm_prevBody[_0x14be85(0x197)] ?? '', _afm_prevBody = null); } function bindActionButtonOnce(_0x466b01, _0x132762) { const _0x243bd6 = _0x1768c4; if (!_0x466b01 || _0x466b01[_0x243bd6(0x1db)](_0x243bd6(0x137))) return; _0x466b01[_0x243bd6(0x1ba)](_0x243bd6(0x137), '1'), _0x466b01[_0x243bd6(0x155)](_0x243bd6(0x185), async () => { const _0x33c16b = _0x243bd6, _0x374508 = await getAfmDocId(), _0x10d20c = { 'requestId': AFM_STATE[_0x33c16b(0x1de)] || '', 'AfmDocId': _0x374508 || '', 'afmId': _0x374508 || '', 'savedByUser': _0x132762 === 0x2 ? AFM_STATE[_0x33c16b(0x119)] || '' : '', 'subscribedByUser': _0x132762 === 0x3 ? AFM_STATE[_0x33c16b(0x119)] || '' : '', 'saveUserIp': '', 'subscribeUserIp': '', 'status': _0x132762 }; try { const _0x2b4674 = await fetch(_0x33c16b(0x17e), { 'method': _0x33c16b(0x17a), 'headers': { 'Content-Type': _0x33c16b(0x17d) }, 'body': JSON[_0x33c16b(0x1d5)](_0x10d20c) }); if (!_0x2b4674['ok']) throw new Error('Network\x20response\x20was\x20not\x20ok'); } catch (_0xd739da) { console[_0x33c16b(0x1ca)](_0x33c16b(0x14b), _0xd739da); } }); } function observeAndBindActionButtons() { const _0x17ceed = _0x1768c4, _0x46b3a4 = () => { const _0x3d83d8 = _0x3c7d; bindActionButtonOnce(document['querySelector'](_0x3d83d8(0x179)), 0x2), bindActionButtonOnce(document[_0x3d83d8(0x1b6)](_0x3d83d8(0x171)), 0x3); }; _0x46b3a4(); const _0x211801 = new MutationObserver(() => _0x46b3a4()); _0x211801['observe'](document[_0x17ceed(0x150)], { 'childList': !![], 'subtree': !![] }); } function _0x3c7d(_0x36e2de, _0x2aff78) { const _0x565d50 = _0x565d(); return _0x3c7d = function (_0x3c7d03, _0x3d8aed) { _0x3c7d03 = _0x3c7d03 - 0x116; let _0x422a04 = _0x565d50[_0x3c7d03]; return _0x422a04; }, _0x3c7d(_0x36e2de, _0x2aff78); } (function () { 'use strict'; const _0x51e629 = _0x1768c4; console['log'](_0x51e629(0x181)); const _0x17491c = document[_0x51e629(0x14a)](_0x51e629(0x124)); _0x17491c[_0x51e629(0x16a)] = '\x0a\x20\x20\x20\x20.afm-pulse\x20{\x20position:\x20fixed;\x20left:\x2050%;\x20top:\x2010%;\x20transform:\x20translate(-50%,\x2010px);\x20z-index:\x209999;\x20}\x0a\x20\x20\x20\x20.afm-pulse\x20{\x20box-shadow:\x200\x200\x200\x200\x20#1976d240;\x20transition:\x20box-shadow\x20.2s;\x20}\x0a\x20\x20\x20\x20.afm-pulse:hover\x20{\x20box-shadow:\x200\x200\x200\x206px\x20#1976d220;\x20}\x0a\x20\x20', document[_0x51e629(0x11c)][_0x51e629(0x189)](_0x17491c); const _0x4b5c2a = document[_0x51e629(0x14a)](_0x51e629(0x13f)); _0x4b5c2a[_0x51e629(0x19c)] = 'Заполнить', _0x4b5c2a[_0x51e629(0x19e)] = _0x51e629(0x193), _0x4b5c2a['style'] = _0x51e629(0x14d); const _0x3bcbaa = _0x51e629(0x123), _0xa16eda = _0x51e629(0x125), _0x4dd828 = _0x51e629(0x131), _0x3cdb28 = _0x51e629(0x1c0); observeAndBindActionButtons(), setInterval(async () => { const _0x186663 = _0x51e629, _0x2791bc = await getDataFromBuffer(); _0x2791bc == null ? (_0x4b5c2a[_0x186663(0x1c5)] = !![], _0x4b5c2a['innerText'] = _0x186663(0x182), _0x4b5c2a['style'] = _0x4b5c2a[_0x186663(0x124)][_0x186663(0x1a5)] + _0x3cdb28) : (_0x4b5c2a[_0x186663(0x1c5)] = ![], _0x4b5c2a['innerText'] = 'Заполнить', _0x4b5c2a[_0x186663(0x124)] = _0x4b5c2a['style'][_0x186663(0x1a5)] + _0x3bcbaa); }, 0x5dc), _0x4b5c2a[_0x51e629(0x19b)] = async () => { const _0x3c6cb2 = _0x51e629; _0x4b5c2a['disabled'] = !![], _0x4b5c2a[_0x3c6cb2(0x19c)] = 'Заполняется...', _0x4b5c2a[_0x3c6cb2(0x124)] = _0x4b5c2a[_0x3c6cb2(0x124)][_0x3c6cb2(0x1a5)] + _0xa16eda, showOverlay(_0x3c6cb2(0x122)), lockInteraction(), ((async () => { const _0x432579 = _0x3c6cb2; try { const _0x1bb17a = await getDataFromBuffer(); await new Promise(_0x281828 => setTimeout(_0x281828, 0x64)); if (_0x1bb17a?.['json'] == null) { _0x4b5c2a[_0x432579(0x1c5)] = ![], _0x4b5c2a[_0x432579(0x19c)] = _0x432579(0x163), _0x4b5c2a[_0x432579(0x124)] = _0x4b5c2a[_0x432579(0x124)]['cssText'] + _0x3bcbaa, hideOverlay(), unlockInteraction(), alert(_0x432579(0x182)); return; } await openAccordionByHeader(_0x432579(0x149), [_0x432579(0x144), _0x432579(0x15c)]), await openAccordionByHeader(_0x432579(0x13a), [_0x432579(0x134), _0x432579(0x1d8)]), await new Promise(_0x52537d => setTimeout(_0x52537d, 0xc8)); const _0x57c224 = _0x1bb17a['json'][_0x432579(0x16e)](_0x45f20e => _0x45f20e['Name'] === _0x432579(0x1de))?.[_0x432579(0x133)]; if (_0x57c224) AFM_STATE['businessKey'] = _0x57c224; if (_0x1bb17a[_0x432579(0x119)]) AFM_STATE[_0x432579(0x119)] = _0x1bb17a[_0x432579(0x119)]; let _0x2e3144 = []; try { _0x2e3144 = await fillFieldsWithRetries(_0x1bb17a[_0x432579(0x1a1)], 0x3); } catch (_0x18a091) { console[_0x432579(0x1ca)](_0x432579(0x16f), _0x18a091), await legacyFillOnce(_0x1bb17a[_0x432579(0x1a1)]), _0x2e3144 = []; } _0x2e3144['length'] && console[_0x432579(0x151)](_0x432579(0x1bd), _0x2e3144['map'](_0x5b3657 => _0x5b3657[_0x432579(0x147)])), _0x4b5c2a['disabled'] = ![], _0x4b5c2a[_0x432579(0x19c)] = _0x432579(0x163), _0x4b5c2a[_0x432579(0x124)] = _0x4b5c2a[_0x432579(0x124)]['cssText'] + _0x4dd828; } catch (_0x1f3381) { console[_0x432579(0x1ca)](_0x432579(0x1bf), _0x1f3381); } finally { hideOverlay(), unlockInteraction(); } })()), await new Promise(_0x437d4f => setTimeout(_0x437d4f, 0x32)); }, document['body'][_0x51e629(0x189)](_0x4b5c2a); }()); async function legacyFillOnce(_0x296671) { const _0x2330ea = _0x1768c4; for (const _0x2aa61a of _0x296671) { if (AFM_PROTECTED_NAMES[_0x2330ea(0x1b1)](_0x2aa61a[_0x2330ea(0x147)])) continue; _0x2aa61a[_0x2330ea(0x147)] === _0x2330ea(0x140) && (await openAccordionByHeader('участники', [_0x2330ea(0x121), 'participants[0].iin']), await openAccordionByHeader('участник\x201', [_0x2330ea(0x121)]), await openAccordionByHeader('банк\x20участника\x20операции', [_0x2330ea(0x11a)]), await openAccordionByHeader('юридический\x20адрес', [_0x2330ea(0x1c7)]), await openAccordionByHeader(_0x2330ea(0x1bb), ['participants[0].address.country'])); _0x2aa61a[_0x2330ea(0x147)] === _0x2330ea(0x13c) && (await openAccordionByHeader(_0x2330ea(0x16c), [_0x2330ea(0x17c), _0x2330ea(0x178)]), await openAccordionByHeader(_0x2330ea(0x15d), [_0x2330ea(0x12e), _0x2330ea(0x1a2), _0x2330ea(0x186)])); if (_0x2aa61a[_0x2330ea(0x12b)] === _0x2330ea(0x116)) { let _0x504d4a = document[_0x2330ea(0x1b6)]('[name=\x22' + _0x2aa61a[_0x2330ea(0x147)] + '\x22]'); if (!_0x504d4a) { const _0x252dea = Date[_0x2330ea(0x1c8)](); while (!_0x504d4a && Date[_0x2330ea(0x1c8)]() - _0x252dea < 0x7d0) { await new Promise(_0x468394 => setTimeout(_0x468394, 0x64)), _0x504d4a = document[_0x2330ea(0x1b6)](_0x2330ea(0x19f) + _0x2aa61a[_0x2330ea(0x147)] + '\x22]'); } } if (_0x504d4a && (_0x504d4a[_0x2330ea(0x180)] === 'INPUT' || _0x504d4a[_0x2330ea(0x180)] === _0x2330ea(0x1d4))) { setReactInputValue(_0x504d4a, _0x2aa61a[_0x2330ea(0x133)]); continue; } } if (_0x2aa61a[_0x2330ea(0x12b)] === _0x2330ea(0x138)) { await selectDropdownUniversal(_0x2aa61a[_0x2330ea(0x147)], _0x2aa61a['Value']); continue; } if (_0x2aa61a[_0x2330ea(0x12b)] === 'checkbox') { setReactCheckbox(_0x2aa61a[_0x2330ea(0x147)], _0x2aa61a[_0x2330ea(0x133)]); continue; } } }