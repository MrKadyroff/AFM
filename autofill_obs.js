// ==UserScript==
// @name         AFM
// @namespace    http://tampermonkey.net/
// @version      1.4
// @description  АФМ
// @author       AFM
// @match        https://websfm.kz/form-fm/*
// @grant        none
// ==/UserScript==
const _0x133160 = _0x55c7; function _0x5127() { const _0x5138b6 = ['input[name=\x22', 'sort', 'addEventListener', 'afm-pulse', 'background:#ec4141;color:#fff;cursor:not-allowed;', 'participants[0].document.number', 'from', 'ArrowDown', 'dispatchEvent', 'preventDefault', 'afm-filled', 'focus', 'includes', 'банк\x20участника\x20операции', 'checked', 'button[name=\x22', 'POST', 'afm-total', 'afm-bar-inner', 'Hello\x20World!', '[AFM]\x20Loaded\x20v1.6.6\x20(lite:\x20stronger\x20lock\x20+\x20bigger\x20modal)', 'scrollHeight', 'initiator', 'button[name=\x22subscribe\x22]', 'button[name=\x22save\x22]', 'background:#1976d2;color:#fff;cursor:pointer;', 'Загрузка...', 'querySelector', 'bodyOverflow', 'warn', 'some', 'INPUT', 'pathname', 'forEach', 'form-fm', 'text/plain', 'readText', 'length', 'createElement', 'participants[0].iin', 'now', '3xSByVD', 'div', 'set', 'push', 'escape', '\x20done,\x20remaining:\x20', 'input[type=\x22checkbox\x22][name=\x22', 'compositionstart', 'trim', 'touchAction', 'log', 'isArray', 'participants[0].full_name.first_name', 'parentElement', 'documentElement', '3390940DmwGXE', 'clientHeight', 'floor', 'input[placeholder]', 'touchmove', 'participants[0].participant', 'checkbox', '1842624hfyAiQ', 'фио', 'участник\x201', 'innerHTML', 'filter', 'operation.number', 'operation.currency', 'участники', 'call', 'form.form_number', '6tJlyNb', '1384155ebHVPP', 'dataset', '585162hgtdKY', 'max', 'cssText', '[name=\x22', 'afm-style', 'overscrollBehavior', 'FieldType', 'selectstart', 'input[name=\x22form.form_number\x22]', 'Value', 'round', 'overflow', 'participants[0].bank.country', 'participants[0].address.country', 'Ошибка\x20запроса:', 'observe', 'htmlOverflow', 'Заполняется...', 'onclick', 'name', 'input[name=\x22operation.number\x22]', 'scrollBy', 'toLowerCase', 'setValue', '\x0a\x20\x20\x20\x20:root{\x0a\x20\x20\x20\x20\x20\x20--afm-overlay-bg:\x20rgba(14,18,26,.26);\x0a\x20\x20\x20\x20\x20\x20--afm-card-grad-top:#1f2530;\x20--afm-card-grad-bot:#1b212b;\x0a\x20\x20\x20\x20\x20\x20--afm-card-border:#2e3644;\x20--afm-text-main:#fff;\x20--afm-text-sub:#d0d6e2;\x0a\x20\x20\x20\x20\x20\x20--afm-accent-1:#1fd1f9;\x20--afm-accent-2:#b621fe;\x20--afm-spinner:#7da2ff;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay{\x0a\x20\x20\x20\x20\x20\x20position:fixed;\x20inset:0;\x20background:var(--afm-overlay-bg);\x20z-index:99999;\x0a\x20\x20\x20\x20\x20\x20display:flex;\x20align-items:center;\x20justify-content:center;\x0a\x20\x20\x20\x20\x20\x20font-family:system-ui,-apple-system,Segoe\x20UI,Roboto,Arial;\x20color:var(--afm-text-main);\x0a\x20\x20\x20\x20\x20\x20animation:afm-fade-in\x20.12s\x20ease-out;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-card{\x0a\x20\x20\x20\x20\x20\x20width:min(680px,94vw);\x20/*\x20больше\x20карточка\x20*/\x0a\x20\x20\x20\x20\x20\x20background:linear-gradient(180deg,var(--afm-card-grad-top),var(--afm-card-grad-bot));\x0a\x20\x20\x20\x20\x20\x20border:1px\x20solid\x20var(--afm-card-border);\x20border-radius:16px;\x0a\x20\x20\x20\x20\x20\x20padding:26px\x2026px;\x20/*\x20чуть\x20больше\x20отступы\x20*/\x0a\x20\x20\x20\x20\x20\x20box-shadow:0\x2014px\x2060px\x20rgba(0,0,0,.38);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-row{display:flex;align-items:center;gap:14px;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-title{font-size:18px;font-weight:700;}\x20/*\x20+2px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-sub{font-size:14px;color:var(--afm-text-sub);opacity:.9;margin-top:4px;}\x20/*\x20+1px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-kpi{margin-top:12px;font-size:14px;opacity:.95;display:flex;gap:18px;flex-wrap:wrap;}\x20/*\x20+1px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-kpi\x20b{color:#fff;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-bar{margin-top:16px;width:100%;height:10px;background:#2a3240;border-radius:999px;overflow:hidden;}\x20/*\x20выше\x20и\x20толще\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-bar>div{height:100%;width:0%;background:linear-gradient(90deg,var(--afm-accent-1),var(--afm-accent-2));transition:width\x20.25s\x20ease;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-spin{width:26px;height:26px;flex:0\x200\x2026px;border-radius:50%;border:3px\x20solid\x20var(--afm-spinner);border-top-color:transparent;animation:afm-rot\x20.8s\x20linear\x20infinite;}\x20/*\x20больше\x20спиннер\x20*/\x0a\x20\x20\x20\x20@keyframes\x20afm-rot{to{transform:rotate(360deg);}}\x0a\x20\x20\x20\x20@keyframes\x20afm-fade-in{from{opacity:0;transform:translateY(-4px);}to{opacity:1;transform:none;}}\x0a\x20\x20', 'change', 'indexOf', 'getOwnPropertyDescriptor', 'Заполнить', 'innerText', 'afm-time', 'touchend', 'dblclick', 'setSelectionRange', 'setAttribute', 'none', 'head', 'сведения\x20об\x20операции', 'Backspace', 'select', '\x22][type=\x22button\x22]', 'mousemove', 'afm-loading-overlay', 'dragstart', 'getElementById', 'min', 'textContent', 'afm-listener', '⛔️\x20Аккордеон\x20не\x20раскрыл\x20нужные\x20поля:', 'pointerdown', '3233965YTdvoV', 'юридический\x20адрес', 'hidden', '[AFM]\x20Pass\x20', 'blur', 'participants[0].iin]', 'offsetParent', 'insertText', 'has', 'undefined', 'replace', '\x0a\x20\x20\x20\x20<div\x20class=\x22afm-card\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-spin\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-title\x22>Автозаполнение\x20формы</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-sub\x22\x20id=\x22afm-sub\x22>', 'Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.', 'appendChild', 'tagName', 'removeEventListener', 'keypress', 'pointermove', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-kpi\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Время:\x20<b\x20id=\x22afm-time\x22>00:00</b></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Заполнено:\x20<b\x20id=\x22afm-filled\x22>0</b>\x20из\x20<b\x20id=\x22afm-total\x22>0</b></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Осталось:\x20<b\x20id=\x22afm-left\x22>0</b></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-bar\x22><div\x20id=\x22afm-bar-inner\x22\x20style=\x22width:0%\x22></div></div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'keydown', 'className', 'parse', 'wheel', 'фактический\x20адрес', 'pointerup', 'operation.address.house_number', 'Network\x20response\x20was\x20not\x20ok', 'split', 'background:#43a047;color:#fff;cursor:pointer;', 'click', 'participants[0].legal_address.country', 'find', '1556108cHxGgR', 'форма\x20фм-1', 'closest', 'participants[0].document.type_document', 'mousedown', '19564fEIZbB', 'participants[0].full_name.last_name', 'test', 'hasAttribute', 'style', 'Name', 'background:#ffa726;color:#222;cursor:wait;', 'contextmenu', 'paste', 'input', 'prototype', 'error', 'TEXTAREA', 'businessKey', 'body', 'clipboard', 'participants[0].document.issue_date', 'position:\x20fixed;\x20inset:\x200;\x20z-index:\x2099998;\x20cursor:\x20wait;\x20background:\x20transparent;', 'setData', 'keyup', 'overflowY', 'form.operation_state', 'json', 'disabled', 'scrollTop', 'mouseup', 'querySelectorAll', 'value']; _0x5127 = function () { return _0x5138b6; }; return _0x5127(); } (function (_0x51de1a, _0x5aaff2) { const _0x10c7c8 = _0x55c7, _0x3bd94f = _0x51de1a(); while (!![]) { try { const _0x79fa4b = parseInt(_0x10c7c8(0x1a8)) / 0x1 + -parseInt(_0x10c7c8(0x1ff)) / 0x2 + -parseInt(_0x10c7c8(0x185)) / 0x3 * (parseInt(_0x10c7c8(0x1fa)) / 0x4) + -parseInt(_0x10c7c8(0x1da)) / 0x5 * (parseInt(_0x10c7c8(0x1a5)) / 0x6) + parseInt(_0x10c7c8(0x194)) / 0x7 + parseInt(_0x10c7c8(0x19b)) / 0x8 + parseInt(_0x10c7c8(0x1a6)) / 0x9; if (_0x79fa4b === _0x5aaff2) break; else _0x3bd94f['push'](_0x3bd94f['shift']()); } catch (_0x3eaefe) { _0x3bd94f['push'](_0x3bd94f['shift']()); } } }(_0x5127, 0x63a27)); function hi() { const _0x3e4467 = _0x55c7; console[_0x3e4467(0x18f)](_0x3e4467(0x16f)); } const AFM_STATE = { 'businessKey': '', 'initiator': '' }, AFM_PROTECTED_NAMES = new Set([_0x133160(0x1a4)]); function _0x55c7(_0xb2975f, _0x3d4598) { const _0x512749 = _0x5127(); return _0x55c7 = function (_0x55c70e, _0xd6bb9) { _0x55c70e = _0x55c70e - 0x14e; let _0x396042 = _0x512749[_0x55c70e]; return _0x396042; }, _0x55c7(_0xb2975f, _0x3d4598); } async function waitForElement(_0x52ba9a, _0x1af8ab = 0xc8) { const _0x309a5d = _0x133160, _0x295af6 = Date[_0x309a5d(0x184)](); while (Date['now']() - _0x295af6 < _0x1af8ab) { const _0x5d93f3 = document[_0x309a5d(0x177)](_0x52ba9a); if (_0x5d93f3) return _0x5d93f3; await new Promise(_0x1c1858 => setTimeout(_0x1c1858, 0x32)); } return null; } const _raf = () => new Promise(_0x2de2d2 => requestAnimationFrame(() => requestAnimationFrame(_0x2de2d2))); function _nativeSet(_0x11cd9e, _0x112b68 = '') { const _0x5186e6 = _0x133160, _0x3d4ce2 = Object[_0x5186e6(0x1c3)](HTMLInputElement[_0x5186e6(0x209)], 'value'); _0x3d4ce2 && _0x3d4ce2['set'] ? _0x3d4ce2[_0x5186e6(0x187)]['call'](_0x11cd9e, _0x112b68) : _0x11cd9e[_0x5186e6(0x15b)] = _0x112b68; } function _touchTracker(_0x2897ab, _0x408cb6) { const _0x185d23 = _0x133160; try { _0x2897ab['_valueTracker'] && _0x2897ab['_valueTracker'][_0x185d23(0x1bf)](_0x408cb6); } catch { } } async function hardClearInput(_0x19c888, _0x9e1a8 = 0x3) { const _0x5e8889 = _0x133160; for (let _0x2e7734 = 0x0; _0x2e7734 < _0x9e1a8; _0x2e7734++) { const _0x4a0384 = _0x19c888[_0x5e8889(0x15b)]; _0x19c888['focus'](); try { _0x19c888[_0x5e8889(0x1cf)](), _0x19c888[_0x5e8889(0x1c9)](0x0, _0x4a0384[_0x5e8889(0x181)]); } catch { } _nativeSet(_0x19c888, ''), _touchTracker(_0x19c888, _0x4a0384), _0x19c888[_0x5e8889(0x164)](new InputEvent(_0x5e8889(0x208), { 'bubbles': !![], 'inputType': 'deleteContentBackward' })), _0x19c888[_0x5e8889(0x164)](new Event(_0x5e8889(0x1c1), { 'bubbles': !![] })), await _raf(); if ((_0x19c888['value'] || '') === '') return !![]; _0x19c888[_0x5e8889(0x164)](new KeyboardEvent(_0x5e8889(0x1ed), { 'key': _0x5e8889(0x1ce), 'bubbles': !![] })), _0x19c888[_0x5e8889(0x164)](new InputEvent(_0x5e8889(0x208), { 'bubbles': !![], 'inputType': 'deleteContentBackward' })), _0x19c888['dispatchEvent'](new KeyboardEvent(_0x5e8889(0x153), { 'key': _0x5e8889(0x1ce), 'bubbles': !![] })), await _raf(); if ((_0x19c888[_0x5e8889(0x15b)] || '') === '') return !![]; } return (_0x19c888[_0x5e8889(0x15b)] || '') === ''; } async function openAccordionByHeader(_0x1dfd81, _0x2ceafc = [], _0x4c1f71 = 0x5dc) { const _0x3410e1 = _0x133160, _0x42eafe = Array[_0x3410e1(0x162)](document['querySelectorAll']('p'))[_0x3410e1(0x1f9)](_0x921148 => _0x921148['textContent']['trim']()[_0x3410e1(0x1be)]()[_0x3410e1(0x168)](_0x1dfd81[_0x3410e1(0x18d)]()['toLowerCase']())); if (!_0x42eafe) return ![]; const _0x169cb1 = _0x42eafe[_0x3410e1(0x1fc)](_0x3410e1(0x186)); if (!_0x169cb1) return ![]; const _0x4edbf2 = _0x2ceafc[_0x3410e1(0x17a)](_0x1bab9d => document['querySelector'](_0x3410e1(0x1ab) + _0x1bab9d + '\x22]')); if (_0x4edbf2) return !![]; _0x169cb1[_0x3410e1(0x1f7)](); const _0x5e59a4 = Date[_0x3410e1(0x184)](); while (Date['now']() - _0x5e59a4 < _0x4c1f71) { const _0x119e75 = _0x2ceafc['some'](_0x115947 => document[_0x3410e1(0x177)](_0x3410e1(0x1ab) + _0x115947 + '\x22]')); if (_0x119e75) return !![]; await new Promise(_0x1992cc => setTimeout(_0x1992cc, 0x64)); } return console[_0x3410e1(0x179)](_0x3410e1(0x1d8), _0x1dfd81), ![]; } async function realUserType(_0x1108aa, _0x3e4a73, _0xf9ccd4 = 0xa) { const _0x31b2fc = _0x133160; _0x1108aa[_0x31b2fc(0x167)](), _0x1108aa['dispatchEvent'](new CompositionEvent(_0x31b2fc(0x18c), { 'bubbles': !![] })); for (let _0x1bf8df = 0x0; _0x1bf8df < _0x3e4a73[_0x31b2fc(0x181)]; _0x1bf8df++) { const _0x28cd6b = _0x3e4a73[_0x1bf8df]; _0x1108aa[_0x31b2fc(0x164)](new KeyboardEvent(_0x31b2fc(0x1ed), { 'key': _0x28cd6b, 'code': _0x28cd6b, 'bubbles': !![] })), _0x1108aa[_0x31b2fc(0x164)](new KeyboardEvent(_0x31b2fc(0x1ea), { 'key': _0x28cd6b, 'code': _0x28cd6b, 'bubbles': !![] })); const _0x136948 = Object[_0x31b2fc(0x1c3)](window['HTMLInputElement'][_0x31b2fc(0x209)], 'value')[_0x31b2fc(0x187)]; _0x136948[_0x31b2fc(0x1a3)](_0x1108aa, _0x1108aa['value'] + _0x28cd6b), _0x1108aa[_0x31b2fc(0x164)](new InputEvent(_0x31b2fc(0x208), { 'data': _0x28cd6b, 'inputType': _0x31b2fc(0x1e1), 'bubbles': !![] })), _0x1108aa[_0x31b2fc(0x164)](new KeyboardEvent('keyup', { 'key': _0x28cd6b, 'code': _0x28cd6b, 'bubbles': !![] })), await new Promise(_0x2e759f => setTimeout(_0x2e759f, _0xf9ccd4)); } _0x1108aa[_0x31b2fc(0x164)](new CompositionEvent('compositionend', { 'data': _0x3e4a73, 'bubbles': !![] })); const _0x51a74a = new DataTransfer(); _0x51a74a[_0x31b2fc(0x152)](_0x31b2fc(0x17f), _0x3e4a73), _0x1108aa['dispatchEvent'](new ClipboardEvent(_0x31b2fc(0x207), { 'clipboardData': _0x51a74a, 'bubbles': !![] })), _0x1108aa[_0x31b2fc(0x164)](new Event(_0x31b2fc(0x1c1), { 'bubbles': !![] })); } function setReactInputValue(_0x11a2b7, _0x315b87) { const _0x5282dc = _0x133160, _0x343701 = _0x11a2b7['value']; _0x11a2b7['value'] = _0x315b87; const _0x4a5f62 = _0x11a2b7['_valueTracker']; if (_0x4a5f62) _0x4a5f62[_0x5282dc(0x1bf)](_0x343701); _0x11a2b7['dispatchEvent'](new Event(_0x5282dc(0x208), { 'bubbles': !![] })), _0x11a2b7[_0x5282dc(0x164)](new Event(_0x5282dc(0x1c1), { 'bubbles': !![] })); } async function selectDropdownUniversal(_0x3a9dcf, _0x40ac74, _0x1d9ff9 = {}) { const _0x159831 = _0x133160, { openDelay: openDelay = 0x96, step: step = 0x1f4, maxScrolls: maxScrolls = 0x28, findTimeout: findTimeout = 0xbb8 } = _0x1d9ff9, _0x507c3b = _0x11fa34 => new Promise(_0x32b0a0 => setTimeout(_0x32b0a0, _0x11fa34)), _0x4af48f = document[_0x159831(0x177)](_0x159831(0x16b) + CSS[_0x159831(0x189)](_0x3a9dcf) + '\x22]'); if (!_0x4af48f) return ![]; _0x4af48f[_0x159831(0x167)](), _0x4af48f[_0x159831(0x1f7)](), await _0x507c3b(openDelay); let _0x4c6365 = _0x4af48f[_0x159831(0x1fc)](_0x159831(0x186))?.[_0x159831(0x177)]('input[placeholder]'); !_0x4c6365 && (_0x4c6365 = Array[_0x159831(0x162)](document[_0x159831(0x15a)](_0x159831(0x197)))['find'](_0x31a12f => _0x31a12f[_0x159831(0x1e0)] !== null)); _0x4c6365 && (await realUserType(_0x4c6365, _0x40ac74, 0x14), await _0x507c3b(0x50)); function _0xcc9e97(_0x266b34) { const _0x519492 = _0x159831; let _0x516d77 = _0x266b34; while (_0x516d77 && _0x516d77 !== document['body']) { const _0x27a29d = getComputedStyle(_0x516d77), _0x4f3362 = /(auto|scroll)/[_0x519492(0x201)](_0x27a29d[_0x519492(0x154)]); if (_0x4f3362 && _0x516d77[_0x519492(0x171)] > _0x516d77[_0x519492(0x195)]) return _0x516d77; _0x516d77 = _0x516d77[_0x519492(0x192)]; } const _0x2d83fe = Array['from'](document[_0x519492(0x15a)]('div,ul'))[_0x519492(0x19f)](_0x561d7a => _0x561d7a['scrollHeight'] > _0x561d7a['clientHeight'] && /(auto|scroll)/[_0x519492(0x201)](getComputedStyle(_0x561d7a)[_0x519492(0x154)]))[_0x519492(0x15d)]((_0x330924, _0x1977ed) => _0x1977ed[_0x519492(0x171)] - _0x330924['scrollHeight']); return _0x2d83fe[0x0] || document[_0x519492(0x14e)]; } function _0x1ab2e3() { const _0x4305d3 = _0x159831, _0x11a757 = Array[_0x4305d3(0x162)](document[_0x4305d3(0x15a)]('button[name=\x22' + CSS[_0x4305d3(0x189)](_0x3a9dcf) + _0x4305d3(0x1d0)))[_0x4305d3(0x19f)](_0x1c2f82 => _0x1c2f82 !== _0x4af48f); if (!_0x11a757[_0x4305d3(0x181)]) return Array[_0x4305d3(0x162)](document['querySelectorAll'](_0x4305d3(0x16b) + CSS['escape'](_0x3a9dcf) + '\x22]'))[_0x4305d3(0x19f)](_0x53d55a => _0x53d55a !== _0x4af48f); return _0x11a757; } const _0xde7d58 = _0x4308aa => (_0x4308aa || '')[_0x159831(0x1e4)](/\s+/g, '\x20')[_0x159831(0x18d)]()[_0x159831(0x1be)](), _0x5e1c81 = _0xde7d58(_0x40ac74); let _0x3670a = null; const _0x312779 = Date[_0x159831(0x184)](); while (Date[_0x159831(0x184)]() - _0x312779 < findTimeout && !_0x3670a) { const _0xf5ceba = _0x1ab2e3(); _0x3670a = _0xf5ceba[_0x159831(0x1f9)](_0x341917 => _0xde7d58(_0x341917['dataset']?.[_0x159831(0x1bb)] || _0x341917[_0x159831(0x1d6)]) === _0x5e1c81) || _0xf5ceba[_0x159831(0x1f9)](_0x481d32 => _0xde7d58(_0x481d32[_0x159831(0x1a7)]?.[_0x159831(0x1bb)] || _0x481d32['textContent'])[_0x159831(0x168)](_0x5e1c81)); if (_0x3670a) break; await _0x507c3b(0x3c); } if (!_0x3670a) { const _0x2a0b06 = _0x1ab2e3()[0x0] || _0x4c6365 || _0x4af48f, _0x531c99 = _0xcc9e97(_0x2a0b06); let _0x4df83a = 0x0, _0x3a70eb = -0x1; while (_0x4df83a < maxScrolls) { if (_0x531c99[_0x159831(0x158)] === _0x3a70eb) break; _0x3a70eb = _0x531c99[_0x159831(0x158)], _0x531c99[_0x159831(0x1bd)](0x0, step), await _0x507c3b(0x78); const _0x3cd658 = _0x1ab2e3(); _0x3670a = _0x3cd658[_0x159831(0x1f9)](_0x8be58e => _0xde7d58(_0x8be58e[_0x159831(0x1a7)]?.[_0x159831(0x1bb)] || _0x8be58e[_0x159831(0x1d6)]) === _0x5e1c81) || _0x3cd658['find'](_0x1ae796 => _0xde7d58(_0x1ae796[_0x159831(0x1a7)]?.['name'] || _0x1ae796['textContent'])[_0x159831(0x168)](_0x5e1c81)); if (_0x3670a) break; _0x4df83a++; } } if (!_0x3670a && _0x4c6365) for (let _0x3a0f17 = 0x0; _0x3a0f17 < 0x32; _0x3a0f17++) { _0x4c6365[_0x159831(0x164)](new KeyboardEvent('keydown', { 'key': _0x159831(0x163), 'bubbles': !![] })), await _0x507c3b(0x28); const _0x33dc5f = document[_0x159831(0x177)]('[aria-selected=\x22true\x22],\x20[data-highlighted=\x22true\x22]'); if (_0x33dc5f) { const _0x40f0f3 = _0xde7d58(_0x33dc5f[_0x159831(0x1d6)] || _0x33dc5f['dataset']?.[_0x159831(0x1bb)]); if (_0x40f0f3[_0x159831(0x168)](_0x5e1c81)) { _0x3670a = _0x33dc5f; break; } } } if (_0x3670a) return _0x3670a[_0x159831(0x1f7)](), await _0x507c3b(0x50), document[_0x159831(0x14e)]['click'](), !![]; return ![]; } function setReactCheckbox(_0x25f606, _0x3d40c1 = !![]) { const _0x2f9f06 = _0x133160, _0x3e63a5 = document[_0x2f9f06(0x177)](_0x2f9f06(0x18b) + _0x25f606 + '\x22]'); if (_0x3e63a5) { if (_0x3e63a5['checked'] !== _0x3d40c1) _0x3e63a5[_0x2f9f06(0x1f7)](); return _0x3e63a5[_0x2f9f06(0x164)](new Event('change', { 'bubbles': !![] })), !![]; } return ![]; } const norm = _0x53d85e => String(_0x53d85e ?? '')['trim']()[_0x133160(0x1be)](); function isFieldFilled(_0x2bf3c2) { const _0x6e7f80 = _0x133160; if (_0x2bf3c2[_0x6e7f80(0x1ae)] === _0x6e7f80(0x208)) { const _0x4da3c0 = document[_0x6e7f80(0x177)](_0x6e7f80(0x1ab) + _0x2bf3c2['Name'] + '\x22]'); if (!_0x4da3c0) return ![]; return norm(_0x4da3c0[_0x6e7f80(0x15b)]) === norm(_0x2bf3c2[_0x6e7f80(0x1b1)]); } if (_0x2bf3c2[_0x6e7f80(0x1ae)] === _0x6e7f80(0x19a)) { const _0x3e8c95 = document[_0x6e7f80(0x177)](_0x6e7f80(0x18b) + _0x2bf3c2[_0x6e7f80(0x204)] + '\x22]'); return !!_0x3e8c95 && _0x3e8c95[_0x6e7f80(0x16a)] === !!_0x2bf3c2[_0x6e7f80(0x1b1)]; } if (_0x2bf3c2['FieldType'] === 'select') { const _0x346536 = document['querySelector'](_0x6e7f80(0x15c) + _0x2bf3c2[_0x6e7f80(0x204)] + '\x22]'); if (_0x346536 && _0x346536['value']) return norm(_0x346536[_0x6e7f80(0x15b)]) === norm(_0x2bf3c2['Value']); const _0x5bfd81 = document['querySelector'](_0x6e7f80(0x16b) + _0x2bf3c2['Name'] + '\x22]'); if (!_0x5bfd81) return ![]; const _0x5d2f0d = norm(_0x5bfd81['dataset']?.[_0x6e7f80(0x1bb)] || _0x5bfd81[_0x6e7f80(0x1d6)] || ''), _0x25e2c8 = norm(_0x2bf3c2[_0x6e7f80(0x1b1)]); return _0x5d2f0d[_0x6e7f80(0x168)](_0x25e2c8) || _0x5d2f0d === _0x25e2c8; } return ![]; } async function ensureSectionsForField(_0x32b59c) { const _0x2ae38f = _0x133160; _0x32b59c[_0x2ae38f(0x204)] === _0x2ae38f(0x1f3) && (await openAccordionByHeader(_0x2ae38f(0x1a2), [_0x2ae38f(0x199), _0x2ae38f(0x1df)]), await openAccordionByHeader(_0x2ae38f(0x19d), [_0x2ae38f(0x199)]), await openAccordionByHeader(_0x2ae38f(0x169), [_0x2ae38f(0x1b4)]), await openAccordionByHeader(_0x2ae38f(0x1db), [_0x2ae38f(0x1f8)]), await openAccordionByHeader(_0x2ae38f(0x1f1), [_0x2ae38f(0x1b5)])), _0x32b59c[_0x2ae38f(0x204)] === _0x2ae38f(0x183) && (await openAccordionByHeader('фио', [_0x2ae38f(0x200), 'participants[0].full_name.first_name']), await openAccordionByHeader('документ,\x20удостоверяющий\x20личность', [_0x2ae38f(0x1fd), 'participants[0].document.number', _0x2ae38f(0x150)])); } async function clearField(_0x2d287f) { const _0x426b48 = _0x133160; if (AFM_PROTECTED_NAMES[_0x426b48(0x1e2)](_0x2d287f[_0x426b48(0x204)])) return; if (_0x2d287f['FieldType'] === _0x426b48(0x208)) { const _0x217fc3 = document[_0x426b48(0x177)]('[name=\x22' + _0x2d287f['Name'] + '\x22]'); _0x217fc3 && (_0x217fc3['tagName'] === _0x426b48(0x17b) || _0x217fc3[_0x426b48(0x1e8)] === _0x426b48(0x20b)) && (await hardClearInput(_0x217fc3), _0x217fc3[_0x426b48(0x164)](new Event(_0x426b48(0x1de), { 'bubbles': !![] })), _0x217fc3[_0x426b48(0x164)](new Event('focus', { 'bubbles': !![] }))); return; } if (_0x2d287f['FieldType'] === 'checkbox') { const _0x70b43d = document[_0x426b48(0x177)](_0x426b48(0x18b) + _0x2d287f['Name'] + '\x22]'); _0x70b43d && _0x70b43d[_0x426b48(0x16a)] && (_0x70b43d[_0x426b48(0x1f7)](), _0x70b43d[_0x426b48(0x164)](new Event(_0x426b48(0x1c1), { 'bubbles': !![] })), await _raf()); return; } if (_0x2d287f[_0x426b48(0x1ae)] === 'select') { const _0x1cbc98 = document[_0x426b48(0x177)](_0x426b48(0x15c) + _0x2d287f[_0x426b48(0x204)] + '\x22]'); if (_0x1cbc98) { const _0x45cca5 = _0x1cbc98[_0x426b48(0x15b)]; _nativeSet(_0x1cbc98, ''), _touchTracker(_0x1cbc98, _0x45cca5), _0x1cbc98[_0x426b48(0x164)](new Event('input', { 'bubbles': !![] })), _0x1cbc98[_0x426b48(0x164)](new Event(_0x426b48(0x1c1), { 'bubbles': !![] })), await _raf(); } document['body']['click'](); return; } } async function fillFieldOnce(_0x4b28c6) { const _0x2354a7 = _0x133160; await ensureSectionsForField(_0x4b28c6); if (_0x4b28c6['FieldType'] === _0x2354a7(0x208)) { let _0x592bf6 = document[_0x2354a7(0x177)](_0x2354a7(0x1ab) + _0x4b28c6[_0x2354a7(0x204)] + '\x22]'); if (!_0x592bf6) { const _0x1d52e7 = Date[_0x2354a7(0x184)](); while (!_0x592bf6 && Date['now']() - _0x1d52e7 < 0x7d0) { await new Promise(_0x3da3b7 => setTimeout(_0x3da3b7, 0x64)), _0x592bf6 = document['querySelector']('[name=\x22' + _0x4b28c6[_0x2354a7(0x204)] + '\x22]'); } } if (_0x592bf6 && (_0x592bf6[_0x2354a7(0x1e8)] === 'INPUT' || _0x592bf6[_0x2354a7(0x1e8)] === _0x2354a7(0x20b))) setReactInputValue(_0x592bf6, _0x4b28c6[_0x2354a7(0x1b1)]); } else { if (_0x4b28c6[_0x2354a7(0x1ae)] === _0x2354a7(0x1cf)) await selectDropdownUniversal(_0x4b28c6[_0x2354a7(0x204)], _0x4b28c6[_0x2354a7(0x1b1)]); else _0x4b28c6[_0x2354a7(0x1ae)] === _0x2354a7(0x19a) && setReactCheckbox(_0x4b28c6[_0x2354a7(0x204)], _0x4b28c6['Value']); } return await new Promise(_0x2ad324 => setTimeout(_0x2ad324, 0x3c)), isFieldFilled(_0x4b28c6); } async function fillFieldsWithRetries(_0x531f21, _0x14001e = 0x3) { const _0x1b4774 = _0x133160; let _0x44f547 = _0x531f21['filter'](_0x3351b5 => ['input', _0x1b4774(0x1cf), 'checkbox'][_0x1b4774(0x168)](_0x3351b5[_0x1b4774(0x1ae)]))['filter'](_0x103119 => !AFM_PROTECTED_NAMES['has'](_0x103119[_0x1b4774(0x204)])); const _0x2bbe3b = _0x44f547['length']; let _0x6f54b = new Set(); updateOverlayCounters({ 'total': _0x2bbe3b, 'filled': 0x0 }); for (let _0x5d7605 = 0x1; _0x5d7605 <= _0x14001e && _0x44f547[_0x1b4774(0x181)]; _0x5d7605++) { const _0x5169b0 = []; if (_0x5d7605 > 0x1) await new Promise(_0x2ebcbe => setTimeout(_0x2ebcbe, 0x78)); for (const _0x55f2e8 of _0x44f547) { if (_0x5d7605 > 0x1) { try { await clearField(_0x55f2e8); } catch (_0x5b2186) { console['warn']('[AFM]\x20clearField\x20error:', _0x55f2e8[_0x1b4774(0x204)], _0x5b2186); } await new Promise(_0xc2ea99 => setTimeout(_0xc2ea99, 0x28)); } const _0x239372 = await fillFieldOnce(_0x55f2e8); !_0x239372 ? _0x5169b0[_0x1b4774(0x188)](_0x55f2e8) : (_0x6f54b['add'](_0x55f2e8[_0x1b4774(0x204)]), updateOverlayCounters({ 'total': _0x2bbe3b, 'filled': _0x6f54b['size'] })); } _0x44f547 = _0x5169b0, console[_0x1b4774(0x18f)](_0x1b4774(0x1dd) + _0x5d7605 + _0x1b4774(0x18a) + _0x44f547[_0x1b4774(0x181)]); } return _0x44f547; } async function getDataFromBuffer() { const _0xe3ab10 = _0x133160; try { const _0x414032 = await navigator[_0xe3ab10(0x14f)][_0xe3ab10(0x180)](), _0x12221d = JSON[_0xe3ab10(0x1ef)](_0x414032); if (_0x12221d?.[_0xe3ab10(0x172)]) AFM_STATE[_0xe3ab10(0x172)] = _0x12221d[_0xe3ab10(0x172)]; if (_0x12221d?.[_0xe3ab10(0x156)] && Array[_0xe3ab10(0x190)](_0x12221d[_0xe3ab10(0x156)])) { const _0x3b8d43 = _0x12221d[_0xe3ab10(0x156)][_0xe3ab10(0x1f9)](_0x3c8f58 => _0x3c8f58['Name'] === _0xe3ab10(0x20c))?.[_0xe3ab10(0x1b1)]; if (_0x3b8d43) AFM_STATE['businessKey'] = _0x3b8d43; } return _0x12221d; } catch { return null; } } function getAppIdFromUrl() { const _0x2f07e0 = _0x133160, _0x46fa42 = location[_0x2f07e0(0x17c)][_0x2f07e0(0x1f5)]('/')[_0x2f07e0(0x19f)](Boolean), _0x3c67e0 = _0x46fa42[_0x2f07e0(0x1c2)](_0x2f07e0(0x17e)); if (_0x3c67e0 >= 0x0 && _0x46fa42[_0x3c67e0 + 0x1]) return _0x46fa42[_0x3c67e0 + 0x1]; return ''; } async function getAfmDocId() { const _0x35b174 = _0x133160; let _0x55c8b8 = document[_0x35b174(0x177)](_0x35b174(0x1b0)); (!_0x55c8b8 || !_0x55c8b8[_0x35b174(0x15b)]?.[_0x35b174(0x18d)]()) && (await openAccordionByHeader(_0x35b174(0x1fb), [_0x35b174(0x1a4)]), await new Promise(_0x5ad390 => setTimeout(_0x5ad390, 0x64)), _0x55c8b8 = document[_0x35b174(0x177)](_0x35b174(0x1b0))); const _0x5c6040 = _0x55c8b8 && typeof _0x55c8b8['value'] !== _0x35b174(0x1e3) ? String(_0x55c8b8[_0x35b174(0x15b)])['trim']() : ''; return _0x5c6040 || getAppIdFromUrl(); } async function getRequestId() { const _0x14a3c3 = _0x133160; let _0x33e3f1 = document[_0x14a3c3(0x177)](_0x14a3c3(0x1bc)); (!_0x33e3f1 || !_0x33e3f1['value']?.[_0x14a3c3(0x18d)]()) && (await openAccordionByHeader('сведения\x20об\x20операции', [_0x14a3c3(0x1a0)]), await new Promise(_0x56b4c6 => setTimeout(_0x56b4c6, 0x64)), _0x33e3f1 = document[_0x14a3c3(0x177)]('input[name=\x22operation.number\x22]')); const _0x9f029a = _0x33e3f1 && typeof _0x33e3f1[_0x14a3c3(0x15b)] !== _0x14a3c3(0x1e3) ? String(_0x33e3f1['value'])['trim']() : ''; return _0x9f029a || getAppIdFromUrl(); } let _afmTimerId = null, _afmStartTs = 0x0; function ensureOverlayStyles() { const _0x683e4f = _0x133160; if (document[_0x683e4f(0x1d4)](_0x683e4f(0x1ac))) return; const _0x55f6eb = document[_0x683e4f(0x182)]('style'); _0x55f6eb['id'] = _0x683e4f(0x1ac), _0x55f6eb['textContent'] = _0x683e4f(0x1c0), document['head'][_0x683e4f(0x1e7)](_0x55f6eb); } function fmt(_0xcb8a54) { const _0x53daac = _0x133160, _0x542fa4 = Math[_0x53daac(0x196)](_0xcb8a54 / 0x3e8), _0x26f5ce = Math['floor'](_0x542fa4 / 0xe10), _0x1dfe9a = Math[_0x53daac(0x196)](_0x542fa4 % 0xe10 / 0x3c), _0x19b1e2 = _0x542fa4 % 0x3c, _0x22f67c = _0x43c470 => _0x43c470 < 0xa ? '0' + _0x43c470 : '' + _0x43c470; return _0x26f5ce > 0x0 ? _0x22f67c(_0x26f5ce) + ':' + _0x22f67c(_0x1dfe9a) + ':' + _0x22f67c(_0x19b1e2) : _0x22f67c(_0x1dfe9a) + ':' + _0x22f67c(_0x19b1e2); } function showOverlay(_0x25a441 = _0x133160(0x176)) { const _0x3511e9 = _0x133160; ensureOverlayStyles(); if (document[_0x3511e9(0x1d4)](_0x3511e9(0x1d2))) return; _afmStartTs = Date[_0x3511e9(0x184)](); const _0x1fad8b = document[_0x3511e9(0x182)](_0x3511e9(0x186)); _0x1fad8b['id'] = _0x3511e9(0x1d2), _0x1fad8b[_0x3511e9(0x19e)] = _0x3511e9(0x1e5) + _0x25a441 + _0x3511e9(0x1ec), document[_0x3511e9(0x14e)]['appendChild'](_0x1fad8b); const _0x5e0567 = () => { const _0x296f51 = _0x3511e9, _0x11d9a7 = document[_0x296f51(0x1d4)](_0x296f51(0x1c6)); if (!_0x11d9a7) return; _0x11d9a7[_0x296f51(0x1d6)] = fmt(Date['now']() - _afmStartTs); }; _afmTimerId = setInterval(_0x5e0567, 0x3e8), _0x5e0567(); } function updateOverlayCounters({ total: _0x449ec6, filled: _0x4892e9 }) { const _0x14598b = _0x133160, _0x1930c7 = document[_0x14598b(0x1d4)](_0x14598b(0x16d)), _0x5218a3 = document['getElementById'](_0x14598b(0x166)), _0x222ef0 = document[_0x14598b(0x1d4)]('afm-left'), _0x4ac7c7 = document[_0x14598b(0x1d4)](_0x14598b(0x16e)); if (!_0x1930c7 || !_0x5218a3 || !_0x222ef0 || !_0x4ac7c7) return; const _0x4d8f2a = Math[_0x14598b(0x1a9)](0x0, _0x449ec6 | 0x0), _0x298d7a = Math[_0x14598b(0x1d5)](Math[_0x14598b(0x1a9)](0x0, _0x4892e9 | 0x0), _0x4d8f2a), _0x34bc99 = Math[_0x14598b(0x1a9)](0x0, _0x4d8f2a - _0x298d7a), _0x4ae3dd = _0x4d8f2a === 0x0 ? 0x0 : Math[_0x14598b(0x1b2)](_0x298d7a / _0x4d8f2a * 0x64); _0x1930c7['textContent'] = String(_0x4d8f2a), _0x5218a3['textContent'] = String(_0x298d7a), _0x222ef0[_0x14598b(0x1d6)] = String(_0x34bc99), _0x4ac7c7[_0x14598b(0x203)]['width'] = _0x4ae3dd + '%'; } function hideOverlay() { const _0x23e7df = _0x133160; _afmTimerId && (clearInterval(_afmTimerId), _afmTimerId = null); const _0x41266c = document['getElementById'](_0x23e7df(0x1d2)); if (_0x41266c) _0x41266c['remove'](); } const AFM_BLOCKER_ID = 'afm-interaction-lock'; let _afm_unbinders = [], _afm_prevBody = null; function lockInteraction() { const _0x57a404 = _0x133160; if (document[_0x57a404(0x1d4)](AFM_BLOCKER_ID)) return; !_afm_prevBody && (_afm_prevBody = { 'bodyOverflow': document[_0x57a404(0x14e)]['style'][_0x57a404(0x1b3)], 'htmlOverflow': document[_0x57a404(0x193)][_0x57a404(0x203)]['overflow'], 'userSelect': document[_0x57a404(0x14e)][_0x57a404(0x203)]['userSelect'], 'touchAction': document[_0x57a404(0x14e)][_0x57a404(0x203)][_0x57a404(0x18e)], 'overscroll': document[_0x57a404(0x193)][_0x57a404(0x203)]['overscrollBehavior'] }); document['body'][_0x57a404(0x203)][_0x57a404(0x1b3)] = 'hidden', document[_0x57a404(0x193)]['style']['overflow'] = _0x57a404(0x1dc), document[_0x57a404(0x14e)][_0x57a404(0x203)]['userSelect'] = _0x57a404(0x1cb), document[_0x57a404(0x14e)][_0x57a404(0x203)][_0x57a404(0x18e)] = _0x57a404(0x1cb), document[_0x57a404(0x193)][_0x57a404(0x203)]['overscrollBehavior'] = 'none'; const _0x1e0539 = document['createElement'](_0x57a404(0x186)); _0x1e0539['id'] = AFM_BLOCKER_ID, _0x1e0539[_0x57a404(0x203)] = _0x57a404(0x151); const _0x1fdbb7 = _0x25e777 => { const _0x2035ac = _0x57a404; _0x25e777['stopPropagation'](), _0x25e777[_0x2035ac(0x165)](); };[_0x57a404(0x1d9), _0x57a404(0x1f2), _0x57a404(0x1eb), _0x57a404(0x1f7), _0x57a404(0x1c8), _0x57a404(0x206), _0x57a404(0x1fe), _0x57a404(0x159), _0x57a404(0x1d1), _0x57a404(0x1f0), 'touchstart', _0x57a404(0x198), _0x57a404(0x1c7), _0x57a404(0x1d3), _0x57a404(0x1af)][_0x57a404(0x17d)](_0x2a56a9 => _0x1e0539['addEventListener'](_0x2a56a9, _0x1fdbb7, { 'passive': ![] })), document[_0x57a404(0x14e)][_0x57a404(0x1e7)](_0x1e0539); const _0x528697 = _0x3a4f59 => { const _0x47b6f8 = _0x57a404; _0x3a4f59['stopPropagation'](), _0x3a4f59[_0x47b6f8(0x165)](); }; window['addEventListener'](_0x57a404(0x1ed), _0x528697, !![]), window[_0x57a404(0x15e)](_0x57a404(0x1ea), _0x528697, !![]), window[_0x57a404(0x15e)](_0x57a404(0x153), _0x528697, !![]), _afm_unbinders[_0x57a404(0x188)](() => { const _0x5415da = _0x57a404; window[_0x5415da(0x1e9)](_0x5415da(0x1ed), _0x528697, !![]), window[_0x5415da(0x1e9)](_0x5415da(0x1ea), _0x528697, !![]), window['removeEventListener'](_0x5415da(0x153), _0x528697, !![]), _0x1e0539['remove'](); }); } function unlockInteraction() { const _0x4177f = _0x133160; try { _afm_unbinders[_0x4177f(0x17d)](_0x45fe04 => _0x45fe04()); } catch { } _afm_unbinders = []; const _0x549cc5 = document[_0x4177f(0x1d4)](AFM_BLOCKER_ID); if (_0x549cc5) _0x549cc5['remove'](); _afm_prevBody && (document[_0x4177f(0x14e)][_0x4177f(0x203)][_0x4177f(0x1b3)] = _afm_prevBody[_0x4177f(0x178)] ?? '', document[_0x4177f(0x193)][_0x4177f(0x203)][_0x4177f(0x1b3)] = _afm_prevBody[_0x4177f(0x1b8)] ?? '', document[_0x4177f(0x14e)]['style']['userSelect'] = _afm_prevBody['userSelect'] ?? '', document[_0x4177f(0x14e)][_0x4177f(0x203)][_0x4177f(0x18e)] = _afm_prevBody['touchAction'] ?? '', document[_0x4177f(0x193)]['style'][_0x4177f(0x1ad)] = _afm_prevBody['overscroll'] ?? '', _afm_prevBody = null); } function bindActionButtonOnce(_0x3774ef, _0x53b2d6) { const _0x2cbf1f = _0x133160; if (!_0x3774ef || _0x3774ef[_0x2cbf1f(0x202)](_0x2cbf1f(0x1d7))) return; _0x3774ef[_0x2cbf1f(0x1ca)]('afm-listener', '1'), _0x3774ef[_0x2cbf1f(0x15e)]('click', async () => { const _0x412539 = _0x2cbf1f, _0x21df47 = await getAfmDocId(), _0x2bfae3 = await getRequestId(), _0x366fb3 = { 'requestId': AFM_STATE[_0x412539(0x20c)] || _0x2bfae3 || '', 'AfmDocId': _0x21df47 || '', 'afmId': _0x21df47 || '', 'savedByUser': _0x53b2d6 === 0x2 ? AFM_STATE['initiator'] || '' : '', 'subscribedByUser': _0x53b2d6 === 0x3 ? AFM_STATE[_0x412539(0x172)] || '' : '', 'saveUserIp': '', 'subscribeUserIp': '', 'status': _0x53b2d6 }; try { const _0x5d7f74 = await fetch('https://api.quiq.kz/Application/afmStatus', { 'method': _0x412539(0x16c), 'headers': { 'Content-Type': 'application/json' }, 'body': JSON['stringify'](_0x366fb3) }); if (!_0x5d7f74['ok']) throw new Error(_0x412539(0x1f4)); } catch (_0x4fac1b) { console[_0x412539(0x20a)](_0x412539(0x1b6), _0x4fac1b); } }); } function observeAndBindActionButtons() { const _0x3c95cf = _0x133160, _0x333bd4 = () => { const _0x5c3946 = _0x55c7; bindActionButtonOnce(document[_0x5c3946(0x177)](_0x5c3946(0x174)), 0x2), bindActionButtonOnce(document[_0x5c3946(0x177)](_0x5c3946(0x173)), 0x3); }; _0x333bd4(); const _0x16f312 = new MutationObserver(() => _0x333bd4()); _0x16f312[_0x3c95cf(0x1b7)](document['body'], { 'childList': !![], 'subtree': !![] }); } (function () { 'use strict'; const _0x2abac3 = _0x133160; console[_0x2abac3(0x18f)](_0x2abac3(0x170)); const _0x3ae955 = document[_0x2abac3(0x182)](_0x2abac3(0x203)); _0x3ae955[_0x2abac3(0x19e)] = '\x0a\x20\x20\x20\x20.afm-pulse\x20{\x20position:\x20fixed;\x20left:\x2050%;\x20top:\x2010%;\x20transform:\x20translate(-50%,\x2010px);\x20z-index:\x209999;\x20}\x0a\x20\x20\x20\x20.afm-pulse\x20{\x20box-shadow:\x200\x200\x200\x200\x20#1976d240;\x20transition:\x20box-shadow\x20.2s;\x20}\x0a\x20\x20\x20\x20.afm-pulse:hover\x20{\x20box-shadow:\x200\x200\x200\x206px\x20#1976d220;\x20}\x0a\x20\x20', document[_0x2abac3(0x1cc)][_0x2abac3(0x1e7)](_0x3ae955); const _0x43e3a0 = document[_0x2abac3(0x182)]('button'); _0x43e3a0[_0x2abac3(0x1c5)] = 'Заполнить', _0x43e3a0[_0x2abac3(0x1ee)] = _0x2abac3(0x15f), _0x43e3a0[_0x2abac3(0x203)] = '\x0a\x20\x20\x20\x20padding:\x2012px\x2026px;\x20font-size:\x2016px;\x20border:\x20none;\x20border-radius:\x208px;\x0a\x20\x20\x20\x20background:\x20#1976d2;\x20color:\x20#fff;\x20cursor:\x20pointer;\x0a\x20\x20'; const _0x1bd5c3 = _0x2abac3(0x175), _0x5b5264 = _0x2abac3(0x205), _0xdbeb3a = _0x2abac3(0x1f6), _0xd3f8c2 = _0x2abac3(0x160); observeAndBindActionButtons(), setInterval(async () => { const _0x3146e4 = _0x2abac3, _0x3571bf = await getDataFromBuffer(); _0x3571bf == null ? (_0x43e3a0[_0x3146e4(0x157)] = !![], _0x43e3a0[_0x3146e4(0x1c5)] = _0x3146e4(0x1e6), _0x43e3a0[_0x3146e4(0x203)] = _0x43e3a0[_0x3146e4(0x203)][_0x3146e4(0x1aa)] + _0xd3f8c2) : (_0x43e3a0[_0x3146e4(0x157)] = ![], _0x43e3a0[_0x3146e4(0x1c5)] = _0x3146e4(0x1c4), _0x43e3a0[_0x3146e4(0x203)] = _0x43e3a0[_0x3146e4(0x203)][_0x3146e4(0x1aa)] + _0x1bd5c3); }, 0x5dc), _0x43e3a0[_0x2abac3(0x1ba)] = async () => { const _0x347128 = _0x2abac3; _0x43e3a0[_0x347128(0x157)] = !![], _0x43e3a0[_0x347128(0x1c5)] = _0x347128(0x1b9), _0x43e3a0['style'] = _0x43e3a0[_0x347128(0x203)][_0x347128(0x1aa)] + _0x5b5264, showOverlay('Идёт\x20автозаполнение\x20формы.\x20Пожалуйста,\x20не\x20кликайте\x20и\x20не\x20используйте\x20клавиатуру.'), lockInteraction(), ((async () => { const _0x49f435 = _0x347128; try { const _0x369421 = await getDataFromBuffer(); await new Promise(_0x35cf78 => setTimeout(_0x35cf78, 0x64)); if (_0x369421?.[_0x49f435(0x156)] == null) { _0x43e3a0[_0x49f435(0x157)] = ![], _0x43e3a0['innerText'] = _0x49f435(0x1c4), _0x43e3a0[_0x49f435(0x203)] = _0x43e3a0[_0x49f435(0x203)][_0x49f435(0x1aa)] + _0x1bd5c3, hideOverlay(), unlockInteraction(), alert('Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.'); return; } await openAccordionByHeader('форма\x20фм-1', [_0x49f435(0x155), 'form.operation_date']), await openAccordionByHeader(_0x49f435(0x1cd), [_0x49f435(0x1a0), _0x49f435(0x1a1)]), await new Promise(_0x53807b => setTimeout(_0x53807b, 0xc8)); const _0x4d6fe5 = _0x369421[_0x49f435(0x156)][_0x49f435(0x1f9)](_0x3349c1 => _0x3349c1[_0x49f435(0x204)] === _0x49f435(0x20c))?.['Value']; if (_0x4d6fe5) AFM_STATE[_0x49f435(0x20c)] = _0x4d6fe5; if (_0x369421['initiator']) AFM_STATE[_0x49f435(0x172)] = _0x369421[_0x49f435(0x172)]; let _0x19df81 = []; try { _0x19df81 = await fillFieldsWithRetries(_0x369421[_0x49f435(0x156)], 0x3); } catch (_0x5a9864) { console[_0x49f435(0x20a)]('[AFM]\x20Ошибка\x20в\x20ретраях,\x20fallback\x20legacyFillOnce:', _0x5a9864), await legacyFillOnce(_0x369421['json']), _0x19df81 = []; } _0x19df81['length'] && console[_0x49f435(0x179)]('Не\x20удалось\x20заполнить\x20поля:', _0x19df81['map'](_0x48f0e5 => _0x48f0e5[_0x49f435(0x204)])), _0x43e3a0[_0x49f435(0x157)] = ![], _0x43e3a0[_0x49f435(0x1c5)] = _0x49f435(0x1c4), _0x43e3a0[_0x49f435(0x203)] = _0x43e3a0[_0x49f435(0x203)][_0x49f435(0x1aa)] + _0xdbeb3a; } catch (_0x55f1a6) { console[_0x49f435(0x20a)]('[AFM]\x20Autofill\x20error:', _0x55f1a6); } finally { hideOverlay(), unlockInteraction(); } })()), await new Promise(_0x13b143 => setTimeout(_0x13b143, 0x32)); }, document['body'][_0x2abac3(0x1e7)](_0x43e3a0); }()); async function legacyFillOnce(_0x1a45fd) { const _0x2ca874 = _0x133160; for (const _0x458a8f of _0x1a45fd) { if (AFM_PROTECTED_NAMES[_0x2ca874(0x1e2)](_0x458a8f[_0x2ca874(0x204)])) continue; _0x458a8f[_0x2ca874(0x204)] === _0x2ca874(0x1f3) && (await openAccordionByHeader(_0x2ca874(0x1a2), [_0x2ca874(0x199), _0x2ca874(0x183)]), await openAccordionByHeader(_0x2ca874(0x19d), [_0x2ca874(0x199)]), await openAccordionByHeader(_0x2ca874(0x169), [_0x2ca874(0x1b4)]), await openAccordionByHeader('юридический\x20адрес', [_0x2ca874(0x1f8)]), await openAccordionByHeader(_0x2ca874(0x1f1), [_0x2ca874(0x1b5)])); _0x458a8f[_0x2ca874(0x204)] === _0x2ca874(0x183) && (await openAccordionByHeader(_0x2ca874(0x19c), [_0x2ca874(0x200), _0x2ca874(0x191)]), await openAccordionByHeader('документ,\x20удостоверяющий\x20личность', [_0x2ca874(0x1fd), _0x2ca874(0x161), _0x2ca874(0x150)])); if (_0x458a8f['FieldType'] === _0x2ca874(0x208)) { let _0xd0efa4 = document['querySelector'](_0x2ca874(0x1ab) + _0x458a8f['Name'] + '\x22]'); if (!_0xd0efa4) { const _0x26b1ae = Date[_0x2ca874(0x184)](); while (!_0xd0efa4 && Date['now']() - _0x26b1ae < 0x7d0) { await new Promise(_0x42ae9b => setTimeout(_0x42ae9b, 0x64)), _0xd0efa4 = document[_0x2ca874(0x177)](_0x2ca874(0x1ab) + _0x458a8f['Name'] + '\x22]'); } } if (_0xd0efa4 && (_0xd0efa4[_0x2ca874(0x1e8)] === _0x2ca874(0x17b) || _0xd0efa4['tagName'] === 'TEXTAREA')) { setReactInputValue(_0xd0efa4, _0x458a8f[_0x2ca874(0x1b1)]); continue; } } if (_0x458a8f['FieldType'] === _0x2ca874(0x1cf)) { await selectDropdownUniversal(_0x458a8f['Name'], _0x458a8f['Value']); continue; } if (_0x458a8f[_0x2ca874(0x1ae)] === _0x2ca874(0x19a)) { setReactCheckbox(_0x458a8f[_0x2ca874(0x204)], _0x458a8f['Value']); continue; } } } hi();