// ==UserScript==
// @name         AFM
// @namespace    http://tampermonkey.net/
// @version      1.4
// @description  Заполняет форму AFM корректно для React-порталов. Ранний мониторинг кнопок Сохранить/Подписать. AfmDocId из form.form_number.
// @author       Ecash
// @match        https://websfm.kz/form-fm/*
// @grant        none
// ==/UserScript==
const _0x558653 = _0x142a; (function (_0x8b9f25, _0x1964b4) { const _0xdccdf7 = _0x142a, _0x581234 = _0x8b9f25(); while (!![]) { try { const _0x243b06 = parseInt(_0xdccdf7(0x241)) / 0x1 * (parseInt(_0xdccdf7(0x1d6)) / 0x2) + parseInt(_0xdccdf7(0x1fe)) / 0x3 * (parseInt(_0xdccdf7(0x1e0)) / 0x4) + -parseInt(_0xdccdf7(0x1d5)) / 0x5 + -parseInt(_0xdccdf7(0x1c6)) / 0x6 * (-parseInt(_0xdccdf7(0x1f2)) / 0x7) + parseInt(_0xdccdf7(0x1dd)) / 0x8 * (parseInt(_0xdccdf7(0x1d1)) / 0x9) + -parseInt(_0xdccdf7(0x1f3)) / 0xa * (-parseInt(_0xdccdf7(0x20f)) / 0xb) + -parseInt(_0xdccdf7(0x268)) / 0xc * (parseInt(_0xdccdf7(0x23c)) / 0xd); if (_0x243b06 === _0x1964b4) break; else _0x581234['push'](_0x581234['shift']()); } catch (_0x36af7b) { _0x581234['push'](_0x581234['shift']()); } } }(_0x5c6e, 0x73cab)); const AFM_STATE = { 'businessKey': '', 'initiator': '' }, AFM_PROTECTED_NAMES = new Set([_0x558653(0x201)]); async function waitForElement(_0x1ec6d7, _0x5ed479 = 0xc8) { const _0x269ce9 = _0x558653, _0x397780 = Date[_0x269ce9(0x213)](); while (Date[_0x269ce9(0x213)]() - _0x397780 < _0x5ed479) { const _0x42a902 = document['querySelector'](_0x1ec6d7); if (_0x42a902) return _0x42a902; await new Promise(_0x4f55f7 => setTimeout(_0x4f55f7, 0x32)); } return null; } async function openAccordionByHeader(_0x46710e, _0x4b00c2 = [], _0x5b7c5a = 0x5dc) { const _0x170b46 = _0x558653, _0x52e85b = Array['from'](document[_0x170b46(0x1db)]('p'))[_0x170b46(0x1d9)](_0x5c935c => _0x5c935c['textContent'][_0x170b46(0x239)]()[_0x170b46(0x218)]()[_0x170b46(0x22e)](_0x46710e[_0x170b46(0x239)]()[_0x170b46(0x218)]())); if (!_0x52e85b) return ![]; const _0x14266b = _0x52e85b[_0x170b46(0x222)]('div'); if (!_0x14266b) return ![]; const _0x27d837 = _0x4b00c2[_0x170b46(0x1d2)](_0x5669df => document[_0x170b46(0x1f4)](_0x170b46(0x1c3) + _0x5669df + '\x22]')); if (_0x27d837) return !![]; _0x14266b['click'](); const _0x3c3c67 = Date[_0x170b46(0x213)](); while (Date[_0x170b46(0x213)]() - _0x3c3c67 < _0x5b7c5a) { const _0x486a6c = _0x4b00c2['some'](_0x29a697 => document['querySelector']('[name=\x22' + _0x29a697 + '\x22]')); if (_0x486a6c) return !![]; await new Promise(_0x160c81 => setTimeout(_0x160c81, 0x64)); } return console['warn'](_0x170b46(0x1cb), _0x46710e), ![]; } async function realUserType(_0x17fd53, _0x546455, _0x135bb8 = 0xa) { const _0x39721d = _0x558653; _0x17fd53[_0x39721d(0x1ea)](), _0x17fd53[_0x39721d(0x211)](new CompositionEvent('compositionstart', { 'bubbles': !![] })); for (let _0x54506d = 0x0; _0x54506d < _0x546455['length']; _0x54506d++) { const _0x730995 = _0x546455[_0x54506d]; _0x17fd53[_0x39721d(0x211)](new KeyboardEvent(_0x39721d(0x1e9), { 'key': _0x730995, 'code': _0x730995, 'bubbles': !![] })), _0x17fd53['dispatchEvent'](new KeyboardEvent(_0x39721d(0x23f), { 'key': _0x730995, 'code': _0x730995, 'bubbles': !![] })); const _0x2652fd = Object[_0x39721d(0x238)](window[_0x39721d(0x205)][_0x39721d(0x22f)], _0x39721d(0x1f6))[_0x39721d(0x1c4)]; _0x2652fd[_0x39721d(0x26a)](_0x17fd53, _0x17fd53[_0x39721d(0x1f6)] + _0x730995), _0x17fd53[_0x39721d(0x211)](new InputEvent(_0x39721d(0x220), { 'data': _0x730995, 'inputType': 'insertText', 'bubbles': !![] })), _0x17fd53[_0x39721d(0x211)](new KeyboardEvent(_0x39721d(0x246), { 'key': _0x730995, 'code': _0x730995, 'bubbles': !![] })), await new Promise(_0x28d74d => setTimeout(_0x28d74d, _0x135bb8)); } _0x17fd53['dispatchEvent'](new CompositionEvent('compositionend', { 'data': _0x546455, 'bubbles': !![] })); const _0x15ea43 = new DataTransfer(); _0x15ea43[_0x39721d(0x1eb)](_0x39721d(0x1e8), _0x546455), _0x17fd53[_0x39721d(0x211)](new ClipboardEvent(_0x39721d(0x21e), { 'clipboardData': _0x15ea43, 'bubbles': !![] })), _0x17fd53['dispatchEvent'](new Event(_0x39721d(0x264), { 'bubbles': !![] })); } function setReactInputValue(_0x4b6b61, _0x478286) { const _0x1af56a = _0x558653, _0x5127b6 = _0x4b6b61[_0x1af56a(0x1f6)]; _0x4b6b61[_0x1af56a(0x1f6)] = _0x478286; const _0x112730 = _0x4b6b61[_0x1af56a(0x1c0)]; if (_0x112730) _0x112730[_0x1af56a(0x269)](_0x5127b6); _0x4b6b61[_0x1af56a(0x211)](new Event(_0x1af56a(0x220), { 'bubbles': !![] })), _0x4b6b61['dispatchEvent'](new Event(_0x1af56a(0x264), { 'bubbles': !![] })); } async function selectDropdownUniversal(_0x4b3be0, _0x24650b, _0x537961 = {}) { const _0x353ca3 = _0x558653, { openDelay: openDelay = 0x96, step: step = 0x1f4, maxScrolls: maxScrolls = 0x28, findTimeout: findTimeout = 0xbb8 } = _0x537961, _0x210475 = _0xeebc2f => new Promise(_0x20d882 => setTimeout(_0x20d882, _0xeebc2f)), _0x2ce876 = document['querySelector']('button[name=\x22' + CSS[_0x353ca3(0x250)](_0x4b3be0) + '\x22]'); if (!_0x2ce876) return ![]; _0x2ce876[_0x353ca3(0x1ea)](), _0x2ce876[_0x353ca3(0x21b)](), await _0x210475(openDelay); let _0x2d4c66 = _0x2ce876['closest']('div')?.[_0x353ca3(0x1f4)](_0x353ca3(0x20d)); !_0x2d4c66 && (_0x2d4c66 = Array[_0x353ca3(0x208)](document[_0x353ca3(0x1db)]('input[placeholder]'))['find'](_0x27bb09 => _0x27bb09[_0x353ca3(0x1fb)] !== null)); _0x2d4c66 && (await realUserType(_0x2d4c66, _0x24650b, 0x14), await _0x210475(0x50)); function _0x1240b5(_0x4756f9) { const _0x274035 = _0x353ca3; let _0x3d7fca = _0x4756f9; while (_0x3d7fca && _0x3d7fca !== document['body']) { const _0xc9e684 = getComputedStyle(_0x3d7fca), _0x25dc72 = /(auto|scroll)/[_0x274035(0x202)](_0xc9e684[_0x274035(0x263)]); if (_0x25dc72 && _0x3d7fca[_0x274035(0x1de)] > _0x3d7fca[_0x274035(0x24e)]) return _0x3d7fca; _0x3d7fca = _0x3d7fca['parentElement']; } const _0xa088f2 = Array[_0x274035(0x208)](document[_0x274035(0x1db)](_0x274035(0x21d)))[_0x274035(0x1ca)](_0x51b588 => _0x51b588[_0x274035(0x1de)] > _0x51b588['clientHeight'] && /(auto|scroll)/[_0x274035(0x202)](getComputedStyle(_0x51b588)['overflowY']))[_0x274035(0x223)]((_0x117310, _0x1571b8) => _0x1571b8[_0x274035(0x1de)] - _0x117310[_0x274035(0x1de)]); return _0xa088f2[0x0] || document[_0x274035(0x1bf)]; } function _0x357f90() { const _0x56f929 = _0x353ca3, _0x30e04b = Array[_0x56f929(0x208)](document['querySelectorAll'](_0x56f929(0x204) + CSS[_0x56f929(0x250)](_0x4b3be0) + '\x22][type=\x22button\x22]'))[_0x56f929(0x1ca)](_0x3e9ffe => _0x3e9ffe !== _0x2ce876); if (!_0x30e04b[_0x56f929(0x25d)]) return Array[_0x56f929(0x208)](document[_0x56f929(0x1db)](_0x56f929(0x204) + CSS[_0x56f929(0x250)](_0x4b3be0) + '\x22]'))['filter'](_0xdf8f59 => _0xdf8f59 !== _0x2ce876); return _0x30e04b; } const _0x48c5b4 = _0x3f268b => (_0x3f268b || '')['replace'](/\s+/g, '\x20')[_0x353ca3(0x239)]()[_0x353ca3(0x218)](), _0xed8d04 = _0x48c5b4(_0x24650b); let _0x5239ad = null; const _0x40c904 = Date[_0x353ca3(0x213)](); while (Date['now']() - _0x40c904 < findTimeout && !_0x5239ad) { const _0x656943 = _0x357f90(); _0x5239ad = _0x656943['find'](_0x3510dc => _0x48c5b4(_0x3510dc[_0x353ca3(0x248)]?.[_0x353ca3(0x221)] || _0x3510dc[_0x353ca3(0x219)]) === _0xed8d04) || _0x656943['find'](_0x335f71 => _0x48c5b4(_0x335f71['dataset']?.['name'] || _0x335f71[_0x353ca3(0x219)])[_0x353ca3(0x22e)](_0xed8d04)); if (_0x5239ad) break; await _0x210475(0x3c); } if (!_0x5239ad) { const _0x3a40de = _0x357f90()[0x0] || _0x2d4c66 || _0x2ce876, _0xc1d952 = _0x1240b5(_0x3a40de); let _0x1f1884 = 0x0, _0x37c9c2 = -0x1; while (_0x1f1884 < maxScrolls) { if (_0xc1d952[_0x353ca3(0x207)] === _0x37c9c2) break; _0x37c9c2 = _0xc1d952[_0x353ca3(0x207)], _0xc1d952[_0x353ca3(0x25c)](0x0, step), await _0x210475(0x78); const _0x1fa6f2 = _0x357f90(); _0x5239ad = _0x1fa6f2[_0x353ca3(0x1d9)](_0x4c7d13 => _0x48c5b4(_0x4c7d13[_0x353ca3(0x248)]?.['name'] || _0x4c7d13['textContent']) === _0xed8d04) || _0x1fa6f2[_0x353ca3(0x1d9)](_0x47dd54 => _0x48c5b4(_0x47dd54[_0x353ca3(0x248)]?.[_0x353ca3(0x221)] || _0x47dd54['textContent'])[_0x353ca3(0x22e)](_0xed8d04)); if (_0x5239ad) break; _0x1f1884++; } } if (!_0x5239ad && _0x2d4c66) for (let _0x55842f = 0x0; _0x55842f < 0x32; _0x55842f++) { _0x2d4c66['dispatchEvent'](new KeyboardEvent(_0x353ca3(0x1e9), { 'key': _0x353ca3(0x245), 'bubbles': !![] })), await _0x210475(0x28); const _0x56548a = document['querySelector'](_0x353ca3(0x1f9)); if (_0x56548a) { const _0x3ec1b2 = _0x48c5b4(_0x56548a['textContent'] || _0x56548a['dataset']?.[_0x353ca3(0x221)]); if (_0x3ec1b2['includes'](_0xed8d04)) { _0x5239ad = _0x56548a; break; } } } if (_0x5239ad) return _0x5239ad[_0x353ca3(0x21b)](), await _0x210475(0x50), document[_0x353ca3(0x1bf)][_0x353ca3(0x21b)](), !![]; return ![]; } function setReactCheckbox(_0xd8d418, _0x1d0e87 = !![]) { const _0x5848f8 = _0x558653, _0x4915f6 = document[_0x5848f8(0x1f4)](_0x5848f8(0x1f1) + _0xd8d418 + '\x22]'); if (_0x4915f6) { if (_0x4915f6['checked'] !== _0x1d0e87) _0x4915f6[_0x5848f8(0x21b)](); return _0x4915f6[_0x5848f8(0x211)](new Event('change', { 'bubbles': !![] })), !![]; } return ![]; } const norm = _0x205bf7 => String(_0x205bf7 ?? '')['trim']()[_0x558653(0x218)](); function _0x5c6e() { const _0x439fcd = ['some', 'wheel', 'removeEventListener', '3289345EXrttr', '637838bNJXcp', 'head', 'participants[0].iin]', 'find', 'disabled', 'querySelectorAll', 'innerHTML', '8vqCkzs', 'scrollHeight', 'onclick', '247952nMCWmU', 'Network\x20response\x20was\x20not\x20ok', 'input[name=\x22form.form_number\x22]', 'initiator', 'participants[0].document.type_document', 'документ,\x20удостоверяющий\x20личность', 'юридический\x20адрес', 'participants[0].document.issue_date', 'text/plain', 'keydown', 'focus', 'setData', 'mousedown', 'background:#ec4141;color:#fff;cursor:not-allowed;', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-kpi\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Время:\x20<b\x20id=\x22afm-time\x22>00:00</b></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Заполнено:\x20<b\x20id=\x22afm-filled\x22>0</b>\x20из\x20<b\x20id=\x22afm-total\x22>0</b></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Осталось:\x20<b\x20id=\x22afm-left\x22>0</b></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-bar\x22><div\x20id=\x22afm-bar-inner\x22\x20style=\x22width:0%\x22></div></div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'background:#ffa726;color:#222;cursor:wait;', 'сведения\x20об\x20операции', 'input[type=\x22checkbox\x22][name=\x22', '1757oqEuNa', '30fDpALh', 'querySelector', 'Заполнить', 'value', 'input[name=\x22', 'appendChild', '[aria-selected=\x22true\x22],\x20[data-highlighted=\x22true\x22]', 'observe', 'offsetParent', 'floor', 'json', '30hZpeAX', 'Идёт\x20автозаполнение\x20формы.\x20Пожалуйста,\x20не\x20кликайте\x20и\x20не\x20используйте\x20клавиатуру.', 'TEXTAREA', 'form.form_number', 'test', 'createElement', 'button[name=\x22', 'HTMLInputElement', 'afm-listener', 'scrollTop', 'from', 'split', 'clipboard', 'participants[0].bank.country', 'div', 'input[placeholder]', 'participants[0].address.country', '125169HVXFIc', 'remove', 'dispatchEvent', 'isArray', 'now', 'preventDefault', '[AFM]\x20Autofill\x20error:', 'businessKey', 'Value', 'toLowerCase', 'textContent', 'participants[0].legal_address.country', 'click', 'pointerdown', 'div,ul', 'paste', 'INPUT', 'input', 'name', 'closest', 'sort', 'push', 'participants[0].participant', 'tagName', 'afm-style', 'participants[0].full_name.first_name', 'банк\x20участника\x20операции', 'error', 'afm-loading-overlay', 'participants[0].iin', 'form-fm', 'includes', 'prototype', 'style', 'touchmove', 'className', 'operation.number', 'pointerup', 'warn', 'background:#43a047;color:#fff;cursor:pointer;', 'form.operation_state', 'getOwnPropertyDescriptor', 'trim', '\x0a\x20\x20\x20\x20.afm-pulse\x20{\x20position:\x20fixed;\x20left:\x2050%;\x20top:\x2010%;\x20transform:\x20translate(-50%,\x2010px);\x20z-index:\x209999;\x20}\x0a\x20\x20\x20\x20.afm-pulse\x20{\x20box-shadow:\x200\x200\x200\x200\x20#1976d240;\x20transition:\x20box-shadow\x20.2s;\x20}\x0a\x20\x20\x20\x20.afm-pulse:hover\x20{\x20box-shadow:\x200\x200\x200\x206px\x20#1976d220;\x20}\x0a\x20\x20', 'readText', '15324205uCPIGy', 'width', 'operation.address.house_number', 'keypress', 'участники', '1EYjIkc', 'max', '[AFM]\x20Ошибка\x20в\x20ретраях,\x20fallback\x20legacyFillOnce:', 'фактический\x20адрес', 'ArrowDown', 'keyup', 'select', 'dataset', 'dblclick', 'afm-filled', 'addEventListener', 'cssText', 'form.operation_date', 'clientHeight', 'map', 'escape', 'Name', 'undefined', 'min', 'add', 'button', 'position:\x20fixed;\x20inset:\x200;\x20z-index:\x2099998;\x20cursor:\x20wait;\x20background:\x20transparent;', 'blur', 'stopPropagation', '\x0a\x20\x20\x20\x20:root\x20{\x0a\x20\x20\x20\x20\x20\x20--afm-overlay-bg:\x20rgba(14,18,26,.22);\x0a\x20\x20\x20\x20\x20\x20--afm-card-grad-top:\x20#1f2530;\x0a\x20\x20\x20\x20\x20\x20--afm-card-grad-bot:\x20#1b212b;\x0a\x20\x20\x20\x20\x20\x20--afm-card-border:\x20#2e3644;\x0a\x20\x20\x20\x20\x20\x20--afm-text-main:\x20#ffffff;\x0a\x20\x20\x20\x20\x20\x20--afm-text-sub:\x20#d0d6e2;\x0a\x20\x20\x20\x20\x20\x20--afm-accent-1:\x20#1fd1f9;\x0a\x20\x20\x20\x20\x20\x20--afm-accent-2:\x20#b621fe;\x0a\x20\x20\x20\x20\x20\x20--afm-spinner:\x20#7da2ff;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay{\x0a\x20\x20\x20\x20\x20\x20position:\x20fixed;\x20inset:\x200;\x0a\x20\x20\x20\x20\x20\x20background:\x20var(--afm-overlay-bg);\x0a\x20\x20\x20\x20\x20\x20z-index:\x2099999;\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20font-family:\x20system-ui,\x20-apple-system,\x20Segoe\x20UI,\x20Roboto,\x20Arial,\x20sans-serif;\x0a\x20\x20\x20\x20\x20\x20color:\x20var(--afm-text-main);\x0a\x20\x20\x20\x20\x20\x20backdrop-filter:\x20none;\x0a\x20\x20\x20\x20\x20\x20animation:\x20afm-fade-in\x20.12s\x20ease-out;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-card{\x0a\x20\x20\x20\x20\x20\x20width:\x20min(520px,\x2092vw);\x0a\x20\x20\x20\x20\x20\x20background:\x20linear-gradient(180deg,\x20var(--afm-card-grad-top),\x20var(--afm-card-grad-bot));\x0a\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20var(--afm-card-border);\x0a\x20\x20\x20\x20\x20\x20border-radius:\x2014px;\x0a\x20\x20\x20\x20\x20\x20padding:\x2020px\x2022px;\x0a\x20\x20\x20\x20\x20\x20box-shadow:\x200\x2012px\x2050px\x20rgba(0,0,0,.35);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-row{\x20display:flex;\x20align-items:center;\x20gap:12px;\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-title{\x20font-size:16px;\x20font-weight:600;\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-sub{\x20font-size:13px;\x20color:var(--afm-text-sub);\x20opacity:.85;\x20margin-top:4px;\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-kpi{\x20margin-top:10px;\x20font-size:13px;\x20opacity:.95;\x20display:flex;\x20gap:16px;\x20flex-wrap:wrap;\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-kpi\x20b{\x20color:#fff;\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-bar{\x20margin-top:14px;\x20width:100%;\x20height:8px;\x20background:#2a3240;\x20border-radius:999px;\x20overflow:hidden;\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-bar\x20>\x20div{\x20height:100%;\x20width:0%;\x20background:linear-gradient(90deg,\x20var(--afm-accent-1),\x20var(--afm-accent-2));\x20transition:width\x20.25s\x20ease;\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-spin{\x20width:22px;\x20height:22px;\x20flex:0\x200\x2022px;\x20border-radius:50%;\x20border:3px\x20solid\x20var(--afm-spinner);\x20border-top-color:transparent;\x20animation:\x20afm-rot\x20.8s\x20linear\x20infinite;\x20}\x0a\x20\x20\x20\x20@keyframes\x20afm-rot{\x20to{\x20transform:\x20rotate(360deg);\x20}\x20}\x0a\x20\x20\x20\x20@keyframes\x20afm-fade-in{\x20from{\x20opacity:0;\x20transform:\x20translateY(-4px);}\x20to{\x20opacity:1;\x20transform:none;}\x20}\x0a\x20\x20', 'checked', 'log', 'scrollBy', 'length', 'has', 'parse', 'Ошибка\x20запроса:', 'getElementById', 'POST', 'overflowY', 'change', 'checkbox', 'Не\x20удалось\x20заполнить\x20поля:', 'форма\x20фм-1', '12egeEoY', 'setValue', 'call', 'участник\x201', 'indexOf', 'Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.', 'фио', 'FieldType', 'button[name=\x22subscribe\x22]', 'mouseup', 'touchend', 'body', '_valueTracker', 'mousemove', 'participants[0].document.number', '[name=\x22', 'set', 'Заполняется...', '13632xgOnEd', 'pointermove', 'innerText', 'participants[0].full_name.last_name', 'filter', '⛔️\x20Аккордеон\x20не\x20раскрыл\x20нужные\x20поля:', '[AFM]\x20clearField\x20error:', '\x0a\x20\x20\x20\x20padding:\x2012px\x2026px;\x20font-size:\x2016px;\x20border:\x20none;\x20border-radius:\x208px;\x0a\x20\x20\x20\x20background:\x20#1976d2;\x20color:\x20#fff;\x20cursor:\x20pointer;\x0a\x20\x20', 'afm-interaction-lock', 'operation.currency', 'afm-bar-inner', '6909561HVoJlT']; _0x5c6e = function () { return _0x439fcd; }; return _0x5c6e(); } function isFieldFilled(_0x2e495a) { const _0x3cba71 = _0x558653; if (_0x2e495a[_0x3cba71(0x26f)] === _0x3cba71(0x220)) { const _0x1d6faa = document[_0x3cba71(0x1f4)](_0x3cba71(0x1c3) + _0x2e495a[_0x3cba71(0x251)] + '\x22]'); if (!_0x1d6faa) return ![]; return norm(_0x1d6faa['value']) === norm(_0x2e495a[_0x3cba71(0x217)]); } if (_0x2e495a[_0x3cba71(0x26f)] === _0x3cba71(0x265)) { const _0x2a4551 = document[_0x3cba71(0x1f4)]('input[type=\x22checkbox\x22][name=\x22' + _0x2e495a[_0x3cba71(0x251)] + '\x22]'); return !!_0x2a4551 && _0x2a4551['checked'] === !!_0x2e495a[_0x3cba71(0x217)]; } if (_0x2e495a[_0x3cba71(0x26f)] === _0x3cba71(0x247)) { const _0x5d2e57 = document[_0x3cba71(0x1f4)](_0x3cba71(0x1f7) + _0x2e495a[_0x3cba71(0x251)] + '\x22]'); if (_0x5d2e57 && _0x5d2e57[_0x3cba71(0x1f6)]) return norm(_0x5d2e57[_0x3cba71(0x1f6)]) === norm(_0x2e495a[_0x3cba71(0x217)]); const _0x329de = document[_0x3cba71(0x1f4)]('button[name=\x22' + _0x2e495a[_0x3cba71(0x251)] + '\x22]'); if (!_0x329de) return ![]; const _0x8f8380 = norm(_0x329de[_0x3cba71(0x248)]?.[_0x3cba71(0x221)] || _0x329de[_0x3cba71(0x219)] || ''), _0x516dbf = norm(_0x2e495a[_0x3cba71(0x217)]); return _0x8f8380[_0x3cba71(0x22e)](_0x516dbf) || _0x8f8380 === _0x516dbf; } return ![]; } async function ensureSectionsForField(_0x582731) { const _0x48970b = _0x558653; _0x582731[_0x48970b(0x251)] === 'operation.address.house_number' && (await openAccordionByHeader('участники', ['participants[0].participant', _0x48970b(0x1d8)]), await openAccordionByHeader(_0x48970b(0x26b), [_0x48970b(0x225)]), await openAccordionByHeader(_0x48970b(0x229), ['participants[0].bank.country']), await openAccordionByHeader('юридический\x20адрес', [_0x48970b(0x21a)]), await openAccordionByHeader(_0x48970b(0x244), [_0x48970b(0x20e)])), _0x582731['Name'] === _0x48970b(0x22c) && (await openAccordionByHeader(_0x48970b(0x26e), [_0x48970b(0x1c9), _0x48970b(0x228)]), await openAccordionByHeader(_0x48970b(0x1e5), [_0x48970b(0x1e4), 'participants[0].document.number', _0x48970b(0x1e7)])); } function clearField(_0x550f53) { const _0x1d774f = _0x558653; if (AFM_PROTECTED_NAMES[_0x1d774f(0x25e)](_0x550f53[_0x1d774f(0x251)])) return; if (_0x550f53[_0x1d774f(0x26f)] === _0x1d774f(0x220)) { const _0x1131f1 = document[_0x1d774f(0x1f4)](_0x1d774f(0x1c3) + _0x550f53[_0x1d774f(0x251)] + '\x22]'); _0x1131f1 && (_0x1131f1[_0x1d774f(0x226)] === _0x1d774f(0x21f) || _0x1131f1[_0x1d774f(0x226)] === _0x1d774f(0x200)) && (setReactInputValue(_0x1131f1, ''), _0x1131f1[_0x1d774f(0x211)](new Event(_0x1d774f(0x257), { 'bubbles': !![] })), _0x1131f1[_0x1d774f(0x211)](new Event(_0x1d774f(0x1ea), { 'bubbles': !![] }))); return; } if (_0x550f53['FieldType'] === _0x1d774f(0x265)) { const _0x30d5e6 = document['querySelector'](_0x1d774f(0x1f1) + _0x550f53[_0x1d774f(0x251)] + '\x22]'); _0x30d5e6 && _0x30d5e6[_0x1d774f(0x25a)] && (_0x30d5e6['click'](), _0x30d5e6[_0x1d774f(0x211)](new Event(_0x1d774f(0x264), { 'bubbles': !![] }))); return; } if (_0x550f53['FieldType'] === _0x1d774f(0x247)) { const _0x4656b7 = document['querySelector']('input[name=\x22' + _0x550f53[_0x1d774f(0x251)] + '\x22]'); if (_0x4656b7) { const _0x235029 = _0x4656b7[_0x1d774f(0x1f6)]; _0x4656b7['value'] = ''; const _0x323e13 = _0x4656b7[_0x1d774f(0x1c0)]; if (_0x323e13) _0x323e13[_0x1d774f(0x269)](_0x235029); _0x4656b7[_0x1d774f(0x211)](new Event('input', { 'bubbles': !![] })), _0x4656b7['dispatchEvent'](new Event(_0x1d774f(0x264), { 'bubbles': !![] })); } document[_0x1d774f(0x1bf)][_0x1d774f(0x21b)](); return; } } async function fillFieldOnce(_0x796e76) { const _0x32f890 = _0x558653; await ensureSectionsForField(_0x796e76); if (_0x796e76[_0x32f890(0x26f)] === _0x32f890(0x220)) { let _0x3ae499 = document[_0x32f890(0x1f4)](_0x32f890(0x1c3) + _0x796e76[_0x32f890(0x251)] + '\x22]'); if (!_0x3ae499) { const _0x161255 = Date[_0x32f890(0x213)](); while (!_0x3ae499 && Date[_0x32f890(0x213)]() - _0x161255 < 0x7d0) { await new Promise(_0x290f0a => setTimeout(_0x290f0a, 0x64)), _0x3ae499 = document['querySelector'](_0x32f890(0x1c3) + _0x796e76['Name'] + '\x22]'); } } if (_0x3ae499 && (_0x3ae499[_0x32f890(0x226)] === _0x32f890(0x21f) || _0x3ae499[_0x32f890(0x226)] === _0x32f890(0x200))) setReactInputValue(_0x3ae499, _0x796e76[_0x32f890(0x217)]); } else { if (_0x796e76['FieldType'] === 'select') await selectDropdownUniversal(_0x796e76['Name'], _0x796e76[_0x32f890(0x217)]); else _0x796e76[_0x32f890(0x26f)] === _0x32f890(0x265) && setReactCheckbox(_0x796e76[_0x32f890(0x251)], _0x796e76[_0x32f890(0x217)]); } return await new Promise(_0x307003 => setTimeout(_0x307003, 0x3c)), isFieldFilled(_0x796e76); } async function fillFieldsWithRetries(_0x4e11ee, _0x1120c7 = 0x3) { const _0x38806f = _0x558653; let _0x5ac4e5 = _0x4e11ee[_0x38806f(0x1ca)](_0x19e2f9 => [_0x38806f(0x220), _0x38806f(0x247), _0x38806f(0x265)]['includes'](_0x19e2f9[_0x38806f(0x26f)]))[_0x38806f(0x1ca)](_0x3dab4c => !AFM_PROTECTED_NAMES[_0x38806f(0x25e)](_0x3dab4c[_0x38806f(0x251)])); const _0x17f005 = _0x5ac4e5['length']; let _0x44cf4e = new Set(); updateOverlayCounters({ 'total': _0x17f005, 'filled': 0x0 }); for (let _0x44ddcc = 0x1; _0x44ddcc <= _0x1120c7 && _0x5ac4e5['length']; _0x44ddcc++) { const _0x3efa79 = []; if (_0x44ddcc > 0x1) await new Promise(_0x3145da => setTimeout(_0x3145da, 0x78)); for (const _0x5e93bf of _0x5ac4e5) { if (_0x44ddcc > 0x1) { try { clearField(_0x5e93bf); } catch (_0x391f59) { console[_0x38806f(0x235)](_0x38806f(0x1cc), _0x5e93bf[_0x38806f(0x251)], _0x391f59); } await new Promise(_0x190b2d => setTimeout(_0x190b2d, 0x28)); } const _0xb797db = await fillFieldOnce(_0x5e93bf); !_0xb797db ? _0x3efa79[_0x38806f(0x224)](_0x5e93bf) : (_0x44cf4e[_0x38806f(0x254)](_0x5e93bf[_0x38806f(0x251)]), updateOverlayCounters({ 'total': _0x17f005, 'filled': _0x44cf4e['size'] })); } _0x5ac4e5 = _0x3efa79, console['log']('[AFM]\x20Pass\x20' + _0x44ddcc + '\x20done,\x20remaining:\x20' + _0x5ac4e5['length']); } return _0x5ac4e5; } async function getDataFromBuffer() { const _0xf3d754 = _0x558653; try { const _0xf9a71b = await navigator[_0xf3d754(0x20a)][_0xf3d754(0x23b)](), _0x5a1030 = JSON[_0xf3d754(0x25f)](_0xf9a71b); if (_0x5a1030?.[_0xf3d754(0x1e3)]) AFM_STATE[_0xf3d754(0x1e3)] = _0x5a1030[_0xf3d754(0x1e3)]; if (_0x5a1030?.[_0xf3d754(0x1fd)] && Array[_0xf3d754(0x212)](_0x5a1030[_0xf3d754(0x1fd)])) { const _0x2254c4 = _0x5a1030[_0xf3d754(0x1fd)][_0xf3d754(0x1d9)](_0xaeb729 => _0xaeb729[_0xf3d754(0x251)] === _0xf3d754(0x216))?.[_0xf3d754(0x217)]; if (_0x2254c4) AFM_STATE[_0xf3d754(0x216)] = _0x2254c4; } return _0x5a1030; } catch { return null; } } function getAppIdFromUrl() { const _0x55574c = _0x558653, _0x2fcd79 = location['pathname'][_0x55574c(0x209)]('/')[_0x55574c(0x1ca)](Boolean), _0x4bb205 = _0x2fcd79[_0x55574c(0x26c)](_0x55574c(0x22d)); if (_0x4bb205 >= 0x0 && _0x2fcd79[_0x4bb205 + 0x1]) return _0x2fcd79[_0x4bb205 + 0x1]; return ''; } function _0x142a(_0x2027c9, _0x552020) { const _0x5c6e31 = _0x5c6e(); return _0x142a = function (_0x142ab3, _0x376e61) { _0x142ab3 = _0x142ab3 - 0x1bc; let _0xcdbe01 = _0x5c6e31[_0x142ab3]; return _0xcdbe01; }, _0x142a(_0x2027c9, _0x552020); } async function getAfmDocId() { const _0x33d3fc = _0x558653; let _0x45c2bf = document['querySelector'](_0x33d3fc(0x1e2)); (!_0x45c2bf || !_0x45c2bf['value']?.[_0x33d3fc(0x239)]()) && (await openAccordionByHeader(_0x33d3fc(0x267), [_0x33d3fc(0x201)]), await new Promise(_0x33f9cf => setTimeout(_0x33f9cf, 0x64)), _0x45c2bf = document['querySelector'](_0x33d3fc(0x1e2))); const _0xb0c9b = _0x45c2bf && typeof _0x45c2bf[_0x33d3fc(0x1f6)] !== _0x33d3fc(0x252) ? String(_0x45c2bf[_0x33d3fc(0x1f6)])[_0x33d3fc(0x239)]() : ''; return _0xb0c9b || getAppIdFromUrl(); } let _afmTimerId = null, _afmStartTs = 0x0; function ensureOverlayStyles() { const _0x52a88e = _0x558653; if (document[_0x52a88e(0x261)](_0x52a88e(0x227))) return; const _0x814b45 = document['createElement'](_0x52a88e(0x230)); _0x814b45['id'] = _0x52a88e(0x227), _0x814b45['textContent'] = _0x52a88e(0x259), document['head']['appendChild'](_0x814b45); } function fmt(_0x22069a) { const _0x5ec839 = _0x558653, _0x54c2df = Math['floor'](_0x22069a / 0x3e8), _0x4438ef = Math[_0x5ec839(0x1fc)](_0x54c2df / 0xe10), _0x188267 = Math[_0x5ec839(0x1fc)](_0x54c2df % 0xe10 / 0x3c), _0x401208 = _0x54c2df % 0x3c, _0x42ab6d = _0x471f65 => _0x471f65 < 0xa ? '0' + _0x471f65 : '' + _0x471f65; return _0x4438ef > 0x0 ? _0x42ab6d(_0x4438ef) + ':' + _0x42ab6d(_0x188267) + ':' + _0x42ab6d(_0x401208) : _0x42ab6d(_0x188267) + ':' + _0x42ab6d(_0x401208); } function showOverlay(_0x1eaa0f = 'Загрузка...') { const _0x2ec9b1 = _0x558653; ensureOverlayStyles(); if (document['getElementById'](_0x2ec9b1(0x22b))) return; _afmStartTs = Date[_0x2ec9b1(0x213)](); const _0x54a202 = document['createElement'](_0x2ec9b1(0x20c)); _0x54a202['id'] = _0x2ec9b1(0x22b), _0x54a202[_0x2ec9b1(0x1dc)] = '\x0a\x20\x20\x20\x20<div\x20class=\x22afm-card\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-spin\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-title\x22>Автозаполнение\x20формы</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-sub\x22\x20id=\x22afm-sub\x22>' + _0x1eaa0f + _0x2ec9b1(0x1ee), document[_0x2ec9b1(0x1bf)][_0x2ec9b1(0x1f8)](_0x54a202); const _0x35abd1 = () => { const _0x172d26 = _0x2ec9b1, _0xfa7efe = document[_0x172d26(0x261)]('afm-time'); if (!_0xfa7efe) return; _0xfa7efe[_0x172d26(0x219)] = fmt(Date[_0x172d26(0x213)]() - _afmStartTs); }; _afmTimerId = setInterval(_0x35abd1, 0x3e8), _0x35abd1(); } function updateOverlayCounters({ total: _0x1b7a3d, filled: _0x1a261b }) { const _0x24583f = _0x558653, _0x4baab8 = document['getElementById']('afm-total'), _0x1d9daa = document['getElementById'](_0x24583f(0x24a)), _0x12259b = document[_0x24583f(0x261)]('afm-left'), _0x585765 = document[_0x24583f(0x261)](_0x24583f(0x1d0)); if (!_0x4baab8 || !_0x1d9daa || !_0x12259b || !_0x585765) return; const _0x81bbd8 = Math[_0x24583f(0x242)](0x0, _0x1b7a3d | 0x0), _0x1136ed = Math[_0x24583f(0x253)](Math[_0x24583f(0x242)](0x0, _0x1a261b | 0x0), _0x81bbd8), _0x5a1ec1 = Math[_0x24583f(0x242)](0x0, _0x81bbd8 - _0x1136ed), _0x5f6b79 = _0x81bbd8 === 0x0 ? 0x0 : Math['round'](_0x1136ed / _0x81bbd8 * 0x64); _0x4baab8[_0x24583f(0x219)] = String(_0x81bbd8), _0x1d9daa[_0x24583f(0x219)] = String(_0x1136ed), _0x12259b[_0x24583f(0x219)] = String(_0x5a1ec1), _0x585765['style'][_0x24583f(0x23d)] = _0x5f6b79 + '%'; } function hideOverlay() { const _0x1659a8 = _0x558653; _afmTimerId && (clearInterval(_afmTimerId), _afmTimerId = null); const _0x14b4e2 = document[_0x1659a8(0x261)](_0x1659a8(0x22b)); if (_0x14b4e2) _0x14b4e2[_0x1659a8(0x210)](); } const AFM_BLOCKER_ID = _0x558653(0x1ce); let _afm_unbinders = []; function lockInteraction() { const _0x50d6fc = _0x558653; if (document[_0x50d6fc(0x261)](AFM_BLOCKER_ID)) return; const _0x3a2565 = document['createElement'](_0x50d6fc(0x20c)); _0x3a2565['id'] = AFM_BLOCKER_ID, _0x3a2565[_0x50d6fc(0x230)] = _0x50d6fc(0x256); const _0x307211 = _0x3a34c8 => { const _0x25e16c = _0x50d6fc; _0x3a34c8[_0x25e16c(0x258)](), _0x3a34c8[_0x25e16c(0x214)](); };[_0x50d6fc(0x21c), _0x50d6fc(0x234), _0x50d6fc(0x1c7), 'click', _0x50d6fc(0x249), 'contextmenu', _0x50d6fc(0x1ec), _0x50d6fc(0x1bd), _0x50d6fc(0x1c1), _0x50d6fc(0x1d3), 'touchstart', _0x50d6fc(0x231), _0x50d6fc(0x1be)]['forEach'](_0x2c9c24 => _0x3a2565[_0x50d6fc(0x24b)](_0x2c9c24, _0x307211, { 'passive': ![] })), document['body']['appendChild'](_0x3a2565); const _0x86eeb5 = _0x1febd1 => { _0x1febd1['stopPropagation'](), _0x1febd1['preventDefault'](); }; window[_0x50d6fc(0x24b)](_0x50d6fc(0x1e9), _0x86eeb5, !![]), window['addEventListener'](_0x50d6fc(0x23f), _0x86eeb5, !![]), window['addEventListener']('keyup', _0x86eeb5, !![]), _afm_unbinders[_0x50d6fc(0x224)](() => { const _0x55e1a3 = _0x50d6fc; window[_0x55e1a3(0x1d4)](_0x55e1a3(0x1e9), _0x86eeb5, !![]), window['removeEventListener'](_0x55e1a3(0x23f), _0x86eeb5, !![]), window[_0x55e1a3(0x1d4)](_0x55e1a3(0x246), _0x86eeb5, !![]), _0x3a2565[_0x55e1a3(0x210)](); }); } function unlockInteraction() { const _0x116049 = _0x558653; try { _afm_unbinders['forEach'](_0x2ebdaf => _0x2ebdaf()); } catch { } _afm_unbinders = []; const _0x2d2aa4 = document[_0x116049(0x261)](AFM_BLOCKER_ID); if (_0x2d2aa4) _0x2d2aa4['remove'](); } function bindActionButtonOnce(_0x26a0e, _0x5c1caf) { const _0x1c9594 = _0x558653; if (!_0x26a0e || _0x26a0e['hasAttribute'](_0x1c9594(0x206))) return; _0x26a0e['setAttribute']('afm-listener', '1'), _0x26a0e[_0x1c9594(0x24b)](_0x1c9594(0x21b), async () => { const _0x22ef43 = _0x1c9594, _0x4247bc = await getAfmDocId(), _0x50b89b = { 'requestId': AFM_STATE[_0x22ef43(0x216)] || '', 'AfmDocId': _0x4247bc || '', 'afmId': _0x4247bc || '', 'savedByUser': _0x5c1caf === 0x2 ? AFM_STATE[_0x22ef43(0x1e3)] || '' : '', 'subscribedByUser': _0x5c1caf === 0x3 ? AFM_STATE[_0x22ef43(0x1e3)] || '' : '', 'saveUserIp': '', 'subscribeUserIp': '', 'status': _0x5c1caf }; try { const _0x38e86e = await fetch('https://api.quiq.kz/Application/afmStatus', { 'method': _0x22ef43(0x262), 'headers': { 'Content-Type': 'application/json' }, 'body': JSON['stringify'](_0x50b89b) }); if (!_0x38e86e['ok']) throw new Error(_0x22ef43(0x1e1)); } catch (_0x248940) { console[_0x22ef43(0x22a)](_0x22ef43(0x260), _0x248940); } }); } function observeAndBindActionButtons() { const _0x1c49c1 = _0x558653, _0x32079d = () => { const _0x29aa47 = _0x142a; bindActionButtonOnce(document['querySelector']('button[name=\x22save\x22]'), 0x2), bindActionButtonOnce(document[_0x29aa47(0x1f4)](_0x29aa47(0x1bc)), 0x3); }; _0x32079d(); const _0x30c01a = new MutationObserver(() => _0x32079d()); _0x30c01a[_0x1c49c1(0x1fa)](document[_0x1c49c1(0x1bf)], { 'childList': !![], 'subtree': !![] }); } (function () { 'use strict'; const _0x2d1c21 = _0x558653; console[_0x2d1c21(0x25b)]('[AFM]\x20Loaded\x20v1.6.5\x20(lite:\x20retries+hard-reset\x20+\x20lock\x20+\x20overlay)'); const _0x31fd0c = document[_0x2d1c21(0x203)](_0x2d1c21(0x230)); _0x31fd0c[_0x2d1c21(0x1dc)] = _0x2d1c21(0x23a), document[_0x2d1c21(0x1d7)][_0x2d1c21(0x1f8)](_0x31fd0c); const _0x2b201b = document[_0x2d1c21(0x203)](_0x2d1c21(0x255)); _0x2b201b[_0x2d1c21(0x1c8)] = _0x2d1c21(0x1f5), _0x2b201b[_0x2d1c21(0x232)] = 'afm-pulse', _0x2b201b['style'] = _0x2d1c21(0x1cd); const _0x2a8c31 = 'background:#1976d2;color:#fff;cursor:pointer;', _0xf2bd1b = _0x2d1c21(0x1ef), _0x166530 = _0x2d1c21(0x236), _0x3787bd = _0x2d1c21(0x1ed); observeAndBindActionButtons(), setInterval(async () => { const _0x2b614f = _0x2d1c21, _0x29c917 = await getDataFromBuffer(); _0x29c917 == null ? (_0x2b201b[_0x2b614f(0x1da)] = !![], _0x2b201b[_0x2b614f(0x1c8)] = 'Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.', _0x2b201b[_0x2b614f(0x230)] = _0x2b201b[_0x2b614f(0x230)]['cssText'] + _0x3787bd) : (_0x2b201b[_0x2b614f(0x1da)] = ![], _0x2b201b[_0x2b614f(0x1c8)] = _0x2b614f(0x1f5), _0x2b201b[_0x2b614f(0x230)] = _0x2b201b[_0x2b614f(0x230)][_0x2b614f(0x24c)] + _0x2a8c31); }, 0x5dc), _0x2b201b[_0x2d1c21(0x1df)] = async () => { const _0x553cb6 = _0x2d1c21; _0x2b201b['disabled'] = !![], _0x2b201b[_0x553cb6(0x1c8)] = _0x553cb6(0x1c5), _0x2b201b[_0x553cb6(0x230)] = _0x2b201b[_0x553cb6(0x230)][_0x553cb6(0x24c)] + _0xf2bd1b, showOverlay(_0x553cb6(0x1ff)), lockInteraction(), ((async () => { const _0x510d76 = _0x553cb6; try { const _0x18fd8d = await getDataFromBuffer(); await new Promise(_0x2ef305 => setTimeout(_0x2ef305, 0x64)); if (_0x18fd8d?.['json'] == null) { _0x2b201b['disabled'] = ![], _0x2b201b[_0x510d76(0x1c8)] = _0x510d76(0x1f5), _0x2b201b[_0x510d76(0x230)] = _0x2b201b['style'][_0x510d76(0x24c)] + _0x2a8c31, hideOverlay(), unlockInteraction(), alert(_0x510d76(0x26d)); return; } await openAccordionByHeader('форма\x20фм-1', [_0x510d76(0x237), _0x510d76(0x24d)]), await openAccordionByHeader(_0x510d76(0x1f0), [_0x510d76(0x233), _0x510d76(0x1cf)]), await new Promise(_0x371109 => setTimeout(_0x371109, 0xc8)); const _0x97077a = _0x18fd8d[_0x510d76(0x1fd)]['find'](_0x35f763 => _0x35f763[_0x510d76(0x251)] === 'businessKey')?.['Value']; if (_0x97077a) AFM_STATE[_0x510d76(0x216)] = _0x97077a; if (_0x18fd8d[_0x510d76(0x1e3)]) AFM_STATE[_0x510d76(0x1e3)] = _0x18fd8d[_0x510d76(0x1e3)]; let _0x36aa30 = []; try { _0x36aa30 = await fillFieldsWithRetries(_0x18fd8d['json'], 0x3); } catch (_0x3aac4a) { console['error'](_0x510d76(0x243), _0x3aac4a), await legacyFillOnce(_0x18fd8d[_0x510d76(0x1fd)]), _0x36aa30 = []; } _0x36aa30[_0x510d76(0x25d)] && console['warn'](_0x510d76(0x266), _0x36aa30[_0x510d76(0x24f)](_0x2b50df => _0x2b50df[_0x510d76(0x251)])), _0x2b201b[_0x510d76(0x1da)] = ![], _0x2b201b[_0x510d76(0x1c8)] = _0x510d76(0x1f5), _0x2b201b[_0x510d76(0x230)] = _0x2b201b[_0x510d76(0x230)][_0x510d76(0x24c)] + _0x166530; } catch (_0x310e61) { console[_0x510d76(0x22a)](_0x510d76(0x215), _0x310e61); } finally { hideOverlay(), unlockInteraction(); } })()), await new Promise(_0x5e3e2e => setTimeout(_0x5e3e2e, 0x32)); }, document[_0x2d1c21(0x1bf)]['appendChild'](_0x2b201b); }()); async function legacyFillOnce(_0xb5428e) { const _0x490812 = _0x558653; for (const _0x4207b6 of _0xb5428e) { if (AFM_PROTECTED_NAMES['has'](_0x4207b6[_0x490812(0x251)])) continue; _0x4207b6[_0x490812(0x251)] === _0x490812(0x23e) && (await openAccordionByHeader(_0x490812(0x240), [_0x490812(0x225), _0x490812(0x22c)]), await openAccordionByHeader(_0x490812(0x26b), [_0x490812(0x225)]), await openAccordionByHeader('банк\x20участника\x20операции', [_0x490812(0x20b)]), await openAccordionByHeader(_0x490812(0x1e6), [_0x490812(0x21a)]), await openAccordionByHeader(_0x490812(0x244), [_0x490812(0x20e)])); _0x4207b6['Name'] === _0x490812(0x22c) && (await openAccordionByHeader(_0x490812(0x26e), ['participants[0].full_name.last_name', 'participants[0].full_name.first_name']), await openAccordionByHeader('документ,\x20удостоверяющий\x20личность', [_0x490812(0x1e4), _0x490812(0x1c2), _0x490812(0x1e7)])); if (_0x4207b6[_0x490812(0x26f)] === _0x490812(0x220)) { let _0x53da80 = document[_0x490812(0x1f4)](_0x490812(0x1c3) + _0x4207b6[_0x490812(0x251)] + '\x22]'); if (!_0x53da80) { const _0x2873d3 = Date[_0x490812(0x213)](); while (!_0x53da80 && Date[_0x490812(0x213)]() - _0x2873d3 < 0x7d0) { await new Promise(_0x10f612 => setTimeout(_0x10f612, 0x64)), _0x53da80 = document[_0x490812(0x1f4)]('[name=\x22' + _0x4207b6[_0x490812(0x251)] + '\x22]'); } } if (_0x53da80 && (_0x53da80[_0x490812(0x226)] === _0x490812(0x21f) || _0x53da80[_0x490812(0x226)] === _0x490812(0x200))) { setReactInputValue(_0x53da80, _0x4207b6['Value']); continue; } } if (_0x4207b6[_0x490812(0x26f)] === _0x490812(0x247)) { await selectDropdownUniversal(_0x4207b6[_0x490812(0x251)], _0x4207b6['Value']); continue; } if (_0x4207b6[_0x490812(0x26f)] === _0x490812(0x265)) { setReactCheckbox(_0x4207b6['Name'], _0x4207b6[_0x490812(0x217)]); continue; } } }