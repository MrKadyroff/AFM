// ==UserScript==
// @name         AFM
// @namespace    http://tampermonkey.net/
// @version      1.2
// @description  Заполняет форму AFM корректно для React-порталов, стабильно!
// @author       Ecash
// @match        https://websfm.kz/form-fm/*
// @grant        none
// ==/UserScript==

const _0x229bb6 = _0x3ffb; (function (_0x2062c7, _0x4d51bf) { const _0x4e9b36 = _0x3ffb, _0x2ff7a3 = _0x2062c7(); while (!![]) { try { const _0x1cf978 = parseInt(_0x4e9b36(0x155)) / 0x1 + parseInt(_0x4e9b36(0x11c)) / 0x2 + parseInt(_0x4e9b36(0x127)) / 0x3 * (-parseInt(_0x4e9b36(0x14f)) / 0x4) + parseInt(_0x4e9b36(0x138)) / 0x5 + -parseInt(_0x4e9b36(0x16c)) / 0x6 + parseInt(_0x4e9b36(0x10f)) / 0x7 + -parseInt(_0x4e9b36(0x13e)) / 0x8; if (_0x1cf978 === _0x4d51bf) break; else _0x2ff7a3['push'](_0x2ff7a3['shift']()); } catch (_0x2583bd) { _0x2ff7a3['push'](_0x2ff7a3['shift']()); } } }(_0x13e2, 0xc25ca)); async function waitForElement(_0x2e3015, _0x417957 = 0xc8) { const _0x4b46ec = _0x3ffb, _0x4adcd2 = Date[_0x4b46ec(0x122)](); while (Date['now']() - _0x4adcd2 < _0x417957) { let _0x4a0a11 = document['querySelector'](_0x2e3015); if (_0x4a0a11) return _0x4a0a11; await new Promise(_0x433a16 => setTimeout(_0x433a16, 0x32)); } return null; } async function openAccordionByHeader(_0x19d474, _0x5ba8ff = [], _0xc59f3d = 0x5dc) { const _0x431c91 = _0x3ffb, _0x18e531 = Array[_0x431c91(0x184)](document[_0x431c91(0x158)]('p'))[_0x431c91(0x12a)](_0x5cb06e => _0x5cb06e[_0x431c91(0x17f)][_0x431c91(0x137)]()[_0x431c91(0x141)]()[_0x431c91(0x12f)](_0x19d474[_0x431c91(0x137)]()['toLowerCase']())); if (!_0x18e531) return ![]; const _0x18a00a = _0x18e531[_0x431c91(0x159)](_0x431c91(0x175)); if (!_0x18a00a) return ![]; const _0x18301f = _0x5ba8ff[_0x431c91(0x114)](_0x52f241 => document[_0x431c91(0x147)](_0x431c91(0x117) + _0x52f241 + '\x22]')); if (_0x18301f) return !![]; _0x18a00a[_0x431c91(0x166)](); const _0x3ec623 = Date['now'](); while (Date['now']() - _0x3ec623 < _0xc59f3d) { const _0x3c6e32 = _0x5ba8ff[_0x431c91(0x114)](_0x1aeaa4 => document['querySelector'](_0x431c91(0x117) + _0x1aeaa4 + '\x22]')); if (_0x3c6e32) return !![]; await new Promise(_0x10a180 => setTimeout(_0x10a180, 0x64)); } return console['warn'](_0x431c91(0x15b), _0x19d474), ![]; } async function realUserType(_0x194c0e, _0x5b615a, _0x1dbe3b = 0xa) { const _0x3efa36 = _0x3ffb; _0x194c0e[_0x3efa36(0x183)](), _0x194c0e['dispatchEvent'](new CompositionEvent(_0x3efa36(0x10c), { 'bubbles': !![] })); for (let _0x70d059 = 0x0; _0x70d059 < _0x5b615a[_0x3efa36(0x182)]; _0x70d059++) { let _0x268072 = _0x5b615a[_0x70d059]; _0x194c0e[_0x3efa36(0x13f)](new KeyboardEvent(_0x3efa36(0x15f), { 'key': _0x268072, 'code': _0x268072, 'bubbles': !![] })), _0x194c0e[_0x3efa36(0x13f)](new KeyboardEvent(_0x3efa36(0x12b), { 'key': _0x268072, 'code': _0x268072, 'bubbles': !![] })); let _0x1ab4e5 = Object['getOwnPropertyDescriptor'](window[_0x3efa36(0x16b)][_0x3efa36(0x12d)], _0x3efa36(0x162))[_0x3efa36(0x18c)]; _0x1ab4e5[_0x3efa36(0x18b)](_0x194c0e, _0x194c0e[_0x3efa36(0x162)] + _0x268072), _0x194c0e[_0x3efa36(0x13f)](new InputEvent(_0x3efa36(0x17a), { 'data': _0x268072, 'inputType': _0x3efa36(0x153), 'bubbles': !![] })), _0x194c0e[_0x3efa36(0x13f)](new KeyboardEvent(_0x3efa36(0x13a), { 'key': _0x268072, 'code': _0x268072, 'bubbles': !![] })), await new Promise(_0xa4a6e0 => setTimeout(_0xa4a6e0, _0x1dbe3b)); } _0x194c0e[_0x3efa36(0x13f)](new CompositionEvent('compositionend', { 'data': _0x5b615a, 'bubbles': !![] })); let _0x1efff4 = new DataTransfer(); _0x1efff4[_0x3efa36(0x186)](_0x3efa36(0x176), _0x5b615a), _0x194c0e['dispatchEvent'](new ClipboardEvent(_0x3efa36(0x126), { 'clipboardData': _0x1efff4, 'bubbles': !![] })), _0x194c0e['dispatchEvent'](new Event(_0x3efa36(0x142), { 'bubbles': !![] })); } function setReactInputValue(_0x218d91, _0x47cbd3) { const _0x25ec1d = _0x3ffb, _0x596f75 = _0x218d91[_0x25ec1d(0x162)]; _0x218d91['value'] = _0x47cbd3; let _0x15ca10 = _0x218d91[_0x25ec1d(0x163)]; if (_0x15ca10) _0x15ca10[_0x25ec1d(0x173)](_0x596f75); _0x218d91['dispatchEvent'](new Event(_0x25ec1d(0x17a), { 'bubbles': !![] })), _0x218d91[_0x25ec1d(0x13f)](new Event(_0x25ec1d(0x142), { 'bubbles': !![] })); } async function typeTextSlowly(_0x4e7384, _0x5dde42, _0x1a1872 = 0xa) { const _0x586284 = _0x3ffb; _0x4e7384[_0x586284(0x183)](), _0x4e7384['value'] = '', _0x4e7384['dispatchEvent'](new Event(_0x586284(0x17a), { 'bubbles': !![] })); for (let _0x111c6c of _0x5dde42) { _0x4e7384[_0x586284(0x162)] += _0x111c6c, _0x4e7384[_0x586284(0x13f)](new Event(_0x586284(0x17a), { 'bubbles': !![] })), await new Promise(_0x27f72f => setTimeout(_0x27f72f, _0x1a1872)); } } async function selectDropdownUniversal(_0x352439, _0x46ce36) { const _0x13b1a0 = _0x3ffb; let _0x24d215 = document[_0x13b1a0(0x147)](_0x13b1a0(0x150) + _0x352439 + '\x22]'); if (!_0x24d215) return ![]; _0x24d215[_0x13b1a0(0x183)](), _0x24d215[_0x13b1a0(0x166)](), await new Promise(_0xf6a7f9 => setTimeout(_0xf6a7f9, 0x32)); let _0x126c24 = null, _0x3b8d5d = _0x24d215['closest'](_0x13b1a0(0x175)); _0x3b8d5d && (_0x126c24 = _0x3b8d5d[_0x13b1a0(0x147)]('input[placeholder]')); !_0x126c24 && (_0x126c24 = Array['from'](document['querySelectorAll'](_0x13b1a0(0x121)))[_0x13b1a0(0x12a)](_0x558be0 => _0x558be0[_0x13b1a0(0x115)] !== null)); _0x126c24 && (await realUserType(_0x126c24, _0x46ce36, 0x14), await new Promise(_0x56bc1f => setTimeout(_0x56bc1f, 0x14))); let _0x528bf6 = null; const _0x539663 = Date[_0x13b1a0(0x122)](); while (Date[_0x13b1a0(0x122)]() - _0x539663 < 0x3e8) { let _0xad9c4 = Array[_0x13b1a0(0x184)](document[_0x13b1a0(0x158)]('button[name=\x22' + _0x352439 + '\x22][type=\x22button\x22]')); _0x528bf6 = _0xad9c4[_0x13b1a0(0x12a)](_0x1b31c4 => { const _0x18ca4f = _0x13b1a0, _0x17eecf = (_0x1b31c4[_0x18ca4f(0x157)]?.[_0x18ca4f(0x152)] || _0x1b31c4['textContent'] || '')[_0x18ca4f(0x137)]()[_0x18ca4f(0x141)](); return _0x17eecf === _0x46ce36[_0x18ca4f(0x137)]()['toLowerCase'](); }); !_0x528bf6 && (_0x528bf6 = _0xad9c4[_0x13b1a0(0x12a)](_0x2bf2bb => { const _0x4f4372 = _0x13b1a0, _0xb186be = (_0x2bf2bb[_0x4f4372(0x157)]?.[_0x4f4372(0x152)] || _0x2bf2bb[_0x4f4372(0x17f)] || '')[_0x4f4372(0x137)]()['toLowerCase'](); return _0xb186be['includes'](_0x46ce36[_0x4f4372(0x137)]()[_0x4f4372(0x141)]()); })); if (_0x528bf6) break; await new Promise(_0x248edc => setTimeout(_0x248edc, 0x32)); } if (_0x528bf6) return _0x528bf6[_0x13b1a0(0x166)](), await new Promise(_0xfdf9b9 => setTimeout(_0xfdf9b9, 0x32)), document[_0x13b1a0(0x16a)][_0x13b1a0(0x166)](), !![]; return ![]; } function _0x13e2() { const _0x4a3f7e = ['participants[0].iin', '9075332vzpOoF', 'button[name=\x22save\x22]', 'readText', 'форма\x20фм-1', 'Заполнить', 'some', 'offsetParent', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20.afm-pulse\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20afm-pulse-btn\x201.3s\x20infinite;\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2010%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x2010px);\x20/*\x20по\x20центру\x20и\x20на\x2010px\x20ниже\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20@keyframes\x20afm-pulse-btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x20box-shadow:\x200\x200\x200\x200\x20#1976d280;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2070%\x20{\x20box-shadow:\x200\x200\x200\x2012px\x20#1976d200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x20box-shadow:\x200\x200\x200\x200\x20#1976d200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '[name=\x22', 'background:#1976d2;color:#fff;cursor:pointer;', 'Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.', 'stringify', 'participants[0].bank.country', '2301864mFoxWi', 'getElementById', 'parse', 'application/json', 'issue', 'input[placeholder]', 'now', 'background:#43a047;color:#fff;cursor:pointer;', 'afm-check-modal-ok', 'operation.number', 'paste', '3tbnyiX', 'hasAttribute', 'afm-check-modal-backdrop', 'find', 'keypress', 'Проверьте\x20корректность\x20данных\x20с\x20заявки', 'prototype', 'afm-pulse', 'includes', 'operation.currency', 'Network\x20response\x20was\x20not\x20ok', 'Name', 'документ,\x20удостоверяющий\x20личность', 'participants[0].address.country', 'participants[0].document.issue_date', 'className', 'trim', '7009570RcCpYq', 'afm-listener', 'keyup', 'tagName', '</span>\x0a\x20\x20\x20\x20</div>\x0a', 'participants[0].participant', '20199680tVUiqq', 'dispatchEvent', 'select', 'toLowerCase', 'change', 'date', 'head', 'банк\x20участника\x20операции', 'participants[0].document.number', 'querySelector', 'addEventListener', 'cssText', 'participants[0].full_name.last_name', 'Ошибка\x20запроса:', 'json', 'FieldType', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22afm-check-modal-ok\x22>OK</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '1151812GrucRs', 'button[name=\x22', 'function', 'name', 'insertText', 'Value', '1001709MnDzXG', 'TEXTAREA', 'dataset', 'querySelectorAll', 'closest', 'style', '⛔️\x20Аккордеон\x20не\x20раскрыл\x20нужные\x20поля:', 'фио', 'https://api.quiq.kz/Application/afmStatus/', 'button[name=\x22subscribe\x22]', 'keydown', 'createElement', '\x0a\x20\x20\x20\x20<div\x20style=\x22padding:\x2032px\x2048px;\x20background:\x20#282c34;\x20border-radius:\x2016px;\x20box-shadow:\x200\x208px\x2040px\x20#0007;\x22>\x0a\x20\x20\x20<span\x20style=\x22display:inline-block;\x20margin-right:18px;\x20vertical-align:middle;\x22>\x0a\x20\x20<svg\x20width=\x2240\x22\x20height=\x2240\x22\x20viewBox=\x220\x200\x2050\x2050\x22\x20style=\x22vertical-align:middle;\x22>\x0a\x20\x20\x20\x20<circle\x0a\x20\x20\x20\x20\x20\x20cx=\x2225\x22\x0a\x20\x20\x20\x20\x20\x20cy=\x2225\x22\x0a\x20\x20\x20\x20\x20\x20r=\x2220\x22\x0a\x20\x20\x20\x20\x20\x20fill=\x22none\x22\x0a\x20\x20\x20\x20\x20\x20stroke=\x22#53e3a6\x22\x0a\x20\x20\x20\x20\x20\x20stroke-width=\x225\x22\x0a\x20\x20\x20\x20\x20\x20stroke-linecap=\x22round\x22\x0a\x20\x20\x20\x20\x20\x20stroke-dasharray=\x2290\x2060\x22\x0a\x20\x20\x20\x20\x20\x20stroke-dashoffset=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20<animateTransform\x0a\x20\x20\x20\x20\x20\x20\x20\x20attributeName=\x22transform\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20type=\x22rotate\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20from=\x220\x2025\x2025\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20to=\x22360\x2025\x2025\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20dur=\x221.2s\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20repeatCount=\x22indefinite\x22/>\x0a\x20\x20\x20\x20</circle>\x0a\x20\x20</svg>\x0a</span>\x0a</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'value', '_valueTracker', 'Загрузка...', 'businessKey', 'click', 'участник\x201', 'error', 'INPUT', 'body', 'HTMLInputElement', '7452072wAaECE', 'GET', 'юридический\x20адрес', 'checkbox', 'setAttribute', 'disabled', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22afm-check-modal\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'setValue', 'clipboard', 'div', 'text/plain', 'appendChild', 'Заполняется...', 'фактический\x20адрес', 'input', 'onclick', 'checked', 'warn', '/2/', 'textContent', 'POST', 'Не\x20удалось\x20получить\x20номер\x20формы\x20(form.form_number)', 'length', 'focus', 'from', 'innerText', 'setData', 'input[name=\x22form.form_number\x22]', 'participants[0].document.type_document', 'input[type=\x22checkbox\x22][name=\x22', 'remove', 'call', 'set', 'afm-loading-overlay', 'participants[0].full_name.first_name', '/3/', 'afm-check-modal', 'compositionstart', 'innerHTML']; _0x13e2 = function () { return _0x4a3f7e; }; return _0x13e2(); } function setReactCheckbox(_0x59485c, _0x53a6d0 = !![]) { const _0x4e2893 = _0x3ffb, _0x53bca5 = document[_0x4e2893(0x147)](_0x4e2893(0x189) + _0x59485c + '\x22]'); if (_0x53bca5) { if (_0x53bca5[_0x4e2893(0x17c)] !== _0x53a6d0) _0x53bca5['click'](); return _0x53bca5[_0x4e2893(0x13f)](new Event('change', { 'bubbles': !![] })), !![]; } return ![]; } async function getDataFromBuffer() { const _0x346d0b = _0x3ffb; try { const _0x26e530 = await navigator[_0x346d0b(0x174)][_0x346d0b(0x111)](), _0xa432dc = JSON[_0x346d0b(0x11e)](_0x26e530); return _0xa432dc; } catch (_0x3f39df) { return null; } } function _0x3ffb(_0x5ea005, _0x472a37) { const _0x13e296 = _0x13e2(); return _0x3ffb = function (_0x3ffbd0, _0xfcd20b) { _0x3ffbd0 = _0x3ffbd0 - 0x10a; let _0x736e99 = _0x13e296[_0x3ffbd0]; return _0x736e99; }, _0x3ffb(_0x5ea005, _0x472a37); } function showOverlay(_0x542b26 = _0x229bb6(0x164)) { const _0x149601 = _0x229bb6; if (document[_0x149601(0x11d)](_0x149601(0x18d))) return; let _0x20ff83 = document[_0x149601(0x160)](_0x149601(0x175)); _0x20ff83['id'] = _0x149601(0x18d), _0x20ff83[_0x149601(0x15a)] = '\x0a\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20top:\x200;\x20left:\x200;\x20right:\x200;\x20bottom:\x200;\x0a\x20\x20\x20\x20background:\x20rgba(0,0,0,0.35);\x0a\x20\x20\x20\x20z-index:\x2099999;\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20font-size:\x201rem;\x0a\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20font-family:\x20inherit;\x0a\x20\x20\x20\x20transition:\x20opacity\x200.2s;\x0a\x20\x20\x20\x20pointer-events:\x20all;\x20/*\x20<---\x20блокирует\x20все\x20клики\x20*/', _0x20ff83[_0x149601(0x10d)] = _0x149601(0x161) + _0x542b26 + _0x149601(0x13c), document[_0x149601(0x16a)][_0x149601(0x177)](_0x20ff83); } function hideOverlay() { const _0x26f6f4 = _0x229bb6; let _0x885b5c = document[_0x26f6f4(0x11d)]('afm-loading-overlay'); if (_0x885b5c) _0x885b5c[_0x26f6f4(0x18a)](); } function showModal(_0x3421f7, _0x5a6183) { const _0x4f8328 = _0x229bb6; if (document[_0x4f8328(0x11d)](_0x4f8328(0x10b))) return; const _0x9fae3e = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal-backdrop\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x20top:0;\x20left:0;\x20right:0;\x20bottom:0;\x20background:\x20rgba(0,0,0,0.3);\x20z-index:\x2099999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:flex;\x20align-items:center;\x20justify-content:center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#fff;\x20border-radius:\x2012px;\x20padding:\x2032px\x2036px;\x20font-size:\x201.2rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x208px\x2040px\x20#0005;\x20min-width:260px;\x20text-align:center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal\x20button\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2022px;\x20background:#1976d2;\x20color:#fff;\x20border:none;\x20border-radius:6px;\x20padding:10px\x2034px;\x20font-size:1rem;\x20cursor:pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background\x20.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal\x20button:hover\x20{\x20background:#0e57a1;}\x0a\x20\x20\x20\x20', _0x5b0504 = document[_0x4f8328(0x160)](_0x4f8328(0x15a)); _0x5b0504[_0x4f8328(0x10d)] = _0x9fae3e, document['head']['appendChild'](_0x5b0504); const _0x3ec57f = document[_0x4f8328(0x160)](_0x4f8328(0x175)); _0x3ec57f['id'] = _0x4f8328(0x129), _0x3ec57f[_0x4f8328(0x10d)] = _0x4f8328(0x172) + _0x3421f7 + _0x4f8328(0x14e), document['body'][_0x4f8328(0x177)](_0x3ec57f), document[_0x4f8328(0x11d)](_0x4f8328(0x124))[_0x4f8328(0x17b)] = function () { const _0x58db6a = _0x4f8328; _0x3ec57f[_0x58db6a(0x18a)](), _0x5b0504[_0x58db6a(0x18a)](); if (typeof _0x5a6183 === _0x58db6a(0x151)) _0x5a6183(); }; } function waitForSubscribeButton(_0x20c976, _0x4641b2) { const _0x561e07 = _0x229bb6, _0x573f9e = document['querySelector']('button[name=\x22subscribe\x22]'); _0x573f9e ? !_0x573f9e[_0x561e07(0x128)](_0x561e07(0x139)) && (_0x573f9e[_0x561e07(0x170)](_0x561e07(0x139), '1'), _0x573f9e[_0x561e07(0x148)](_0x561e07(0x166), async function () { const _0x1cc2ed = _0x561e07; try { const _0x3cea7c = document[_0x1cc2ed(0x147)]('input[name=\x22form.form_number\x22]'), _0x10862f = _0x3cea7c ? _0x3cea7c[_0x1cc2ed(0x162)] : null; !_0x10862f && console[_0x1cc2ed(0x17d)](_0x1cc2ed(0x181)); const _0x4e8d06 = await fetch('https://api.quiq.kz/Application/afmStatus', { 'method': _0x1cc2ed(0x180), 'headers': { 'Content-Type': _0x1cc2ed(0x11f) }, 'body': JSON[_0x1cc2ed(0x11a)]({ 'requestId': _0x20c976, 'afmId': _0x10862f, 'savedByUser': '', 'subscribedByUser': _0x4641b2, 'saveUserIp': '', 'subscribeUserIp': '', 'status': 0x3 }) }); if (!_0x4e8d06['ok']) throw new Error(_0x1cc2ed(0x131)); const _0x1412a9 = await _0x4e8d06[_0x1cc2ed(0x14c)](); } catch (_0x42b1e) { console[_0x1cc2ed(0x168)](_0x1cc2ed(0x14b), _0x42b1e); } })) : (setTimeout(waitForSaveButton, 0x1f4), setTimeout(waitForSubscribeButton, 0x1f4)); } function waitForSaveButton(_0x44f0a2) { const _0x4930d8 = _0x229bb6, _0x45f34b = document[_0x4930d8(0x147)](_0x4930d8(0x110)); _0x45f34b ? !_0x45f34b[_0x4930d8(0x128)](_0x4930d8(0x139)) && (_0x45f34b[_0x4930d8(0x170)](_0x4930d8(0x139), '1'), _0x45f34b['addEventListener'](_0x4930d8(0x166), async function () { const _0x26fcfb = _0x4930d8; try { const _0x3e6088 = document['querySelector'](_0x26fcfb(0x187)), _0x1b4453 = _0x3e6088 ? _0x3e6088['value'] : null; !_0x1b4453 && console['warn']('Не\x20удалось\x20получить\x20номер\x20формы\x20(form.form_number)'); const _0x5132f3 = await fetch(_0x26fcfb(0x15d) + _0x44f0a2 + _0x26fcfb(0x17e) + _0x1b4453, { 'method': _0x26fcfb(0x16d) }); if (!_0x5132f3['ok']) throw new Error(_0x26fcfb(0x131)); const _0x5022b9 = await _0x5132f3['json'](); } catch (_0x16063f) { console[_0x26fcfb(0x168)](_0x26fcfb(0x14b), _0x16063f); } })) : setTimeout(waitForSaveButton, 0x1f4); } function waitForSubscribeButton(_0x109ba5) { const _0x2e96fc = _0x229bb6, _0x33315a = document[_0x2e96fc(0x147)](_0x2e96fc(0x15e)); _0x33315a ? !_0x33315a[_0x2e96fc(0x128)](_0x2e96fc(0x139)) && (_0x33315a[_0x2e96fc(0x170)](_0x2e96fc(0x139), '1'), _0x33315a[_0x2e96fc(0x148)](_0x2e96fc(0x166), async function () { const _0x2e0220 = _0x2e96fc; try { const _0x4c3b32 = document[_0x2e0220(0x147)]('input[name=\x22form.form_number\x22]'), _0x38ad98 = _0x4c3b32 ? _0x4c3b32['value'] : null; !_0x38ad98 && console['warn']('Не\x20удалось\x20получить\x20номер\x20формы\x20(form.form_number)'); const _0x54bc38 = await fetch(_0x2e0220(0x15d) + _0x109ba5 + _0x2e0220(0x10a) + _0x38ad98, { 'method': _0x2e0220(0x16d) }); if (!_0x54bc38['ok']) throw new Error(_0x2e0220(0x131)); const _0x5c5f89 = await _0x54bc38[_0x2e0220(0x14c)](); } catch (_0x7ad386) { console['error'](_0x2e0220(0x14b), _0x7ad386); } })) : (setTimeout(waitForSaveButton, 0x1f4), setTimeout(waitForSubscribeButton, 0x1f4)); } (function () { 'use strict'; const _0x27e0a4 = _0x229bb6; const _0x42ec76 = document['createElement']('style'); _0x42ec76[_0x27e0a4(0x10d)] = _0x27e0a4(0x116), document[_0x27e0a4(0x144)]['appendChild'](_0x42ec76); let _0x26fa0c = document['createElement']('button'); _0x26fa0c[_0x27e0a4(0x185)] = _0x27e0a4(0x113), _0x26fa0c[_0x27e0a4(0x136)] = _0x27e0a4(0x12e), _0x26fa0c[_0x27e0a4(0x15a)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2014px\x2032px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2018px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1976d2;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background\x200.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; const _0x371ecd = _0x27e0a4(0x118), _0x562cc8 = 'background:#ffa726;color:#222;cursor:wait;', _0x4a0afc = _0x27e0a4(0x123), _0x204cad = 'background:#ec4141;color:#fff;cursor:pointer;'; setInterval(async () => { const _0x4220e7 = _0x27e0a4, _0x1b0543 = await getDataFromBuffer(); _0x1b0543 == null ? (_0x26fa0c[_0x4220e7(0x171)] = !![], _0x26fa0c[_0x4220e7(0x185)] = _0x4220e7(0x119), _0x26fa0c[_0x4220e7(0x15a)] = _0x26fa0c[_0x4220e7(0x15a)][_0x4220e7(0x149)] + _0x204cad) : (_0x26fa0c[_0x4220e7(0x171)] = ![], _0x26fa0c[_0x4220e7(0x185)] = 'Заполнить', _0x26fa0c[_0x4220e7(0x15a)] = _0x26fa0c[_0x4220e7(0x15a)][_0x4220e7(0x149)] + _0x371ecd); }, 0x5dc), _0x26fa0c[_0x27e0a4(0x17b)] = async () => { const _0x558fec = _0x27e0a4; _0x26fa0c[_0x558fec(0x171)] = !![], _0x26fa0c[_0x558fec(0x185)] = _0x558fec(0x178), _0x26fa0c[_0x558fec(0x15a)] = _0x26fa0c[_0x558fec(0x15a)]['cssText'] + _0x562cc8, showOverlay('Идёт\x20автозаполнение\x20формы.\x20Пожалуйста,\x20не\x20кликайте,\x20не\x20используйте\x20клавиатуру\x20и\x20не\x20переходите\x20в\x20другие\x20окна\x20или\x20вкладки\x20до\x20завершения.'), ((async () => { const _0x48e53e = _0x558fec, _0x551737 = await getDataFromBuffer(); await new Promise(_0xf963fc => setTimeout(_0xf963fc, 0x64)); var _0x449fc5 = ''; if (_0x551737 == null) { _0x26fa0c['disabled'] = ![], _0x26fa0c[_0x48e53e(0x185)] = _0x48e53e(0x113), _0x26fa0c[_0x48e53e(0x15a)] = _0x26fa0c[_0x48e53e(0x15a)][_0x48e53e(0x149)] + _0x371ecd, hideOverlay(), alert(_0x48e53e(0x119)); return; } await openAccordionByHeader(_0x48e53e(0x112), ['form.operation_state', 'form.operation_date']), await openAccordionByHeader('сведения\x20об\x20операции', [_0x48e53e(0x125), _0x48e53e(0x130)]), await new Promise(_0x590d6c => setTimeout(_0x590d6c, 0xc8)); for (const _0x2cb0cd of _0x551737) { _0x2cb0cd[_0x48e53e(0x132)] == _0x48e53e(0x165) && (_0x449fc5 = _0x2cb0cd['Value']); _0x2cb0cd[_0x48e53e(0x132)] == 'operation.address.house_number' && (await openAccordionByHeader('участники', [_0x48e53e(0x13d), _0x48e53e(0x10e)]), await openAccordionByHeader(_0x48e53e(0x167), [_0x48e53e(0x13d)]), await openAccordionByHeader(_0x48e53e(0x145), [_0x48e53e(0x11b)]), await openAccordionByHeader(_0x48e53e(0x16e), ['participants[0].legal_address.country']), await openAccordionByHeader(_0x48e53e(0x179), [_0x48e53e(0x134)])); _0x2cb0cd['Name'] == _0x48e53e(0x10e) && (await openAccordionByHeader(_0x48e53e(0x15c), [_0x48e53e(0x14a), _0x48e53e(0x18e)]), await openAccordionByHeader(_0x48e53e(0x133), [_0x48e53e(0x188), _0x48e53e(0x146), _0x48e53e(0x135)])); if (_0x2cb0cd[_0x48e53e(0x14d)] === _0x48e53e(0x17a)) { let _0xd11aca = document[_0x48e53e(0x147)](_0x48e53e(0x117) + _0x2cb0cd[_0x48e53e(0x132)] + '\x22]'); if (!_0xd11aca) { const _0x29219f = Date[_0x48e53e(0x122)](); while (!_0xd11aca && Date[_0x48e53e(0x122)]() - _0x29219f < 0x7d0) { await new Promise(_0x341ae8 => setTimeout(_0x341ae8, 0x64)), _0xd11aca = document[_0x48e53e(0x147)](_0x48e53e(0x117) + _0x2cb0cd[_0x48e53e(0x132)] + '\x22]'); } } if (_0xd11aca && (_0xd11aca[_0x48e53e(0x13b)] === _0x48e53e(0x169) || _0xd11aca[_0x48e53e(0x13b)] === _0x48e53e(0x156))) { _0x2cb0cd[_0x48e53e(0x132)]['toLowerCase']()[_0x48e53e(0x12f)](_0x48e53e(0x143)) || _0x2cb0cd['Name'][_0x48e53e(0x141)]()[_0x48e53e(0x12f)](_0x48e53e(0x120)) ? setReactInputValue(_0xd11aca, _0x2cb0cd[_0x48e53e(0x154)]) : setReactInputValue(_0xd11aca, _0x2cb0cd[_0x48e53e(0x154)]); continue; } } if (_0x2cb0cd[_0x48e53e(0x14d)] == _0x48e53e(0x140)) { await selectDropdownUniversal(_0x2cb0cd[_0x48e53e(0x132)], _0x2cb0cd[_0x48e53e(0x154)]); continue; } if (_0x2cb0cd[_0x48e53e(0x14d)] == _0x48e53e(0x16f)) { setReactCheckbox(_0x2cb0cd['Name'], _0x2cb0cd[_0x48e53e(0x154)]); continue; } } waitForSaveButton(_0x449fc5), waitForSubscribeButton(_0x449fc5, initiator), waitForSubscribeButton(_0x449fc5), _0x26fa0c[_0x48e53e(0x171)] = ![], _0x26fa0c[_0x48e53e(0x15a)] = _0x26fa0c[_0x48e53e(0x15a)][_0x48e53e(0x149)] + _0x4a0afc, _0x26fa0c['innerText'] = _0x48e53e(0x113), hideOverlay(), showModal(_0x48e53e(0x12c)); })()), await new Promise(_0x354e38 => setTimeout(_0x354e38, 0x32)); }, document['body']['appendChild'](_0x26fa0c); }());