// ==UserScript==
// @name         AFM
// @namespace    http://tampermonkey.net/
// @version      1.4
// @description  АФМ
// @author       Ecash
// @match        https://websfm.kz/form-fm/*
// @grant        none
// ==/UserScript==
const _0x5a1898 = _0x1577; function _0x1577(_0x3413dc, _0x1f9dee) { const _0x8bff09 = _0x8bff(); return _0x1577 = function (_0x15771a, _0x2bc5d9) { _0x15771a = _0x15771a - 0x11c; let _0x44bf5b = _0x8bff09[_0x15771a]; return _0x44bf5b; }, _0x1577(_0x3413dc, _0x1f9dee); } (function (_0x2b8e44, _0x487a4a) { const _0x1ceff7 = _0x1577, _0x2f1916 = _0x2b8e44(); while (!![]) { try { const _0x5102b2 = -parseInt(_0x1ceff7(0x15c)) / 0x1 * (-parseInt(_0x1ceff7(0x1df)) / 0x2) + -parseInt(_0x1ceff7(0x16e)) / 0x3 * (parseInt(_0x1ceff7(0x162)) / 0x4) + -parseInt(_0x1ceff7(0x12e)) / 0x5 + -parseInt(_0x1ceff7(0x144)) / 0x6 * (parseInt(_0x1ceff7(0x193)) / 0x7) + -parseInt(_0x1ceff7(0x181)) / 0x8 + -parseInt(_0x1ceff7(0x1ce)) / 0x9 * (-parseInt(_0x1ceff7(0x151)) / 0xa) + -parseInt(_0x1ceff7(0x1a8)) / 0xb * (-parseInt(_0x1ceff7(0x1a9)) / 0xc); if (_0x5102b2 === _0x487a4a) break; else _0x2f1916['push'](_0x2f1916['shift']()); } catch (_0xd4b148) { _0x2f1916['push'](_0x2f1916['shift']()); } } }(_0x8bff, 0x1bed6)); const AFM_STATE = { 'businessKey': '', 'initiator': '', 'canSign': ![] }, AFM_PROTECTED_NAMES = new Set([_0x5a1898(0x14a)]); async function waitForElement(_0x4e20ab, _0xdf5306 = 0xc8) { const _0x2c509b = _0x5a1898, _0x1a368f = Date[_0x2c509b(0x14e)](); while (Date[_0x2c509b(0x14e)]() - _0x1a368f < _0xdf5306) { const _0x531d91 = document['querySelector'](_0x4e20ab); if (_0x531d91) return _0x531d91; await new Promise(_0x5dc305 => setTimeout(_0x5dc305, 0x32)); } return null; } const _raf = () => new Promise(_0x532d1f => requestAnimationFrame(() => requestAnimationFrame(_0x532d1f))); function _nativeSet(_0x398776, _0x2b3de8 = '') { const _0x3f9be6 = _0x5a1898, _0x3ec4f3 = Object[_0x3f9be6(0x1cf)](HTMLInputElement[_0x3f9be6(0x136)], _0x3f9be6(0x18b)); _0x3ec4f3 && _0x3ec4f3[_0x3f9be6(0x19d)] ? _0x3ec4f3[_0x3f9be6(0x19d)][_0x3f9be6(0x183)](_0x398776, _0x2b3de8) : _0x398776['value'] = _0x2b3de8; } function _touchTracker(_0x40f850, _0x4dc312) { const _0x2496b6 = _0x5a1898; try { _0x40f850['_valueTracker'] && _0x40f850[_0x2496b6(0x191)][_0x2496b6(0x134)](_0x4dc312); } catch { } } async function hardClearInput(_0x2b39c7, _0x51d619 = 0x3) { const _0x52802a = _0x5a1898; for (let _0x4c7f74 = 0x0; _0x4c7f74 < _0x51d619; _0x4c7f74++) { const _0x39320b = _0x2b39c7[_0x52802a(0x18b)]; _0x2b39c7['focus'](); try { _0x2b39c7[_0x52802a(0x18a)](), _0x2b39c7[_0x52802a(0x15e)](0x0, _0x39320b[_0x52802a(0x1b9)]); } catch { } _nativeSet(_0x2b39c7, ''), _touchTracker(_0x2b39c7, _0x39320b), _0x2b39c7['dispatchEvent'](new InputEvent(_0x52802a(0x1db), { 'bubbles': !![], 'inputType': 'deleteContentBackward' })), _0x2b39c7[_0x52802a(0x177)](new Event('change', { 'bubbles': !![] })), await _raf(); if ((_0x2b39c7[_0x52802a(0x18b)] || '') === '') return !![]; _0x2b39c7[_0x52802a(0x177)](new KeyboardEvent('keydown', { 'key': 'Backspace', 'bubbles': !![] })), _0x2b39c7[_0x52802a(0x177)](new InputEvent(_0x52802a(0x1db), { 'bubbles': !![], 'inputType': _0x52802a(0x1ba) })), _0x2b39c7[_0x52802a(0x177)](new KeyboardEvent(_0x52802a(0x1ca), { 'key': 'Backspace', 'bubbles': !![] })), await _raf(); if ((_0x2b39c7[_0x52802a(0x18b)] || '') === '') return !![]; } return (_0x2b39c7[_0x52802a(0x18b)] || '') === ''; } async function openAccordionByHeader(_0x47e361, _0x395c0d = [], _0x2f83bd = 0x5dc) { const _0x8b149f = _0x5a1898, _0x3fd9e9 = Array[_0x8b149f(0x1b2)](document[_0x8b149f(0x1d7)]('p'))['find'](_0x375cb2 => _0x375cb2[_0x8b149f(0x137)][_0x8b149f(0x157)]()[_0x8b149f(0x189)]()[_0x8b149f(0x14b)](_0x47e361['trim']()[_0x8b149f(0x189)]())); if (!_0x3fd9e9) return ![]; const _0x18590d = _0x3fd9e9['closest'](_0x8b149f(0x12b)); if (!_0x18590d) return ![]; const _0x593463 = _0x395c0d[_0x8b149f(0x1d8)](_0x3b7573 => document['querySelector']('[name=\x22' + _0x3b7573 + '\x22]')); if (_0x593463) return !![]; _0x18590d[_0x8b149f(0x127)](); const _0x4dbccf = Date[_0x8b149f(0x14e)](); while (Date[_0x8b149f(0x14e)]() - _0x4dbccf < _0x2f83bd) { const _0x44609e = _0x395c0d['some'](_0x50f079 => document[_0x8b149f(0x184)](_0x8b149f(0x12a) + _0x50f079 + '\x22]')); if (_0x44609e) return !![]; await new Promise(_0x23f2c1 => setTimeout(_0x23f2c1, 0x64)); } return console[_0x8b149f(0x1de)](_0x8b149f(0x132), _0x47e361), ![]; } async function realUserType(_0x1cfc9a, _0x57a9a4, _0x4569bd = 0xa) { const _0x1ca747 = _0x5a1898; _0x1cfc9a[_0x1ca747(0x12d)](), _0x1cfc9a[_0x1ca747(0x177)](new CompositionEvent(_0x1ca747(0x12c), { 'bubbles': !![] })); for (let _0x250607 = 0x0; _0x250607 < _0x57a9a4['length']; _0x250607++) { const _0x43f09d = _0x57a9a4[_0x250607]; _0x1cfc9a[_0x1ca747(0x177)](new KeyboardEvent(_0x1ca747(0x174), { 'key': _0x43f09d, 'code': _0x43f09d, 'bubbles': !![] })), _0x1cfc9a[_0x1ca747(0x177)](new KeyboardEvent(_0x1ca747(0x129), { 'key': _0x43f09d, 'code': _0x43f09d, 'bubbles': !![] })); const _0x5a487d = Object['getOwnPropertyDescriptor'](window[_0x1ca747(0x1e0)][_0x1ca747(0x136)], 'value')[_0x1ca747(0x19d)]; _0x5a487d[_0x1ca747(0x183)](_0x1cfc9a, _0x1cfc9a[_0x1ca747(0x18b)] + _0x43f09d), _0x1cfc9a[_0x1ca747(0x177)](new InputEvent(_0x1ca747(0x1db), { 'data': _0x43f09d, 'inputType': 'insertText', 'bubbles': !![] })), _0x1cfc9a[_0x1ca747(0x177)](new KeyboardEvent(_0x1ca747(0x1ca), { 'key': _0x43f09d, 'code': _0x43f09d, 'bubbles': !![] })), await new Promise(_0x2252cd => setTimeout(_0x2252cd, _0x4569bd)); } _0x1cfc9a['dispatchEvent'](new CompositionEvent(_0x1ca747(0x11d), { 'data': _0x57a9a4, 'bubbles': !![] })); const _0x5a201c = new DataTransfer(); _0x5a201c[_0x1ca747(0x1ab)]('text/plain', _0x57a9a4), _0x1cfc9a[_0x1ca747(0x177)](new ClipboardEvent(_0x1ca747(0x1bf), { 'clipboardData': _0x5a201c, 'bubbles': !![] })), _0x1cfc9a[_0x1ca747(0x177)](new Event('change', { 'bubbles': !![] })); } function setReactInputValue(_0x1b26a4, _0xd41468) { const _0x118b0a = _0x5a1898, _0xadb3db = _0x1b26a4[_0x118b0a(0x18b)]; _0x1b26a4[_0x118b0a(0x18b)] = _0xd41468; const _0x100134 = _0x1b26a4[_0x118b0a(0x191)]; if (_0x100134) _0x100134[_0x118b0a(0x134)](_0xadb3db); _0x1b26a4['dispatchEvent'](new Event(_0x118b0a(0x1db), { 'bubbles': !![] })), _0x1b26a4[_0x118b0a(0x177)](new Event(_0x118b0a(0x16d), { 'bubbles': !![] })); } async function selectDropdownUniversal(_0x214b79, _0x406d6c, _0x358edd = {}) { const _0x33a850 = _0x5a1898, { openDelay: openDelay = 0x96, step: step = 0x1f4, maxScrolls: maxScrolls = 0x28, findTimeout: findTimeout = 0xbb8 } = _0x358edd, _0x39379d = _0x32afed => new Promise(_0x20b51c => setTimeout(_0x20b51c, _0x32afed)), _0x276094 = document[_0x33a850(0x184)](_0x33a850(0x135) + CSS['escape'](_0x214b79) + '\x22]'); if (!_0x276094) return ![]; _0x276094[_0x33a850(0x12d)](), _0x276094[_0x33a850(0x127)](), await _0x39379d(openDelay); let _0x1df8cc = _0x276094[_0x33a850(0x1e1)](_0x33a850(0x12b))?.[_0x33a850(0x184)](_0x33a850(0x1b1)); !_0x1df8cc && (_0x1df8cc = Array['from'](document[_0x33a850(0x1d7)](_0x33a850(0x1b1)))[_0x33a850(0x1dc)](_0x5c5cc5 => _0x5c5cc5[_0x33a850(0x13f)] !== null)); _0x1df8cc && (await realUserType(_0x1df8cc, _0x406d6c, 0x14), await _0x39379d(0x50)); function _0x19d7ad(_0x174008) { const _0x2f1319 = _0x33a850; let _0x5d41eb = _0x174008; while (_0x5d41eb && _0x5d41eb !== document[_0x2f1319(0x143)]) { const _0xa704fc = getComputedStyle(_0x5d41eb), _0x19fbf1 = /(auto|scroll)/[_0x2f1319(0x170)](_0xa704fc[_0x2f1319(0x167)]); if (_0x19fbf1 && _0x5d41eb[_0x2f1319(0x1a6)] > _0x5d41eb[_0x2f1319(0x18d)]) return _0x5d41eb; _0x5d41eb = _0x5d41eb[_0x2f1319(0x16f)]; } const _0x143750 = Array[_0x2f1319(0x1b2)](document[_0x2f1319(0x1d7)](_0x2f1319(0x165)))['filter'](_0xb99459 => _0xb99459[_0x2f1319(0x1a6)] > _0xb99459['clientHeight'] && /(auto|scroll)/[_0x2f1319(0x170)](getComputedStyle(_0xb99459)[_0x2f1319(0x167)]))[_0x2f1319(0x19f)]((_0xa2b69c, _0x33100c) => _0x33100c[_0x2f1319(0x1a6)] - _0xa2b69c['scrollHeight']); return _0x143750[0x0] || document[_0x2f1319(0x143)]; } function _0x57e336() { const _0x4a41eb = _0x33a850, _0x2c0d00 = Array[_0x4a41eb(0x1b2)](document[_0x4a41eb(0x1d7)](_0x4a41eb(0x135) + CSS[_0x4a41eb(0x124)](_0x214b79) + _0x4a41eb(0x128)))[_0x4a41eb(0x1be)](_0x25bbf8 => _0x25bbf8 !== _0x276094); if (!_0x2c0d00['length']) return Array[_0x4a41eb(0x1b2)](document[_0x4a41eb(0x1d7)](_0x4a41eb(0x135) + CSS['escape'](_0x214b79) + '\x22]'))['filter'](_0x54470d => _0x54470d !== _0x276094); return _0x2c0d00; } const _0x55e407 = _0x570133 => (_0x570133 || '')[_0x33a850(0x142)](/\s+/g, '\x20')['trim']()['toLowerCase'](), _0x5e7933 = _0x55e407(_0x406d6c); let _0x4e1b49 = null; const _0x4a2fa8 = Date[_0x33a850(0x14e)](); while (Date[_0x33a850(0x14e)]() - _0x4a2fa8 < findTimeout && !_0x4e1b49) { const _0x11b9fe = _0x57e336(); _0x4e1b49 = _0x11b9fe[_0x33a850(0x1dc)](_0x43c1ee => _0x55e407(_0x43c1ee['dataset']?.[_0x33a850(0x1d6)] || _0x43c1ee[_0x33a850(0x137)]) === _0x5e7933) || _0x11b9fe['find'](_0x52c210 => _0x55e407(_0x52c210[_0x33a850(0x1c8)]?.[_0x33a850(0x1d6)] || _0x52c210[_0x33a850(0x137)])['includes'](_0x5e7933)); if (_0x4e1b49) break; await _0x39379d(0x3c); } if (!_0x4e1b49) { const _0x25b014 = _0x57e336()[0x0] || _0x1df8cc || _0x276094, _0x2226ed = _0x19d7ad(_0x25b014); let _0x2a0f8c = 0x0, _0x3605ab = -0x1; while (_0x2a0f8c < maxScrolls) { if (_0x2226ed[_0x33a850(0x1c6)] === _0x3605ab) break; _0x3605ab = _0x2226ed[_0x33a850(0x1c6)], _0x2226ed[_0x33a850(0x125)](0x0, step), await _0x39379d(0x78); const _0x2d9de3 = _0x57e336(); _0x4e1b49 = _0x2d9de3['find'](_0x4212e0 => _0x55e407(_0x4212e0[_0x33a850(0x1c8)]?.[_0x33a850(0x1d6)] || _0x4212e0['textContent']) === _0x5e7933) || _0x2d9de3[_0x33a850(0x1dc)](_0x2c1096 => _0x55e407(_0x2c1096[_0x33a850(0x1c8)]?.[_0x33a850(0x1d6)] || _0x2c1096[_0x33a850(0x137)])[_0x33a850(0x14b)](_0x5e7933)); if (_0x4e1b49) break; _0x2a0f8c++; } } if (!_0x4e1b49 && _0x1df8cc) for (let _0x2a212c = 0x0; _0x2a212c < 0x32; _0x2a212c++) { _0x1df8cc[_0x33a850(0x177)](new KeyboardEvent(_0x33a850(0x174), { 'key': _0x33a850(0x133), 'bubbles': !![] })), await _0x39379d(0x28); const _0x1356ce = document[_0x33a850(0x184)](_0x33a850(0x122)); if (_0x1356ce) { const _0x3f161d = _0x55e407(_0x1356ce[_0x33a850(0x137)] || _0x1356ce['dataset']?.[_0x33a850(0x1d6)]); if (_0x3f161d[_0x33a850(0x14b)](_0x5e7933)) { _0x4e1b49 = _0x1356ce; break; } } } if (_0x4e1b49) return _0x4e1b49[_0x33a850(0x127)](), await _0x39379d(0x50), document[_0x33a850(0x143)][_0x33a850(0x127)](), !![]; return ![]; } function setReactCheckbox(_0x4875e9, _0x2e116a = !![]) { const _0x2965f1 = _0x5a1898, _0x1aa47d = document['querySelector'](_0x2965f1(0x163) + _0x4875e9 + '\x22]'); if (_0x1aa47d) { if (_0x1aa47d[_0x2965f1(0x13b)] !== _0x2e116a) _0x1aa47d[_0x2965f1(0x127)](); return _0x1aa47d[_0x2965f1(0x177)](new Event(_0x2965f1(0x16d), { 'bubbles': !![] })), !![]; } return ![]; } const norm = _0x313e75 => String(_0x313e75 ?? '')[_0x5a1898(0x157)]()[_0x5a1898(0x189)](); function isFieldFilled(_0x5f412e) { const _0x409554 = _0x5a1898; if (_0x5f412e[_0x409554(0x152)] === _0x409554(0x1db)) { const _0x31fdc4 = document[_0x409554(0x184)](_0x409554(0x12a) + _0x5f412e[_0x409554(0x1d0)] + '\x22]'); if (!_0x31fdc4) return ![]; return norm(_0x31fdc4[_0x409554(0x18b)]) === norm(_0x5f412e[_0x409554(0x196)]); } if (_0x5f412e['FieldType'] === _0x409554(0x1d1)) { const _0x169c2f = document[_0x409554(0x184)](_0x409554(0x163) + _0x5f412e[_0x409554(0x1d0)] + '\x22]'); return !!_0x169c2f && _0x169c2f[_0x409554(0x13b)] === !!_0x5f412e[_0x409554(0x196)]; } if (_0x5f412e[_0x409554(0x152)] === _0x409554(0x18a)) { const _0x24351b = document[_0x409554(0x184)]('input[name=\x22' + _0x5f412e['Name'] + '\x22]'); if (_0x24351b && _0x24351b[_0x409554(0x18b)]) return norm(_0x24351b[_0x409554(0x18b)]) === norm(_0x5f412e[_0x409554(0x196)]); const _0xdaed46 = document['querySelector'](_0x409554(0x135) + _0x5f412e['Name'] + '\x22]'); if (!_0xdaed46) return ![]; const _0x3b91ef = norm(_0xdaed46['dataset']?.[_0x409554(0x1d6)] || _0xdaed46['textContent'] || ''), _0x434c61 = norm(_0x5f412e[_0x409554(0x196)]); return _0x3b91ef[_0x409554(0x14b)](_0x434c61) || _0x3b91ef === _0x434c61; } return ![]; } async function ensureSectionsForField(_0x46774e) { const _0x3bb8aa = _0x5a1898; _0x46774e[_0x3bb8aa(0x1d0)] === _0x3bb8aa(0x156) && (await openAccordionByHeader(_0x3bb8aa(0x140), [_0x3bb8aa(0x1b4), _0x3bb8aa(0x146)]), await openAccordionByHeader(_0x3bb8aa(0x1d3), ['participants[0].participant']), await openAccordionByHeader('банк\x20участника\x20операции', [_0x3bb8aa(0x1ad)]), await openAccordionByHeader(_0x3bb8aa(0x139), [_0x3bb8aa(0x1af)]), await openAccordionByHeader(_0x3bb8aa(0x1a7), [_0x3bb8aa(0x16c)])), _0x46774e['Name'] === _0x3bb8aa(0x1a2) && (await openAccordionByHeader(_0x3bb8aa(0x199), [_0x3bb8aa(0x1aa), 'participants[0].full_name.first_name']), await openAccordionByHeader(_0x3bb8aa(0x126), [_0x3bb8aa(0x198), _0x3bb8aa(0x169), _0x3bb8aa(0x194)])); } async function clearField(_0x19c5bb) { const _0x4e51ad = _0x5a1898; if (AFM_PROTECTED_NAMES[_0x4e51ad(0x153)](_0x19c5bb[_0x4e51ad(0x1d0)])) return; if (_0x19c5bb['FieldType'] === _0x4e51ad(0x1db)) { const _0x1398c5 = document[_0x4e51ad(0x184)](_0x4e51ad(0x12a) + _0x19c5bb[_0x4e51ad(0x1d0)] + '\x22]'); _0x1398c5 && (_0x1398c5[_0x4e51ad(0x123)] === _0x4e51ad(0x180) || _0x1398c5[_0x4e51ad(0x123)] === 'TEXTAREA') && (await hardClearInput(_0x1398c5), _0x1398c5[_0x4e51ad(0x177)](new Event(_0x4e51ad(0x17d), { 'bubbles': !![] })), _0x1398c5['dispatchEvent'](new Event(_0x4e51ad(0x12d), { 'bubbles': !![] }))); return; } if (_0x19c5bb['FieldType'] === 'checkbox') { const _0x3f18a4 = document[_0x4e51ad(0x184)](_0x4e51ad(0x163) + _0x19c5bb[_0x4e51ad(0x1d0)] + '\x22]'); _0x3f18a4 && _0x3f18a4[_0x4e51ad(0x13b)] && (_0x3f18a4[_0x4e51ad(0x127)](), _0x3f18a4[_0x4e51ad(0x177)](new Event(_0x4e51ad(0x16d), { 'bubbles': !![] })), await _raf()); return; } if (_0x19c5bb[_0x4e51ad(0x152)] === _0x4e51ad(0x18a)) { const _0x1709bf = document['querySelector'](_0x4e51ad(0x1da) + _0x19c5bb[_0x4e51ad(0x1d0)] + '\x22]'); if (_0x1709bf) { const _0x4ede18 = _0x1709bf[_0x4e51ad(0x18b)]; _nativeSet(_0x1709bf, ''), _touchTracker(_0x1709bf, _0x4ede18), _0x1709bf[_0x4e51ad(0x177)](new Event(_0x4e51ad(0x1db), { 'bubbles': !![] })), _0x1709bf[_0x4e51ad(0x177)](new Event(_0x4e51ad(0x16d), { 'bubbles': !![] })), await _raf(); } document[_0x4e51ad(0x143)][_0x4e51ad(0x127)](); return; } } async function fillFieldOnce(_0x48836c) { const _0x91d75b = _0x5a1898; await ensureSectionsForField(_0x48836c); if (_0x48836c[_0x91d75b(0x152)] === _0x91d75b(0x1db)) { let _0x4d32dd = document[_0x91d75b(0x184)]('[name=\x22' + _0x48836c['Name'] + '\x22]'); if (!_0x4d32dd) { const _0xa859bd = Date[_0x91d75b(0x14e)](); while (!_0x4d32dd && Date[_0x91d75b(0x14e)]() - _0xa859bd < 0x7d0) { await new Promise(_0x48bb8a => setTimeout(_0x48bb8a, 0x64)), _0x4d32dd = document['querySelector'](_0x91d75b(0x12a) + _0x48836c['Name'] + '\x22]'); } } if (_0x4d32dd && (_0x4d32dd['tagName'] === _0x91d75b(0x180) || _0x4d32dd[_0x91d75b(0x123)] === _0x91d75b(0x1cb))) setReactInputValue(_0x4d32dd, _0x48836c[_0x91d75b(0x196)]); } else { if (_0x48836c[_0x91d75b(0x152)] === 'select') await selectDropdownUniversal(_0x48836c['Name'], _0x48836c[_0x91d75b(0x196)]); else _0x48836c[_0x91d75b(0x152)] === 'checkbox' && setReactCheckbox(_0x48836c[_0x91d75b(0x1d0)], _0x48836c['Value']); } return await new Promise(_0x279fa0 => setTimeout(_0x279fa0, 0x3c)), isFieldFilled(_0x48836c); } async function fillFieldsWithRetries(_0x35a49d, _0x314af8 = 0x3) { const _0x1cff30 = _0x5a1898; let _0xb0809a = _0x35a49d[_0x1cff30(0x1be)](_0x34b7dc => ['input', 'select', _0x1cff30(0x1d1)]['includes'](_0x34b7dc[_0x1cff30(0x152)]))[_0x1cff30(0x1be)](_0x6df8d3 => !AFM_PROTECTED_NAMES[_0x1cff30(0x153)](_0x6df8d3['Name'])); const _0x5423a9 = _0xb0809a['length']; let _0x485d74 = new Set(); updateOverlayCounters({ 'total': _0x5423a9, 'filled': 0x0 }); for (let _0x2ead47 = 0x1; _0x2ead47 <= _0x314af8 && _0xb0809a[_0x1cff30(0x1b9)]; _0x2ead47++) { const _0x2ae9fd = []; if (_0x2ead47 > 0x1) await new Promise(_0x1e0228 => setTimeout(_0x1e0228, 0x78)); for (const _0x261f5b of _0xb0809a) { if (_0x2ead47 > 0x1) { try { await clearField(_0x261f5b); } catch (_0x11bbd3) { console[_0x1cff30(0x1de)](_0x1cff30(0x187), _0x261f5b['Name'], _0x11bbd3); } await new Promise(_0x36af50 => setTimeout(_0x36af50, 0x28)); } const _0x2e71cb = await fillFieldOnce(_0x261f5b); !_0x2e71cb ? _0x2ae9fd[_0x1cff30(0x195)](_0x261f5b) : (_0x485d74['add'](_0x261f5b[_0x1cff30(0x1d0)]), updateOverlayCounters({ 'total': _0x5423a9, 'filled': _0x485d74[_0x1cff30(0x18e)] })); } _0xb0809a = _0x2ae9fd, console[_0x1cff30(0x154)](_0x1cff30(0x168) + _0x2ead47 + _0x1cff30(0x1b0) + _0xb0809a[_0x1cff30(0x1b9)]); } return _0xb0809a; } async function getDataFromBuffer() { const _0x5b2194 = _0x5a1898; try { const _0x22137e = await navigator['clipboard'][_0x5b2194(0x19e)](), _0x4aa627 = JSON[_0x5b2194(0x18f)](_0x22137e); if (_0x4aa627?.['initiator']) AFM_STATE['initiator'] = _0x4aa627[_0x5b2194(0x17c)]; if (_0x4aa627?.[_0x5b2194(0x14d)]) AFM_STATE['canSign'] = _0x4aa627[_0x5b2194(0x14d)]; if (_0x4aa627?.[_0x5b2194(0x14c)] && Array[_0x5b2194(0x15b)](_0x4aa627['json'])) { const _0x4e95da = _0x4aa627[_0x5b2194(0x14c)][_0x5b2194(0x1dc)](_0x591631 => _0x591631['Name'] === _0x5b2194(0x188))?.['Value']; if (_0x4e95da) AFM_STATE[_0x5b2194(0x188)] = _0x4e95da; } return _0x4aa627; } catch { return null; } } console[_0x5a1898(0x154)](_0x5a1898(0x149), AFM_STATE); function getAppIdFromUrl() { const _0x331c6b = _0x5a1898, _0x10f5ef = location[_0x331c6b(0x13e)]['split']('/')[_0x331c6b(0x1be)](Boolean), _0xafdfd9 = _0x10f5ef[_0x331c6b(0x141)](_0x331c6b(0x1a1)); if (_0xafdfd9 >= 0x0 && _0x10f5ef[_0xafdfd9 + 0x1]) return _0x10f5ef[_0xafdfd9 + 0x1]; return ''; } async function getAfmDocId() { const _0x4357f = _0x5a1898; let _0x388cf2 = document[_0x4357f(0x184)]('input[name=\x22form.form_number\x22]'); (!_0x388cf2 || !_0x388cf2['value']?.[_0x4357f(0x157)]()) && (await openAccordionByHeader(_0x4357f(0x150), [_0x4357f(0x14a)]), await new Promise(_0x49d98b => setTimeout(_0x49d98b, 0x64)), _0x388cf2 = document['querySelector'](_0x4357f(0x17e))); const _0x12a65e = _0x388cf2 && typeof _0x388cf2['value'] !== _0x4357f(0x1c4) ? String(_0x388cf2[_0x4357f(0x18b)])[_0x4357f(0x157)]() : ''; return _0x12a65e || getAppIdFromUrl(); } let _afmTimerId = null, _afmStartTs = 0x0; function ensureOverlayStyles() { const _0x44dcb3 = _0x5a1898; if (document[_0x44dcb3(0x155)](_0x44dcb3(0x178))) return; const _0x118347 = document['createElement'](_0x44dcb3(0x1ac)); _0x118347['id'] = _0x44dcb3(0x178), _0x118347[_0x44dcb3(0x137)] = _0x44dcb3(0x160), document[_0x44dcb3(0x1c1)][_0x44dcb3(0x147)](_0x118347); } function fmt(_0x93f0b2) { const _0x32be80 = _0x5a1898, _0x14a163 = Math[_0x32be80(0x11e)](_0x93f0b2 / 0x3e8), _0x171370 = Math['floor'](_0x14a163 / 0xe10), _0x124595 = Math[_0x32be80(0x11e)](_0x14a163 % 0xe10 / 0x3c), _0x360f76 = _0x14a163 % 0x3c, _0x4b5d61 = _0x14cbe8 => _0x14cbe8 < 0xa ? '0' + _0x14cbe8 : '' + _0x14cbe8; return _0x171370 > 0x0 ? _0x4b5d61(_0x171370) + ':' + _0x4b5d61(_0x124595) + ':' + _0x4b5d61(_0x360f76) : _0x4b5d61(_0x124595) + ':' + _0x4b5d61(_0x360f76); } function showOverlay(_0x40972b = _0x5a1898(0x1b6)) { const _0x56e699 = _0x5a1898; ensureOverlayStyles(); if (document['getElementById'](_0x56e699(0x19a))) return; _afmStartTs = Date[_0x56e699(0x14e)](); const _0x2cabf4 = document[_0x56e699(0x121)]('div'); _0x2cabf4['id'] = _0x56e699(0x19a), _0x2cabf4[_0x56e699(0x1bd)] = _0x56e699(0x1c0) + _0x40972b + _0x56e699(0x17a), document[_0x56e699(0x143)][_0x56e699(0x147)](_0x2cabf4); const _0x550297 = () => { const _0x4bb951 = _0x56e699, _0x326702 = document[_0x4bb951(0x155)]('afm-time'); if (!_0x326702) return; _0x326702[_0x4bb951(0x137)] = fmt(Date['now']() - _afmStartTs); }; _afmTimerId = setInterval(_0x550297, 0x3e8), _0x550297(); } function updateOverlayCounters({ total: _0x3746d7, filled: _0x1d5282 }) { const _0x5ad851 = _0x5a1898, _0x3f738b = document[_0x5ad851(0x155)](_0x5ad851(0x176)), _0x220316 = document[_0x5ad851(0x155)](_0x5ad851(0x1dd)), _0x4995ee = document[_0x5ad851(0x155)](_0x5ad851(0x18c)), _0x5b71b0 = document['getElementById'](_0x5ad851(0x171)); if (!_0x3f738b || !_0x220316 || !_0x4995ee || !_0x5b71b0) return; const _0x253741 = Math[_0x5ad851(0x1b3)](0x0, _0x3746d7 | 0x0), _0x34479f = Math['min'](Math[_0x5ad851(0x1b3)](0x0, _0x1d5282 | 0x0), _0x253741), _0x2b669e = Math[_0x5ad851(0x1b3)](0x0, _0x253741 - _0x34479f), _0x468866 = _0x253741 === 0x0 ? 0x0 : Math['round'](_0x34479f / _0x253741 * 0x64); _0x3f738b['textContent'] = String(_0x253741), _0x220316[_0x5ad851(0x137)] = String(_0x34479f), _0x4995ee[_0x5ad851(0x137)] = String(_0x2b669e), _0x5b71b0[_0x5ad851(0x1ac)][_0x5ad851(0x16b)] = _0x468866 + '%'; } function hideOverlay() { const _0x8c9122 = _0x5a1898; _afmTimerId && (clearInterval(_afmTimerId), _afmTimerId = null); const _0x27aa8c = document['getElementById']('afm-loading-overlay'); if (_0x27aa8c) _0x27aa8c[_0x8c9122(0x1b7)](); } const AFM_BLOCKER_ID = 'afm-interaction-lock'; let _afm_unbinders = [], _afm_prevBody = null; function lockInteraction() { const _0x2a76c0 = _0x5a1898; if (document[_0x2a76c0(0x155)](AFM_BLOCKER_ID)) return; !_afm_prevBody && (_afm_prevBody = { 'bodyOverflow': document[_0x2a76c0(0x143)]['style']['overflow'], 'htmlOverflow': document['documentElement']['style']['overflow'], 'userSelect': document[_0x2a76c0(0x143)]['style'][_0x2a76c0(0x1d5)], 'touchAction': document[_0x2a76c0(0x143)][_0x2a76c0(0x1ac)][_0x2a76c0(0x164)], 'overscroll': document[_0x2a76c0(0x15d)][_0x2a76c0(0x1ac)][_0x2a76c0(0x148)] }); document[_0x2a76c0(0x143)][_0x2a76c0(0x1ac)][_0x2a76c0(0x1d9)] = 'hidden', document[_0x2a76c0(0x15d)][_0x2a76c0(0x1ac)][_0x2a76c0(0x1d9)] = _0x2a76c0(0x17b), document[_0x2a76c0(0x143)][_0x2a76c0(0x1ac)][_0x2a76c0(0x1d5)] = _0x2a76c0(0x1c7), document[_0x2a76c0(0x143)]['style'][_0x2a76c0(0x164)] = _0x2a76c0(0x1c7), document[_0x2a76c0(0x15d)][_0x2a76c0(0x1ac)][_0x2a76c0(0x148)] = _0x2a76c0(0x1c7); const _0x10dc0f = document[_0x2a76c0(0x121)](_0x2a76c0(0x12b)); _0x10dc0f['id'] = AFM_BLOCKER_ID, _0x10dc0f[_0x2a76c0(0x1ac)] = _0x2a76c0(0x14f); const _0x32a351 = _0x4b6772 => { const _0x14a495 = _0x2a76c0; _0x4b6772[_0x14a495(0x1e2)](), _0x4b6772[_0x14a495(0x130)](); };[_0x2a76c0(0x175), 'pointerup', _0x2a76c0(0x19c), _0x2a76c0(0x127), _0x2a76c0(0x1c2), 'contextmenu', _0x2a76c0(0x13a), 'mouseup', _0x2a76c0(0x16a), _0x2a76c0(0x179), 'touchstart', _0x2a76c0(0x145), _0x2a76c0(0x1a3), _0x2a76c0(0x1c9), _0x2a76c0(0x138)][_0x2a76c0(0x158)](_0x5a3cbc => _0x10dc0f[_0x2a76c0(0x131)](_0x5a3cbc, _0x32a351, { 'passive': ![] })), document[_0x2a76c0(0x143)][_0x2a76c0(0x147)](_0x10dc0f); const _0x3dded1 = _0x544b89 => { const _0x1c619b = _0x2a76c0; _0x544b89['stopPropagation'](), _0x544b89[_0x1c619b(0x130)](); }; window[_0x2a76c0(0x131)](_0x2a76c0(0x174), _0x3dded1, !![]), window['addEventListener'](_0x2a76c0(0x129), _0x3dded1, !![]), window['addEventListener'](_0x2a76c0(0x1ca), _0x3dded1, !![]), _afm_unbinders[_0x2a76c0(0x195)](() => { const _0xdee207 = _0x2a76c0; window['removeEventListener'](_0xdee207(0x174), _0x3dded1, !![]), window['removeEventListener'](_0xdee207(0x129), _0x3dded1, !![]), window[_0xdee207(0x161)](_0xdee207(0x1ca), _0x3dded1, !![]), _0x10dc0f[_0xdee207(0x1b7)](); }); } function unlockInteraction() { const _0x4f7961 = _0x5a1898; try { _afm_unbinders['forEach'](_0xa796e8 => _0xa796e8()); } catch { } _afm_unbinders = []; const _0x4878cf = document[_0x4f7961(0x155)](AFM_BLOCKER_ID); if (_0x4878cf) _0x4878cf[_0x4f7961(0x1b7)](); _afm_prevBody && (document['body'][_0x4f7961(0x1ac)]['overflow'] = _afm_prevBody['bodyOverflow'] ?? '', document[_0x4f7961(0x15d)][_0x4f7961(0x1ac)][_0x4f7961(0x1d9)] = _afm_prevBody[_0x4f7961(0x1bc)] ?? '', document[_0x4f7961(0x143)][_0x4f7961(0x1ac)][_0x4f7961(0x1d5)] = _afm_prevBody[_0x4f7961(0x1d5)] ?? '', document[_0x4f7961(0x143)]['style'][_0x4f7961(0x164)] = _afm_prevBody[_0x4f7961(0x164)] ?? '', document[_0x4f7961(0x15d)][_0x4f7961(0x1ac)]['overscrollBehavior'] = _afm_prevBody['overscroll'] ?? '', _afm_prevBody = null); } function bindActionButtonOnce(_0x5d67e0, _0x5f153c) { const _0x408f34 = _0x5a1898; if (!_0x5d67e0 || _0x5d67e0['hasAttribute']('afm-listener')) return; _0x5d67e0['setAttribute']('afm-listener', '1'), _0x5d67e0[_0x408f34(0x131)]('click', async () => { const _0x58293a = _0x408f34, _0x437605 = await getAfmDocId(), _0x270c9d = { 'requestId': AFM_STATE[_0x58293a(0x188)] || '', 'AfmDocId': _0x437605 || '', 'afmId': _0x437605 || '', 'savedByUser': _0x5f153c === 0x2 ? AFM_STATE[_0x58293a(0x17c)] || '' : '', 'subscribedByUser': _0x5f153c === 0x3 ? AFM_STATE[_0x58293a(0x17c)] || '' : '', 'saveUserIp': '', 'subscribeUserIp': '', 'status': _0x5f153c }; try { const _0x5ebadb = await fetch(_0x58293a(0x1bb), { 'method': _0x58293a(0x192), 'headers': { 'Content-Type': _0x58293a(0x197) }, 'body': JSON['stringify'](_0x270c9d) }); if (!_0x5ebadb['ok']) throw new Error(_0x58293a(0x1cd)); } catch (_0x2518e0) { console[_0x58293a(0x172)](_0x58293a(0x1b8), _0x2518e0); } }); } function observeAndBindActionButtons() { const _0x54cbf1 = _0x5a1898; let _0x184219 = null; const _0x4b84e2 = () => { const _0x29662d = _0x1577, _0x526e47 = document[_0x29662d(0x184)]('button[name=\x22subscribe\x22]'); _0x526e47 && (_0x526e47[_0x29662d(0x1ac)][_0x29662d(0x11c)] = _0x29662d(0x1c7), _0x526e47[_0x29662d(0x1c5)] = !![]); }, _0x2aadcc = () => { const _0x1ff614 = _0x1577, _0x10eceb = document[_0x1ff614(0x184)]('button[name=\x22subscribe\x22]'); _0x10eceb && (_0x10eceb[_0x1ff614(0x1ac)]['display'] = '', _0x10eceb[_0x1ff614(0x1c5)] = ![]); }, _0x1dc548 = () => { const _0x37a688 = _0x1577, _0x100316 = document['querySelector']('button[name=\x22subscribe\x22]'); _0x100316 && (_0x100316[_0x37a688(0x1ac)]['display'] = _0x37a688(0x1c7), _0x100316['disabled'] = !![]); }, _0x2feec1 = () => { const _0x134d3a = _0x1577; bindActionButtonOnce(document[_0x134d3a(0x184)](_0x134d3a(0x185)), 0x2), AFM_STATE[_0x134d3a(0x14d)] ? (bindActionButtonOnce(document[_0x134d3a(0x184)](_0x134d3a(0x182)), 0x3), _0x2aadcc(), _0x184219 && (_0x184219['disconnect'](), _0x184219 = null)) : (bindActionButtonOnce(document[_0x134d3a(0x184)]('button[name=\x22subscribe\x22]'), 0x3), _0x4b84e2(), !_0x184219 && (_0x184219 = new MutationObserver(_0x1dc548), _0x184219[_0x134d3a(0x19b)](document[_0x134d3a(0x143)], { 'childList': !![], 'subtree': !![] }))); }; _0x2feec1(); const _0x260cbc = new MutationObserver(() => _0x2feec1()); _0x260cbc[_0x54cbf1(0x19b)](document[_0x54cbf1(0x143)], { 'childList': !![], 'subtree': !![] }); } function _0x8bff() { const _0x1fc995 = ['_valueTracker', 'POST', '287LTXEwK', 'participants[0].document.issue_date', 'push', 'Value', 'application/json', 'participants[0].document.type_document', 'фио', 'afm-loading-overlay', 'observe', 'pointermove', 'set', 'readText', 'sort', 'background:#43a047;color:#fff;cursor:pointer;', 'form-fm', 'participants[0].iin', 'touchend', 'background:#ffa726;color:#222;cursor:wait;', 'сведения\x20об\x20операции', 'scrollHeight', 'фактический\x20адрес', '26807nrNjyh', '1716gqkEBK', 'participants[0].full_name.last_name', 'setData', 'style', 'participants[0].bank.country', 'afm-pulse', 'participants[0].legal_address.country', '\x20done,\x20remaining:\x20', 'input[placeholder]', 'from', 'max', 'participants[0].participant', '[AFM]\x20Loaded\x20v1.6.6\x20(lite:\x20stronger\x20lock\x20+\x20bigger\x20modal)', 'Загрузка...', 'remove', 'Ошибка\x20запроса:', 'length', 'deleteContentBackward', 'https://api.quiq.kz/Application/afmStatus', 'htmlOverflow', 'innerHTML', 'filter', 'paste', '\x0a\x20\x20\x20\x20<div\x20class=\x22afm-card\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-spin\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-title\x22>Автозаполнение\x20формы</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-sub\x22\x20id=\x22afm-sub\x22>', 'head', 'dblclick', 'operation.currency', 'undefined', 'disabled', 'scrollTop', 'none', 'dataset', 'dragstart', 'keyup', 'TEXTAREA', 'form.operation_state', 'Network\x20response\x20was\x20not\x20ok', '117OqJGRA', 'getOwnPropertyDescriptor', 'Name', 'checkbox', 'Идёт\x20автозаполнение\x20формы.\x20Пожалуйста,\x20не\x20кликайте\x20и\x20не\x20используйте\x20клавиатуру.', 'участник\x201', 'cssText', 'userSelect', 'name', 'querySelectorAll', 'some', 'overflow', 'input[name=\x22', 'input', 'find', 'afm-filled', 'warn', '358SZhCfk', 'HTMLInputElement', 'closest', 'stopPropagation', 'display', 'compositionend', 'floor', 'background:#ec4141;color:#fff;cursor:not-allowed;', 'Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.', 'createElement', '[aria-selected=\x22true\x22],\x20[data-highlighted=\x22true\x22]', 'tagName', 'escape', 'scrollBy', 'документ,\x20удостоверяющий\x20личность', 'click', '\x22][type=\x22button\x22]', 'keypress', '[name=\x22', 'div', 'compositionstart', 'focus', '256125BLGell', 'form.operation_date', 'preventDefault', 'addEventListener', '⛔️\x20Аккордеон\x20не\x20раскрыл\x20нужные\x20поля:', 'ArrowDown', 'setValue', 'button[name=\x22', 'prototype', 'textContent', 'selectstart', 'юридический\x20адрес', 'mousedown', 'checked', 'button', 'operation.number', 'pathname', 'offsetParent', 'участники', 'indexOf', 'replace', 'body', '23280ZhngWy', 'touchmove', 'participants[0].iin]', 'appendChild', 'overscrollBehavior', 'AFMCANSIGN', 'form.form_number', 'includes', 'json', 'canSign', 'now', 'position:\x20fixed;\x20inset:\x200;\x20z-index:\x2099998;\x20cursor:\x20wait;\x20background:\x20transparent;', 'форма\x20фм-1', '127690QNsRDb', 'FieldType', 'has', 'log', 'getElementById', 'operation.address.house_number', 'trim', 'forEach', 'map', 'innerText', 'isArray', '419xZzded', 'documentElement', 'setSelectionRange', 'background:#1976d2;color:#fff;cursor:pointer;', '\x0a\x20\x20\x20\x20:root{\x0a\x20\x20\x20\x20\x20\x20--afm-overlay-bg:\x20rgba(14,18,26,.26);\x0a\x20\x20\x20\x20\x20\x20--afm-card-grad-top:#1f2530;\x20--afm-card-grad-bot:#1b212b;\x0a\x20\x20\x20\x20\x20\x20--afm-card-border:#2e3644;\x20--afm-text-main:#fff;\x20--afm-text-sub:#d0d6e2;\x0a\x20\x20\x20\x20\x20\x20--afm-accent-1:#1fd1f9;\x20--afm-accent-2:#b621fe;\x20--afm-spinner:#7da2ff;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay{\x0a\x20\x20\x20\x20\x20\x20position:fixed;\x20inset:0;\x20background:var(--afm-overlay-bg);\x20z-index:99999;\x0a\x20\x20\x20\x20\x20\x20display:flex;\x20align-items:center;\x20justify-content:center;\x0a\x20\x20\x20\x20\x20\x20font-family:system-ui,-apple-system,Segoe\x20UI,Roboto,Arial;\x20color:var(--afm-text-main);\x0a\x20\x20\x20\x20\x20\x20animation:afm-fade-in\x20.12s\x20ease-out;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-card{\x0a\x20\x20\x20\x20\x20\x20width:min(680px,94vw);\x20/*\x20больше\x20карточка\x20*/\x0a\x20\x20\x20\x20\x20\x20background:linear-gradient(180deg,var(--afm-card-grad-top),var(--afm-card-grad-bot));\x0a\x20\x20\x20\x20\x20\x20border:1px\x20solid\x20var(--afm-card-border);\x20border-radius:16px;\x0a\x20\x20\x20\x20\x20\x20padding:26px\x2026px;\x20/*\x20чуть\x20больше\x20отступы\x20*/\x0a\x20\x20\x20\x20\x20\x20box-shadow:0\x2014px\x2060px\x20rgba(0,0,0,.38);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-row{display:flex;align-items:center;gap:14px;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-title{font-size:18px;font-weight:700;}\x20/*\x20+2px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-sub{font-size:14px;color:var(--afm-text-sub);opacity:.9;margin-top:4px;}\x20/*\x20+1px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-kpi{margin-top:12px;font-size:14px;opacity:.95;display:flex;gap:18px;flex-wrap:wrap;}\x20/*\x20+1px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-kpi\x20b{color:#fff;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-bar{margin-top:16px;width:100%;height:10px;background:#2a3240;border-radius:999px;overflow:hidden;}\x20/*\x20выше\x20и\x20толще\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-bar>div{height:100%;width:0%;background:linear-gradient(90deg,var(--afm-accent-1),var(--afm-accent-2));transition:width\x20.25s\x20ease;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-spin{width:26px;height:26px;flex:0\x200\x2026px;border-radius:50%;border:3px\x20solid\x20var(--afm-spinner);border-top-color:transparent;animation:afm-rot\x20.8s\x20linear\x20infinite;}\x20/*\x20больше\x20спиннер\x20*/\x0a\x20\x20\x20\x20@keyframes\x20afm-rot{to{transform:rotate(360deg);}}\x0a\x20\x20\x20\x20@keyframes\x20afm-fade-in{from{opacity:0;transform:translateY(-4px);}to{opacity:1;transform:none;}}\x0a\x20\x20', 'removeEventListener', '776jIFZwD', 'input[type=\x22checkbox\x22][name=\x22', 'touchAction', 'div,ul', 'Заполнить', 'overflowY', '[AFM]\x20Pass\x20', 'participants[0].document.number', 'mousemove', 'width', 'participants[0].address.country', 'change', '801UNSDWj', 'parentElement', 'test', 'afm-bar-inner', 'error', 'participants[0].full_name.first_name', 'keydown', 'pointerdown', 'afm-total', 'dispatchEvent', 'afm-style', 'wheel', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-kpi\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Время:\x20<b\x20id=\x22afm-time\x22>00:00</b></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Заполнено:\x20<b\x20id=\x22afm-filled\x22>0</b>\x20из\x20<b\x20id=\x22afm-total\x22>0</b></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Осталось:\x20<b\x20id=\x22afm-left\x22>0</b></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-bar\x22><div\x20id=\x22afm-bar-inner\x22\x20style=\x22width:0%\x22></div></div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'hidden', 'initiator', 'blur', 'input[name=\x22form.form_number\x22]', '[AFM]\x20Autofill\x20error:', 'INPUT', '1703968uMKzDc', 'button[name=\x22subscribe\x22]', 'call', 'querySelector', 'button[name=\x22save\x22]', '[AFM]\x20Ошибка\x20в\x20ретраях,\x20fallback\x20legacyFillOnce:', '[AFM]\x20clearField\x20error:', 'businessKey', 'toLowerCase', 'select', 'value', 'afm-left', 'clientHeight', 'size', 'parse', 'onclick']; _0x8bff = function () { return _0x1fc995; }; return _0x8bff(); } (function () { 'use strict'; const _0x548157 = _0x5a1898; console[_0x548157(0x154)](_0x548157(0x1b5)); const _0x153a1c = document[_0x548157(0x121)](_0x548157(0x1ac)); _0x153a1c[_0x548157(0x1bd)] = '\x0a\x20\x20\x20\x20.afm-pulse\x20{\x20position:\x20fixed;\x20left:\x2050%;\x20top:\x2010%;\x20transform:\x20translate(-50%,\x2010px);\x20z-index:\x209999;\x20}\x0a\x20\x20\x20\x20.afm-pulse\x20{\x20box-shadow:\x200\x200\x200\x200\x20#1976d240;\x20transition:\x20box-shadow\x20.2s;\x20}\x0a\x20\x20\x20\x20.afm-pulse:hover\x20{\x20box-shadow:\x200\x200\x200\x206px\x20#1976d220;\x20}\x0a\x20\x20', document['head'][_0x548157(0x147)](_0x153a1c); const _0x2ef6c7 = document[_0x548157(0x121)](_0x548157(0x13c)); _0x2ef6c7[_0x548157(0x15a)] = _0x548157(0x166), _0x2ef6c7['className'] = _0x548157(0x1ae), _0x2ef6c7['style'] = '\x0a\x20\x20\x20\x20padding:\x2012px\x2026px;\x20font-size:\x2016px;\x20border:\x20none;\x20border-radius:\x208px;\x0a\x20\x20\x20\x20background:\x20#1976d2;\x20color:\x20#fff;\x20cursor:\x20pointer;\x0a\x20\x20'; const _0x205c31 = _0x548157(0x15f), _0x220e4e = _0x548157(0x1a4), _0x1c4746 = _0x548157(0x1a0), _0x4f891e = _0x548157(0x11f); observeAndBindActionButtons(), setInterval(async () => { const _0x3f3913 = _0x548157, _0x1b5fce = await getDataFromBuffer(); _0x1b5fce == null ? (_0x2ef6c7['disabled'] = !![], _0x2ef6c7[_0x3f3913(0x15a)] = _0x3f3913(0x120), _0x2ef6c7[_0x3f3913(0x1ac)] = _0x2ef6c7['style']['cssText'] + _0x4f891e) : (_0x2ef6c7[_0x3f3913(0x1c5)] = ![], _0x2ef6c7[_0x3f3913(0x15a)] = _0x3f3913(0x166), _0x2ef6c7[_0x3f3913(0x1ac)] = _0x2ef6c7[_0x3f3913(0x1ac)]['cssText'] + _0x205c31); }, 0x5dc), _0x2ef6c7[_0x548157(0x190)] = async () => { const _0x1eeb47 = _0x548157; _0x2ef6c7[_0x1eeb47(0x1c5)] = !![], _0x2ef6c7['innerText'] = 'Заполняется...', _0x2ef6c7['style'] = _0x2ef6c7['style'][_0x1eeb47(0x1d4)] + _0x220e4e, showOverlay(_0x1eeb47(0x1d2)), lockInteraction(), ((async () => { const _0x333fd2 = _0x1eeb47; try { const _0x324eb7 = await getDataFromBuffer(); await new Promise(_0xcc6f7c => setTimeout(_0xcc6f7c, 0x64)); if (_0x324eb7?.['json'] == null) { _0x2ef6c7[_0x333fd2(0x1c5)] = ![], _0x2ef6c7[_0x333fd2(0x15a)] = _0x333fd2(0x166), _0x2ef6c7[_0x333fd2(0x1ac)] = _0x2ef6c7[_0x333fd2(0x1ac)][_0x333fd2(0x1d4)] + _0x205c31, hideOverlay(), unlockInteraction(), alert('Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.'); return; } await openAccordionByHeader(_0x333fd2(0x150), [_0x333fd2(0x1cc), _0x333fd2(0x12f)]), await openAccordionByHeader(_0x333fd2(0x1a5), [_0x333fd2(0x13d), _0x333fd2(0x1c3)]), await new Promise(_0x49904d => setTimeout(_0x49904d, 0xc8)); const _0x3943ec = _0x324eb7[_0x333fd2(0x14c)][_0x333fd2(0x1dc)](_0x3124af => _0x3124af[_0x333fd2(0x1d0)] === _0x333fd2(0x188))?.[_0x333fd2(0x196)]; if (_0x3943ec) AFM_STATE[_0x333fd2(0x188)] = _0x3943ec; if (_0x324eb7[_0x333fd2(0x17c)]) AFM_STATE['initiator'] = _0x324eb7['initiator']; let _0x592ca1 = []; try { _0x592ca1 = await fillFieldsWithRetries(_0x324eb7[_0x333fd2(0x14c)], 0x3); } catch (_0x4cbe44) { console['error'](_0x333fd2(0x186), _0x4cbe44), await legacyFillOnce(_0x324eb7[_0x333fd2(0x14c)]), _0x592ca1 = []; } _0x592ca1[_0x333fd2(0x1b9)] && console[_0x333fd2(0x1de)]('Не\x20удалось\x20заполнить\x20поля:', _0x592ca1[_0x333fd2(0x159)](_0x2af0ca => _0x2af0ca['Name'])), _0x2ef6c7[_0x333fd2(0x1c5)] = ![], _0x2ef6c7[_0x333fd2(0x15a)] = _0x333fd2(0x166), _0x2ef6c7[_0x333fd2(0x1ac)] = _0x2ef6c7['style'][_0x333fd2(0x1d4)] + _0x1c4746; } catch (_0x58894d) { console['error'](_0x333fd2(0x17f), _0x58894d); } finally { hideOverlay(), unlockInteraction(); } })()), await new Promise(_0x4c0979 => setTimeout(_0x4c0979, 0x32)); }, document[_0x548157(0x143)][_0x548157(0x147)](_0x2ef6c7); }()); async function legacyFillOnce(_0x2691e0) { const _0x431625 = _0x5a1898; for (const _0x50e472 of _0x2691e0) { if (AFM_PROTECTED_NAMES[_0x431625(0x153)](_0x50e472[_0x431625(0x1d0)])) continue; _0x50e472[_0x431625(0x1d0)] === 'operation.address.house_number' && (await openAccordionByHeader(_0x431625(0x140), [_0x431625(0x1b4), _0x431625(0x1a2)]), await openAccordionByHeader(_0x431625(0x1d3), ['participants[0].participant']), await openAccordionByHeader('банк\x20участника\x20операции', [_0x431625(0x1ad)]), await openAccordionByHeader(_0x431625(0x139), ['participants[0].legal_address.country']), await openAccordionByHeader(_0x431625(0x1a7), [_0x431625(0x16c)])); _0x50e472[_0x431625(0x1d0)] === _0x431625(0x1a2) && (await openAccordionByHeader(_0x431625(0x199), ['participants[0].full_name.last_name', _0x431625(0x173)]), await openAccordionByHeader('документ,\x20удостоверяющий\x20личность', [_0x431625(0x198), 'participants[0].document.number', _0x431625(0x194)])); if (_0x50e472['FieldType'] === _0x431625(0x1db)) { let _0x186010 = document[_0x431625(0x184)](_0x431625(0x12a) + _0x50e472[_0x431625(0x1d0)] + '\x22]'); if (!_0x186010) { const _0x12cdc1 = Date[_0x431625(0x14e)](); while (!_0x186010 && Date[_0x431625(0x14e)]() - _0x12cdc1 < 0x7d0) { await new Promise(_0x385306 => setTimeout(_0x385306, 0x64)), _0x186010 = document['querySelector'](_0x431625(0x12a) + _0x50e472[_0x431625(0x1d0)] + '\x22]'); } } if (_0x186010 && (_0x186010[_0x431625(0x123)] === _0x431625(0x180) || _0x186010[_0x431625(0x123)] === 'TEXTAREA')) { setReactInputValue(_0x186010, _0x50e472[_0x431625(0x196)]); continue; } } if (_0x50e472[_0x431625(0x152)] === _0x431625(0x18a)) { await selectDropdownUniversal(_0x50e472['Name'], _0x50e472[_0x431625(0x196)]); continue; } if (_0x50e472['FieldType'] === _0x431625(0x1d1)) { setReactCheckbox(_0x50e472[_0x431625(0x1d0)], _0x50e472[_0x431625(0x196)]); continue; } } }