// ==UserScript==
// @name         AFM
// @namespace    http://tampermonkey.net/
// @version      1.2
// @description  Заполняет форму AFM корректно для React-порталов, стабильно!
// @author       Ecash
// @match        https://websfm.kz/form-fm/*
// @grant        none
// ==/UserScript==

const _0xfb8eaf = _0x3160; (function (_0x5e4ee7, _0x1974f0) { const _0x3b1f77 = _0x3160, _0x4f1026 = _0x5e4ee7(); while (!![]) { try { const _0x1ec02e = parseInt(_0x3b1f77(0x122)) / 0x1 * (-parseInt(_0x3b1f77(0x113)) / 0x2) + parseInt(_0x3b1f77(0x14a)) / 0x3 + parseInt(_0x3b1f77(0x14d)) / 0x4 + parseInt(_0x3b1f77(0x117)) / 0x5 + parseInt(_0x3b1f77(0xe9)) / 0x6 * (parseInt(_0x3b1f77(0x11d)) / 0x7) + parseInt(_0x3b1f77(0xea)) / 0x8 * (parseInt(_0x3b1f77(0xef)) / 0x9) + -parseInt(_0x3b1f77(0x151)) / 0xa * (parseInt(_0x3b1f77(0x137)) / 0xb); if (_0x1ec02e === _0x1974f0) break; else _0x4f1026['push'](_0x4f1026['shift']()); } catch (_0xd93657) { _0x4f1026['push'](_0x4f1026['shift']()); } } }(_0x33af, 0x98c31)); async function waitForElement(_0x5f08d7, _0xda0ac0 = 0xc8) { const _0x49fab5 = _0x3160, _0x52e65c = Date['now'](); while (Date[_0x49fab5(0xf9)]() - _0x52e65c < _0xda0ac0) { let _0x171de1 = document[_0x49fab5(0x11f)](_0x5f08d7); if (_0x171de1) return _0x171de1; await new Promise(_0x2cee97 => setTimeout(_0x2cee97, 0x32)); } return null; } async function openAccordionByHeader(_0x4cc857, _0x251aed = [], _0x514975 = 0x5dc) { const _0x3129b7 = _0x3160, _0x136132 = Array['from'](document[_0x3129b7(0x104)]('p'))[_0x3129b7(0xee)](_0x1cb944 => _0x1cb944[_0x3129b7(0x150)][_0x3129b7(0x126)]()[_0x3129b7(0x12c)]()[_0x3129b7(0x111)](_0x4cc857[_0x3129b7(0x126)]()[_0x3129b7(0x12c)]())); if (!_0x136132) return ![]; const _0x516790 = _0x136132[_0x3129b7(0x108)](_0x3129b7(0xe4)); if (!_0x516790) return ![]; const _0x3b74c4 = _0x251aed['some'](_0x412db9 => document[_0x3129b7(0x11f)]('[name=\x22' + _0x412db9 + '\x22]')); if (_0x3b74c4) return !![]; _0x516790[_0x3129b7(0x14f)](); const _0x310148 = Date['now'](); while (Date[_0x3129b7(0xf9)]() - _0x310148 < _0x514975) { const _0x4c9782 = _0x251aed['some'](_0x2da7e1 => document[_0x3129b7(0x11f)]('[name=\x22' + _0x2da7e1 + '\x22]')); if (_0x4c9782) return !![]; await new Promise(_0x2eb9cc => setTimeout(_0x2eb9cc, 0x64)); } return console[_0x3129b7(0xe7)](_0x3129b7(0x112), _0x4cc857), ![]; } async function realUserType(_0x4a8cf9, _0x1895fc, _0x20e1df = 0xa) { const _0x4de186 = _0x3160; _0x4a8cf9[_0x4de186(0x142)](), _0x4a8cf9['dispatchEvent'](new CompositionEvent(_0x4de186(0x146), { 'bubbles': !![] })); for (let _0x79cc02 = 0x0; _0x79cc02 < _0x1895fc[_0x4de186(0xfd)]; _0x79cc02++) { let _0x88db8 = _0x1895fc[_0x79cc02]; _0x4a8cf9[_0x4de186(0x131)](new KeyboardEvent(_0x4de186(0xf3), { 'key': _0x88db8, 'code': _0x88db8, 'bubbles': !![] })), _0x4a8cf9[_0x4de186(0x131)](new KeyboardEvent(_0x4de186(0x13a), { 'key': _0x88db8, 'code': _0x88db8, 'bubbles': !![] })); let _0x404208 = Object['getOwnPropertyDescriptor'](window[_0x4de186(0x10d)][_0x4de186(0xfc)], _0x4de186(0x120))[_0x4de186(0x123)]; _0x404208['call'](_0x4a8cf9, _0x4a8cf9[_0x4de186(0x120)] + _0x88db8), _0x4a8cf9[_0x4de186(0x131)](new InputEvent(_0x4de186(0x145), { 'data': _0x88db8, 'inputType': _0x4de186(0xed), 'bubbles': !![] })), _0x4a8cf9[_0x4de186(0x131)](new KeyboardEvent('keyup', { 'key': _0x88db8, 'code': _0x88db8, 'bubbles': !![] })), await new Promise(_0x214871 => setTimeout(_0x214871, _0x20e1df)); } _0x4a8cf9[_0x4de186(0x131)](new CompositionEvent('compositionend', { 'data': _0x1895fc, 'bubbles': !![] })); let _0x5ef898 = new DataTransfer(); _0x5ef898[_0x4de186(0xda)]('text/plain', _0x1895fc), _0x4a8cf9['dispatchEvent'](new ClipboardEvent(_0x4de186(0x134), { 'clipboardData': _0x5ef898, 'bubbles': !![] })), _0x4a8cf9[_0x4de186(0x131)](new Event(_0x4de186(0x141), { 'bubbles': !![] })); } function setReactInputValue(_0x42db2c, _0x972d3d) { const _0x2c9694 = _0x3160, _0x1972ee = _0x42db2c[_0x2c9694(0x120)]; _0x42db2c[_0x2c9694(0x120)] = _0x972d3d; let _0x221eee = _0x42db2c[_0x2c9694(0xf0)]; if (_0x221eee) _0x221eee['setValue'](_0x1972ee); _0x42db2c[_0x2c9694(0x131)](new Event(_0x2c9694(0x145), { 'bubbles': !![] })), _0x42db2c[_0x2c9694(0x131)](new Event(_0x2c9694(0x141), { 'bubbles': !![] })); } function _0x33af() { const _0x1fd93e = ['operation.number', '521628yPgloO', '4901032mQsJcf', 'Заполняется...', 'body', 'insertText', 'find', '9pNwGkL', '_valueTracker', 'POST', 'innerHTML', 'keydown', 'Name', 'checkbox', 'afm-check-modal-ok', 'фактический\x20адрес', 'setAttribute', 'now', 'participants[0].participant', 'Заполнить', 'prototype', 'length', 'background:#ec4141;color:#fff;cursor:pointer;', 'button[name=\x22save\x22]', 'afm-check-modal-backdrop', 'initiator', '[name=\x22', 'select', 'querySelectorAll', 'style', 'form.operation_date', 'operation.address.house_number', 'closest', 'background:#43a047;color:#fff;cursor:pointer;', 'createElement', 'remove', 'appendChild', 'HTMLInputElement', 'onclick', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22afm-check-modal\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'form.operation_state', 'includes', '⛔️\x20Аккордеон\x20не\x20раскрыл\x20нужные\x20поля:', '2OYgYtV', 'afm-loading-overlay', 'hasAttribute', 'INPUT', '4054075NlLmuS', 'head', 'input[name=\x22form.form_number\x22]', 'Идёт\x20автозаполнение\x20формы.\x20Пожалуйста,\x20не\x20кликайте,\x20не\x20используйте\x20клавиатуру\x20и\x20не\x20переходите\x20в\x20другие\x20окна\x20или\x20вкладки\x20до\x20завершения.', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2014px\x2032px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2018px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1976d2;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background\x200.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20.afm-pulse\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20afm-pulse-btn\x201.3s\x20infinite;\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2010%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x2010px);\x20/*\x20по\x20центру\x20и\x20на\x2010px\x20ниже\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20@keyframes\x20afm-pulse-btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x20box-shadow:\x200\x200\x200\x200\x20#1976d280;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2070%\x20{\x20box-shadow:\x200\x200\x200\x2012px\x20#1976d200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x20box-shadow:\x200\x200\x200\x200\x20#1976d200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '21yszuUX', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal-backdrop\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x20top:0;\x20left:0;\x20right:0;\x20bottom:0;\x20background:\x20rgba(0,0,0,0.3);\x20z-index:\x2099999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:flex;\x20align-items:center;\x20justify-content:center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#fff;\x20border-radius:\x2012px;\x20padding:\x2032px\x2036px;\x20font-size:\x201.2rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x208px\x2040px\x20#0005;\x20min-width:260px;\x20text-align:center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal\x20button\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2022px;\x20background:#1976d2;\x20color:#fff;\x20border:none;\x20border-radius:6px;\x20padding:10px\x2034px;\x20font-size:1rem;\x20cursor:pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background\x20.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal\x20button:hover\x20{\x20background:#0e57a1;}\x0a\x20\x20\x20\x20', 'querySelector', 'value', 'name', '998723SmwRvr', 'set', 'afm-pulse', 'background:#1976d2;color:#fff;cursor:pointer;', 'trim', 'FieldType', 'afm-listener', 'participants[0].full_name.first_name', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22afm-check-modal-ok\x22>OK</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'participants[0].document.issue_date', 'toLowerCase', '\x22][type=\x22button\x22]', 'stringify', 'innerText', 'application/json', 'dispatchEvent', 'cssText', 'Загрузка...', 'paste', 'businessKey', 'input[type=\x22checkbox\x22][name=\x22', '11nlmOwF', 'participants[0].full_name.last_name', 'tagName', 'keypress', 'форма\x20фм-1', 'disabled', 'participants[0].iin', 'Network\x20response\x20was\x20not\x20ok', '</span>\x0a\x20\x20\x20\x20</div>\x0a', 'банк\x20участника\x20операции', 'change', 'focus', 'checked', 'json', 'input', 'compositionstart', 'parse', 'from', 'date', '452010ShDGkP', 'participants[0].document.number', 'participants[0].address.country', '4353836TuSwlZ', 'button[name=\x22', 'click', 'textContent', '12989510viyowK', 'https://api.quiq.kz/Application/afmStatus', 'error', 'addEventListener', 'participants[0].legal_address.country', 'Ошибка\x20запроса:', 'className', '\x0a\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20top:\x200;\x20left:\x200;\x20right:\x200;\x20bottom:\x200;\x0a\x20\x20\x20\x20background:\x20rgba(0,0,0,0.35);\x0a\x20\x20\x20\x20z-index:\x2099999;\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20font-size:\x201rem;\x0a\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20font-family:\x20inherit;\x0a\x20\x20\x20\x20transition:\x20opacity\x200.2s;\x0a\x20\x20\x20\x20pointer-events:\x20all;\x20/*\x20<---\x20блокирует\x20все\x20клики\x20*/', 'участник\x201', 'документ,\x20удостоверяющий\x20личность', 'setData', 'function', 'Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.', 'operation.currency', 'Не\x20удалось\x20получить\x20номер\x20формы\x20(form.form_number)', 'сведения\x20об\x20операции', 'offsetParent', 'button[name=\x22subscribe\x22]', 'getElementById', 'юридический\x20адрес', 'div', 'Value', 'background:#ffa726;color:#222;cursor:wait;', 'warn']; _0x33af = function () { return _0x1fd93e; }; return _0x33af(); } async function typeTextSlowly(_0x1bc34b, _0x37e80f, _0x10f5b9 = 0x5) { const _0x3b8aa4 = _0x3160; _0x1bc34b[_0x3b8aa4(0x142)](), _0x1bc34b[_0x3b8aa4(0x120)] = '', _0x1bc34b['dispatchEvent'](new Event(_0x3b8aa4(0x145), { 'bubbles': !![] })); for (let _0x276d7b of _0x37e80f) { _0x1bc34b['value'] += _0x276d7b, _0x1bc34b[_0x3b8aa4(0x131)](new Event(_0x3b8aa4(0x145), { 'bubbles': !![] })), await new Promise(_0x17a4e6 => setTimeout(_0x17a4e6, _0x10f5b9)); } } async function selectDropdownUniversal(_0x36182f, _0x243dfb) { const _0xb8658e = _0x3160; let _0x431d78 = document[_0xb8658e(0x11f)]('button[name=\x22' + _0x36182f + '\x22]'); if (!_0x431d78) return ![]; _0x431d78['focus'](), _0x431d78['click'](), await new Promise(_0x4d42a6 => setTimeout(_0x4d42a6, 0x32)); let _0x3c43b7 = null, _0x5b5858 = _0x431d78[_0xb8658e(0x108)]('div'); _0x5b5858 && (_0x3c43b7 = _0x5b5858[_0xb8658e(0x11f)]('input[placeholder]')); !_0x3c43b7 && (_0x3c43b7 = Array[_0xb8658e(0x148)](document['querySelectorAll']('input[placeholder]'))['find'](_0x1aad2d => _0x1aad2d[_0xb8658e(0xe0)] !== null)); _0x3c43b7 && (await realUserType(_0x3c43b7, _0x243dfb, 0x14), await new Promise(_0x59f61a => setTimeout(_0x59f61a, 0x14))); let _0x3d5cf0 = null; const _0x38907e = Date[_0xb8658e(0xf9)](); while (Date[_0xb8658e(0xf9)]() - _0x38907e < 0x3e8) { let _0x2a9c64 = Array[_0xb8658e(0x148)](document[_0xb8658e(0x104)](_0xb8658e(0x14e) + _0x36182f + _0xb8658e(0x12d))); _0x3d5cf0 = _0x2a9c64['find'](_0x2344a9 => { const _0x2b9c4b = _0xb8658e, _0x49783f = (_0x2344a9['dataset']?.[_0x2b9c4b(0x121)] || _0x2344a9[_0x2b9c4b(0x150)] || '')[_0x2b9c4b(0x126)]()['toLowerCase'](); return _0x49783f === _0x243dfb[_0x2b9c4b(0x126)]()[_0x2b9c4b(0x12c)](); }); !_0x3d5cf0 && (_0x3d5cf0 = _0x2a9c64['find'](_0x213ce1 => { const _0x31472e = _0xb8658e, _0x336c78 = (_0x213ce1['dataset']?.[_0x31472e(0x121)] || _0x213ce1[_0x31472e(0x150)] || '')[_0x31472e(0x126)]()[_0x31472e(0x12c)](); return _0x336c78[_0x31472e(0x111)](_0x243dfb[_0x31472e(0x126)]()['toLowerCase']()); })); if (_0x3d5cf0) break; await new Promise(_0x19029f => setTimeout(_0x19029f, 0x32)); } if (_0x3d5cf0) return _0x3d5cf0[_0xb8658e(0x14f)](), await new Promise(_0x2d914d => setTimeout(_0x2d914d, 0x32)), document[_0xb8658e(0xec)][_0xb8658e(0x14f)](), !![]; return ![]; } function setReactCheckbox(_0x5c28d5, _0x44777b = !![]) { const _0x4cd195 = _0x3160, _0x557556 = document[_0x4cd195(0x11f)](_0x4cd195(0x136) + _0x5c28d5 + '\x22]'); if (_0x557556) { if (_0x557556[_0x4cd195(0x143)] !== _0x44777b) _0x557556[_0x4cd195(0x14f)](); return _0x557556[_0x4cd195(0x131)](new Event(_0x4cd195(0x141), { 'bubbles': !![] })), !![]; } return ![]; } async function getDataFromBuffer() { const _0x453836 = _0x3160; try { const _0x3e765d = await navigator['clipboard']['readText'](), _0xda35a9 = JSON[_0x453836(0x147)](_0x3e765d); return _0xda35a9; } catch (_0x373030) { return null; } } function showOverlay(_0x562407 = _0xfb8eaf(0x133)) { const _0x132d4b = _0xfb8eaf; if (document['getElementById'](_0x132d4b(0x114))) return; let _0x25e039 = document[_0x132d4b(0x10a)]('div'); _0x25e039['id'] = _0x132d4b(0x114), _0x25e039[_0x132d4b(0x105)] = _0x132d4b(0xd7), _0x25e039['innerHTML'] = '\x0a\x20\x20\x20\x20<div\x20style=\x22padding:\x2032px\x2048px;\x20background:\x20#282c34;\x20border-radius:\x2016px;\x20box-shadow:\x200\x208px\x2040px\x20#0007;\x22>\x0a\x20\x20\x20<span\x20style=\x22display:inline-block;\x20margin-right:18px;\x20vertical-align:middle;\x22>\x0a\x20\x20<svg\x20width=\x2240\x22\x20height=\x2240\x22\x20viewBox=\x220\x200\x2050\x2050\x22\x20style=\x22vertical-align:middle;\x22>\x0a\x20\x20\x20\x20<circle\x0a\x20\x20\x20\x20\x20\x20cx=\x2225\x22\x0a\x20\x20\x20\x20\x20\x20cy=\x2225\x22\x0a\x20\x20\x20\x20\x20\x20r=\x2220\x22\x0a\x20\x20\x20\x20\x20\x20fill=\x22none\x22\x0a\x20\x20\x20\x20\x20\x20stroke=\x22#53e3a6\x22\x0a\x20\x20\x20\x20\x20\x20stroke-width=\x225\x22\x0a\x20\x20\x20\x20\x20\x20stroke-linecap=\x22round\x22\x0a\x20\x20\x20\x20\x20\x20stroke-dasharray=\x2290\x2060\x22\x0a\x20\x20\x20\x20\x20\x20stroke-dashoffset=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20<animateTransform\x0a\x20\x20\x20\x20\x20\x20\x20\x20attributeName=\x22transform\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20type=\x22rotate\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20from=\x220\x2025\x2025\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20to=\x22360\x2025\x2025\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20dur=\x221.2s\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20repeatCount=\x22indefinite\x22/>\x0a\x20\x20\x20\x20</circle>\x0a\x20\x20</svg>\x0a</span>\x0a</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x562407 + _0x132d4b(0x13f), document['body'][_0x132d4b(0x10c)](_0x25e039); } function hideOverlay() { const _0x499461 = _0xfb8eaf; let _0x340802 = document[_0x499461(0xe2)](_0x499461(0x114)); if (_0x340802) _0x340802[_0x499461(0x10b)](); } function _0x3160(_0xde0c49, _0x26313b) { const _0x33afb2 = _0x33af(); return _0x3160 = function (_0x316050, _0x46ef17) { _0x316050 = _0x316050 - 0xd3; let _0x4202c6 = _0x33afb2[_0x316050]; return _0x4202c6; }, _0x3160(_0xde0c49, _0x26313b); } function showModal(_0x107ca2, _0x3793c6) { const _0x3b2fec = _0xfb8eaf; if (document[_0x3b2fec(0xe2)]('afm-check-modal')) return; const _0x5d97f1 = _0x3b2fec(0x11e), _0x15effa = document[_0x3b2fec(0x10a)](_0x3b2fec(0x105)); _0x15effa[_0x3b2fec(0xf2)] = _0x5d97f1, document['head'][_0x3b2fec(0x10c)](_0x15effa); const _0x3563b9 = document[_0x3b2fec(0x10a)](_0x3b2fec(0xe4)); _0x3563b9['id'] = _0x3b2fec(0x100), _0x3563b9[_0x3b2fec(0xf2)] = _0x3b2fec(0x10f) + _0x107ca2 + _0x3b2fec(0x12a), document[_0x3b2fec(0xec)][_0x3b2fec(0x10c)](_0x3563b9), document[_0x3b2fec(0xe2)](_0x3b2fec(0xf6))[_0x3b2fec(0x10e)] = function () { const _0x50a267 = _0x3b2fec; _0x3563b9[_0x50a267(0x10b)](), _0x15effa['remove'](); if (typeof _0x3793c6 === _0x50a267(0xdb)) _0x3793c6(); }; } function waitForSaveButton(_0x4f603c, _0x4c6d7f) { const _0x402925 = _0xfb8eaf; console['log']('intin', _0x4c6d7f); const _0x495c6f = document[_0x402925(0x11f)](_0x402925(0xff)); _0x495c6f ? !_0x495c6f['hasAttribute']('afm-listener') && (_0x495c6f[_0x402925(0xf8)](_0x402925(0x128), '1'), _0x495c6f[_0x402925(0xd3)]('click', async function () { const _0x2e8aee = _0x402925; try { const _0x1b4e1b = document[_0x2e8aee(0x11f)](_0x2e8aee(0x119)), _0x105784 = _0x1b4e1b ? _0x1b4e1b['value'] : null; !_0x105784 && console[_0x2e8aee(0xe7)]('Не\x20удалось\x20получить\x20номер\x20формы\x20(form.form_number)'); const _0x1dc35f = await fetch(_0x2e8aee(0x152), { 'method': _0x2e8aee(0xf1), 'headers': { 'Content-Type': _0x2e8aee(0x130) }, 'body': JSON[_0x2e8aee(0x12e)]({ 'requestId': _0x4f603c, 'afmId': _0x105784, 'savedByUser': _0x4c6d7f, 'subscribedByUser': '', 'saveUserIp': '', 'subscribeUserIp': '', 'status': 0x2 }) }); if (!_0x1dc35f['ok']) throw new Error(_0x2e8aee(0x13e)); const _0x42c752 = await _0x1dc35f[_0x2e8aee(0x144)](); } catch (_0x452395) { console['error'](_0x2e8aee(0xd5), _0x452395); } })) : setTimeout(waitForSaveButton, 0x1f4); } function waitForSubscribeButton(_0x4452d9, _0x42311c) { const _0x1516a9 = _0xfb8eaf, _0x1c2cf5 = document[_0x1516a9(0x11f)](_0x1516a9(0xe1)); _0x1c2cf5 ? !_0x1c2cf5[_0x1516a9(0x115)](_0x1516a9(0x128)) && (_0x1c2cf5[_0x1516a9(0xf8)](_0x1516a9(0x128), '1'), _0x1c2cf5[_0x1516a9(0xd3)](_0x1516a9(0x14f), async function () { const _0x387049 = _0x1516a9; try { const _0x88cf3f = document[_0x387049(0x11f)](_0x387049(0x119)), _0x5eecd7 = _0x88cf3f ? _0x88cf3f['value'] : null; !_0x5eecd7 && console[_0x387049(0xe7)](_0x387049(0xde)); const _0x2efda5 = await fetch('https://api.quiq.kz/Application/afmStatus', { 'method': 'POST', 'headers': { 'Content-Type': 'application/json' }, 'body': JSON[_0x387049(0x12e)]({ 'requestId': _0x4452d9, 'afmId': _0x5eecd7, 'savedByUser': '', 'subscribedByUser': _0x42311c, 'saveUserIp': '', 'subscribeUserIp': '', 'status': 0x3 }) }); if (!_0x2efda5['ok']) throw new Error(_0x387049(0x13e)); const _0x47a367 = await _0x2efda5[_0x387049(0x144)](); } catch (_0x393907) { console[_0x387049(0x153)]('Ошибка\x20запроса:', _0x393907); } })) : (setTimeout(waitForSaveButton, 0x1f4), setTimeout(waitForSubscribeButton, 0x1f4)); } (function () { 'use strict'; const _0x472aac = _0xfb8eaf; const _0x2d8580 = document[_0x472aac(0x10a)](_0x472aac(0x105)); _0x2d8580['innerHTML'] = _0x472aac(0x11c), document[_0x472aac(0x118)][_0x472aac(0x10c)](_0x2d8580); let _0x31c2c4 = document[_0x472aac(0x10a)]('button'); _0x31c2c4[_0x472aac(0x12f)] = _0x472aac(0xfb), _0x31c2c4[_0x472aac(0xd6)] = _0x472aac(0x124), _0x31c2c4['style'] = _0x472aac(0x11b); const _0x511ef6 = _0x472aac(0x125), _0x3479c7 = _0x472aac(0xe6), _0x428277 = _0x472aac(0x109), _0x50d445 = _0x472aac(0xfe); setInterval(async () => { const _0x1c35c9 = _0x472aac, _0x332547 = await getDataFromBuffer(); _0x332547 == null ? (_0x31c2c4[_0x1c35c9(0x13c)] = !![], _0x31c2c4['innerText'] = 'Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.', _0x31c2c4['style'] = _0x31c2c4[_0x1c35c9(0x105)]['cssText'] + _0x50d445) : (_0x31c2c4['disabled'] = ![], _0x31c2c4['innerText'] = _0x1c35c9(0xfb), _0x31c2c4['style'] = _0x31c2c4['style']['cssText'] + _0x511ef6); }, 0x5dc), _0x31c2c4[_0x472aac(0x10e)] = async () => { const _0x4d5a9b = _0x472aac; _0x31c2c4[_0x4d5a9b(0x13c)] = !![], _0x31c2c4[_0x4d5a9b(0x12f)] = _0x4d5a9b(0xeb), _0x31c2c4[_0x4d5a9b(0x105)] = _0x31c2c4[_0x4d5a9b(0x105)][_0x4d5a9b(0x132)] + _0x3479c7, showOverlay(_0x4d5a9b(0x11a)), ((async () => { const _0x21f7c1 = _0x4d5a9b, _0xa1c16f = await getDataFromBuffer(); await new Promise(_0x29f76b => setTimeout(_0x29f76b, 0x64)); var _0x3962f9 = '', _0x40634a = ''; if (_0xa1c16f?.[_0x21f7c1(0x144)] == null) { _0x40634a = _0xa1c16f[_0x21f7c1(0x101)], _0x31c2c4[_0x21f7c1(0x13c)] = ![], _0x31c2c4[_0x21f7c1(0x12f)] = _0x21f7c1(0xfb), _0x31c2c4[_0x21f7c1(0x105)] = _0x31c2c4[_0x21f7c1(0x105)]['cssText'] + _0x511ef6, hideOverlay(), alert(_0x21f7c1(0xdc)); return; } await openAccordionByHeader(_0x21f7c1(0x13b), [_0x21f7c1(0x110), _0x21f7c1(0x106)]), await openAccordionByHeader(_0x21f7c1(0xdf), [_0x21f7c1(0xe8), _0x21f7c1(0xdd)]), await new Promise(_0x563b63 => setTimeout(_0x563b63, 0xc8)), _0x40634a = _0xa1c16f[_0x21f7c1(0x101)]; for (const _0x1811ec of _0xa1c16f[_0x21f7c1(0x144)]) { _0x1811ec[_0x21f7c1(0xf4)] == _0x21f7c1(0x135) && (_0x3962f9 = _0x1811ec[_0x21f7c1(0xe5)]); _0x1811ec[_0x21f7c1(0xf4)] == _0x21f7c1(0x107) && (await openAccordionByHeader('участники', ['participants[0].participant', _0x21f7c1(0x13d)]), await openAccordionByHeader(_0x21f7c1(0xd8), [_0x21f7c1(0xfa)]), await openAccordionByHeader(_0x21f7c1(0x140), ['participants[0].participant_subaccount']), await openAccordionByHeader(_0x21f7c1(0xe3), [_0x21f7c1(0xd4)]), await openAccordionByHeader(_0x21f7c1(0xf7), [_0x21f7c1(0x14c)])); _0x1811ec['Name'] == _0x21f7c1(0x13d) && (await openAccordionByHeader('фио', [_0x21f7c1(0x138), _0x21f7c1(0x129)]), await openAccordionByHeader(_0x21f7c1(0xd9), ['participants[0].document.type_document', _0x21f7c1(0x14b), _0x21f7c1(0x12b)])); if (_0x1811ec['FieldType'] === _0x21f7c1(0x145)) { let _0x51bba4 = document['querySelector']('[name=\x22' + _0x1811ec[_0x21f7c1(0xf4)] + '\x22]'); if (!_0x51bba4) { const _0xa5cc65 = Date[_0x21f7c1(0xf9)](); while (!_0x51bba4 && Date[_0x21f7c1(0xf9)]() - _0xa5cc65 < 0x7d0) { await new Promise(_0xd8747a => setTimeout(_0xd8747a, 0x64)), _0x51bba4 = document[_0x21f7c1(0x11f)](_0x21f7c1(0x102) + _0x1811ec[_0x21f7c1(0xf4)] + '\x22]'); } } if (_0x51bba4 && (_0x51bba4[_0x21f7c1(0x139)] === _0x21f7c1(0x116) || _0x51bba4[_0x21f7c1(0x139)] === 'TEXTAREA')) { _0x1811ec[_0x21f7c1(0xf4)]['toLowerCase']()[_0x21f7c1(0x111)](_0x21f7c1(0x149)) || _0x1811ec['Name'][_0x21f7c1(0x12c)]()['includes']('issue') ? setReactInputValue(_0x51bba4, _0x1811ec[_0x21f7c1(0xe5)]) : setReactInputValue(_0x51bba4, _0x1811ec['Value']); continue; } } if (_0x1811ec[_0x21f7c1(0x127)] == _0x21f7c1(0x103)) { await selectDropdownUniversal(_0x1811ec[_0x21f7c1(0xf4)], _0x1811ec['Value']); continue; } if (_0x1811ec[_0x21f7c1(0x127)] == _0x21f7c1(0xf5)) { setReactCheckbox(_0x1811ec['Name'], _0x1811ec[_0x21f7c1(0xe5)]); continue; } } waitForSaveButton(_0x3962f9, _0x40634a), waitForSubscribeButton(_0x3962f9, _0x40634a), _0x31c2c4[_0x21f7c1(0x13c)] = ![], _0x31c2c4[_0x21f7c1(0x105)] = _0x31c2c4['style']['cssText'] + _0x428277, _0x31c2c4[_0x21f7c1(0x12f)] = _0x21f7c1(0xfb), hideOverlay(), showModal('Проверьте\x20корректность\x20данных\x20с\x20заявки'); })()), await new Promise(_0x5a90ef => setTimeout(_0x5a90ef, 0x32)); }, document[_0x472aac(0xec)][_0x472aac(0x10c)](_0x31c2c4); }());