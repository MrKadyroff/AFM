// ==UserScript==
// @name         AFM
// @namespace    http://tampermonkey.net/
// @version      1.4
// @description  АФМ
// @author       Ecash
// @match        https://websfm.kz/form-fm/*
// @grant        none
// ==/UserScript==
const _0x4470f9 = _0x9d54; (function (_0x3864fc, _0x4355bf) { const _0x5d46b6 = _0x9d54, _0x5458d6 = _0x3864fc(); while (!![]) { try { const _0x3f6dd6 = -parseInt(_0x5d46b6(0x211)) / 0x1 + parseInt(_0x5d46b6(0x273)) / 0x2 + -parseInt(_0x5d46b6(0x1de)) / 0x3 * (-parseInt(_0x5d46b6(0x235)) / 0x4) + parseInt(_0x5d46b6(0x26e)) / 0x5 + -parseInt(_0x5d46b6(0x207)) / 0x6 + -parseInt(_0x5d46b6(0x20c)) / 0x7 + -parseInt(_0x5d46b6(0x272)) / 0x8; if (_0x3f6dd6 === _0x4355bf) break; else _0x5458d6['push'](_0x5458d6['shift']()); } catch (_0x533eee) { _0x5458d6['push'](_0x5458d6['shift']()); } } }(_0x164e, 0x19c9c)); const AFM_STATE = { 'businessKey': '', 'initiator': '', 'canSign': !![] }, AFM_PROTECTED_NAMES = new Set([_0x4470f9(0x1d0)]); async function waitForElement(_0x307f59, _0x5ca040 = 0xc8) { const _0x279c6f = _0x4470f9, _0x4879bd = Date[_0x279c6f(0x23f)](); while (Date[_0x279c6f(0x23f)]() - _0x4879bd < _0x5ca040) { const _0x6dabdd = document[_0x279c6f(0x232)](_0x307f59); if (_0x6dabdd) return _0x6dabdd; await new Promise(_0x33bf87 => setTimeout(_0x33bf87, 0x32)); } return null; } const _raf = () => new Promise(_0x2a6601 => requestAnimationFrame(() => requestAnimationFrame(_0x2a6601))); function _0x164e() { const _0x4cff5d = ['body', 'removeEventListener', 'onclick', '[AFM]\x20clearField\x20error:', 'pointerup', 'button[name=\x22subscribe\x22]', 'touchend', 'prototype', 'wheel', 'Name', 'keyup', 'input[name=\x22', 'style', 'participants[0].address.country', 'forEach', '639624ZDKDzj', 'div', 'json', 'Идёт\x20автозаполнение\x20формы.\x20Пожалуйста,\x20не\x20кликайте\x20и\x20не\x20используйте\x20клавиатуру.', 'set', '860888vBpebN', 'pointerdown', 'keydown', 'documentElement', 'background:#43a047;color:#fff;cursor:pointer;', '65733cSiIAt', 'max', '[name=\x22', 'clipboard', 'https://api.quiq.kz/Application/afmStatus', 'touchstart', 'from', 'participants[0].document.type_document', 'has', 'keypress', 'filter', 'participants[0].document.number', 'push', 'deleteContentBackward', 'parentElement', 'scrollHeight', 'floor', 'setData', 'form-fm', 'afm-listener', 'text/plain', 'remove', 'log', 'preventDefault', 'round', 'form.operation_date', 'afm-bar-inner', 'initiator', 'overflow', 'dispatchEvent', 'tagName', 'юридический\x20адрес', 'scrollBy', 'querySelector', 'input[placeholder]', 'indexOf', '264Wjdome', 'addEventListener', 'mouseup', 'includes', 'toLowerCase', 'hidden', 'find', 'pathname', 'warn', 'participants[0].document.issue_date', 'now', 'disabled', '\x0a\x20\x20\x20\x20:root{\x0a\x20\x20\x20\x20\x20\x20--afm-overlay-bg:\x20rgba(14,18,26,.26);\x0a\x20\x20\x20\x20\x20\x20--afm-card-grad-top:#1f2530;\x20--afm-card-grad-bot:#1b212b;\x0a\x20\x20\x20\x20\x20\x20--afm-card-border:#2e3644;\x20--afm-text-main:#fff;\x20--afm-text-sub:#d0d6e2;\x0a\x20\x20\x20\x20\x20\x20--afm-accent-1:#1fd1f9;\x20--afm-accent-2:#b621fe;\x20--afm-spinner:#7da2ff;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay{\x0a\x20\x20\x20\x20\x20\x20position:fixed;\x20inset:0;\x20background:var(--afm-overlay-bg);\x20z-index:99999;\x0a\x20\x20\x20\x20\x20\x20display:flex;\x20align-items:center;\x20justify-content:center;\x0a\x20\x20\x20\x20\x20\x20font-family:system-ui,-apple-system,Segoe\x20UI,Roboto,Arial;\x20color:var(--afm-text-main);\x0a\x20\x20\x20\x20\x20\x20animation:afm-fade-in\x20.12s\x20ease-out;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-card{\x0a\x20\x20\x20\x20\x20\x20width:min(680px,94vw);\x20/*\x20больше\x20карточка\x20*/\x0a\x20\x20\x20\x20\x20\x20background:linear-gradient(180deg,var(--afm-card-grad-top),var(--afm-card-grad-bot));\x0a\x20\x20\x20\x20\x20\x20border:1px\x20solid\x20var(--afm-card-border);\x20border-radius:16px;\x0a\x20\x20\x20\x20\x20\x20padding:26px\x2026px;\x20/*\x20чуть\x20больше\x20отступы\x20*/\x0a\x20\x20\x20\x20\x20\x20box-shadow:0\x2014px\x2060px\x20rgba(0,0,0,.38);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-row{display:flex;align-items:center;gap:14px;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-title{font-size:18px;font-weight:700;}\x20/*\x20+2px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-sub{font-size:14px;color:var(--afm-text-sub);opacity:.9;margin-top:4px;}\x20/*\x20+1px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-kpi{margin-top:12px;font-size:14px;opacity:.95;display:flex;gap:18px;flex-wrap:wrap;}\x20/*\x20+1px\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-kpi\x20b{color:#fff;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-bar{margin-top:16px;width:100%;height:10px;background:#2a3240;border-radius:999px;overflow:hidden;}\x20/*\x20выше\x20и\x20толще\x20*/\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-bar>div{height:100%;width:0%;background:linear-gradient(90deg,var(--afm-accent-1),var(--afm-accent-2));transition:width\x20.25s\x20ease;}\x0a\x20\x20\x20\x20#afm-loading-overlay\x20.afm-spin{width:26px;height:26px;flex:0\x200\x2026px;border-radius:50%;border:3px\x20solid\x20var(--afm-spinner);border-top-color:transparent;animation:afm-rot\x20.8s\x20linear\x20infinite;}\x20/*\x20больше\x20спиннер\x20*/\x0a\x20\x20\x20\x20@keyframes\x20afm-rot{to{transform:rotate(360deg);}}\x0a\x20\x20\x20\x20@keyframes\x20afm-fade-in{from{opacity:0;transform:translateY(-4px);}to{opacity:1;transform:none;}}\x0a\x20\x20', 'background:#ec4141;color:#fff;cursor:not-allowed;', 'participants[0].participant', 'selectstart', 'textContent', 'trim', 'replace', 'split', 'contextmenu', 'htmlOverflow', 'position:\x20fixed;\x20inset:\x200;\x20z-index:\x2099998;\x20cursor:\x20wait;\x20background:\x20transparent;', '[AFM]\x20Loaded\x20v1.6.6\x20(lite:\x20stronger\x20lock\x20+\x20bigger\x20modal)', 'input[name=\x22form.form_number\x22]', 'overscrollBehavior', 'some', 'parse', 'clientHeight', 'mousemove', 'querySelectorAll', 'документ,\x20удостоверяющий\x20личность', 'closest', 'touchAction', 'change', '\x0a\x20\x20\x20\x20.afm-pulse\x20{\x20position:\x20fixed;\x20left:\x2050%;\x20top:\x2010%;\x20transform:\x20translate(-50%,\x2010px);\x20z-index:\x209999;\x20}\x0a\x20\x20\x20\x20.afm-pulse\x20{\x20box-shadow:\x200\x200\x200\x200\x20#1976d240;\x20transition:\x20box-shadow\x20.2s;\x20}\x0a\x20\x20\x20\x20.afm-pulse:hover\x20{\x20box-shadow:\x200\x200\x200\x206px\x20#1976d220;\x20}\x0a\x20\x20', 'length', '\x22][type=\x22button\x22]', 'input', 'участники', 'focus', 'businessKey', 'participants[0].full_name.last_name', 'canSign', 'sort', 'INPUT', 'value', 'mousedown', 'getElementById', 'select', 'checked', 'error', 'blur', 'appendChild', 'afm-loading-overlay', 'afm-style', 'Заполняется...', '749795QkRxEM', '[AFM]\x20Pass\x20', 'button', 'scrollTop', '185200bSviBv', '206136lNiHBQ', 'className', '[AFM]\x20Ошибка\x20в\x20ретраях,\x20fallback\x20legacyFillOnce:', 'createElement', 'Value', 'none', 'afm-filled', 'escape', 'Заполнить', 'userSelect', 'Backspace', 'FieldType', 'application/json', 'Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.', 'participants[0].full_name.first_name', 'dragstart', 'compositionstart', 'innerHTML', 'cssText', 'width', 'readText', 'operation.number', 'форма\x20фм-1', 'observe', 'Network\x20response\x20was\x20not\x20ok', 'offsetParent', 'overflowY', 'stopPropagation', 'innerText', 'form.form_number', 'TEXTAREA', 'afm-total', '[aria-selected=\x22true\x22],\x20[data-highlighted=\x22true\x22]', 'form.operation_state', 'bodyOverflow', 'dataset', 'afm-interaction-lock', 'participants[0].iin', 'pointermove', 'setAttribute', '_valueTracker', 'setValue', '⛔️\x20Аккордеон\x20не\x20раскрыл\x20нужные\x20поля:', '7776BQEkpN', 'hasAttribute', 'test', 'checkbox', 'фио', 'Ошибка\x20запроса:', 'фактический\x20адрес', 'stringify', 'display', 'name', 'paste', 'participants[0].bank.country', 'банк\x20участника\x20операции', 'input[type=\x22checkbox\x22][name=\x22', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-kpi\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Время:\x20<b\x20id=\x22afm-time\x22>00:00</b></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Заполнено:\x20<b\x20id=\x22afm-filled\x22>0</b>\x20из\x20<b\x20id=\x22afm-total\x22>0</b></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>Осталось:\x20<b\x20id=\x22afm-left\x22>0</b></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-bar\x22><div\x20id=\x22afm-bar-inner\x22\x20style=\x22width:0%\x22></div></div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'participants[0].iin]', 'button[name=\x22save\x22]', 'button[name=\x22', 'head', 'участник\x201', 'operation.address.house_number', 'call', 'getOwnPropertyDescriptor', 'afm-left', 'participants[0].legal_address.country', 'click']; _0x164e = function () { return _0x4cff5d; }; return _0x164e(); } function _nativeSet(_0x568fc4, _0x444a17 = '') { const _0x100bf8 = _0x4470f9, _0x7274d6 = Object[_0x100bf8(0x1f4)](HTMLInputElement[_0x100bf8(0x1ff)], _0x100bf8(0x263)); _0x7274d6 && _0x7274d6[_0x100bf8(0x20b)] ? _0x7274d6[_0x100bf8(0x20b)][_0x100bf8(0x1f3)](_0x568fc4, _0x444a17) : _0x568fc4[_0x100bf8(0x263)] = _0x444a17; } function _touchTracker(_0x305606, _0xb2b79f) { const _0x1e8df0 = _0x4470f9; try { _0x305606[_0x1e8df0(0x1db)] && _0x305606[_0x1e8df0(0x1db)][_0x1e8df0(0x1dc)](_0xb2b79f); } catch { } } async function hardClearInput(_0x3d79c8, _0x110b91 = 0x3) { const _0x256e04 = _0x4470f9; for (let _0x2153ef = 0x0; _0x2153ef < _0x110b91; _0x2153ef++) { const _0x4c4970 = _0x3d79c8['value']; _0x3d79c8[_0x256e04(0x25d)](); try { _0x3d79c8[_0x256e04(0x266)](), _0x3d79c8['setSelectionRange'](0x0, _0x4c4970[_0x256e04(0x259)]); } catch { } _nativeSet(_0x3d79c8, ''), _touchTracker(_0x3d79c8, _0x4c4970), _0x3d79c8[_0x256e04(0x22e)](new InputEvent('input', { 'bubbles': !![], 'inputType': _0x256e04(0x21e) })), _0x3d79c8[_0x256e04(0x22e)](new Event('change', { 'bubbles': !![] })), await _raf(); if ((_0x3d79c8[_0x256e04(0x263)] || '') === '') return !![]; _0x3d79c8[_0x256e04(0x22e)](new KeyboardEvent(_0x256e04(0x20e), { 'key': _0x256e04(0x1bd), 'bubbles': !![] })), _0x3d79c8[_0x256e04(0x22e)](new InputEvent(_0x256e04(0x25b), { 'bubbles': !![], 'inputType': 'deleteContentBackward' })), _0x3d79c8['dispatchEvent'](new KeyboardEvent(_0x256e04(0x202), { 'key': _0x256e04(0x1bd), 'bubbles': !![] })), await _raf(); if ((_0x3d79c8[_0x256e04(0x263)] || '') === '') return !![]; } return (_0x3d79c8[_0x256e04(0x263)] || '') === ''; } async function openAccordionByHeader(_0x3179e2, _0x149fb0 = [], _0x15fa7d = 0x5dc) { const _0x188028 = _0x4470f9, _0x43d938 = Array[_0x188028(0x217)](document[_0x188028(0x253)]('p'))[_0x188028(0x23b)](_0x28429a => _0x28429a[_0x188028(0x245)][_0x188028(0x246)]()[_0x188028(0x239)]()[_0x188028(0x238)](_0x3179e2[_0x188028(0x246)]()[_0x188028(0x239)]())); if (!_0x43d938) return ![]; const _0x3da3c6 = _0x43d938[_0x188028(0x255)](_0x188028(0x208)); if (!_0x3da3c6) return ![]; const _0x4e7c5d = _0x149fb0[_0x188028(0x24f)](_0x4333dd => document['querySelector'](_0x188028(0x213) + _0x4333dd + '\x22]')); if (_0x4e7c5d) return !![]; _0x3da3c6['click'](); const _0x3a74d5 = Date[_0x188028(0x23f)](); while (Date[_0x188028(0x23f)]() - _0x3a74d5 < _0x15fa7d) { const _0x33653a = _0x149fb0[_0x188028(0x24f)](_0x2c44ac => document[_0x188028(0x232)]('[name=\x22' + _0x2c44ac + '\x22]')); if (_0x33653a) return !![]; await new Promise(_0x1ac25a => setTimeout(_0x1ac25a, 0x64)); } return console[_0x188028(0x23d)](_0x188028(0x1dd), _0x3179e2), ![]; } async function realUserType(_0x56a232, _0x3b58d1, _0x5b4908 = 0xa) { const _0x5f2dc9 = _0x4470f9; _0x56a232[_0x5f2dc9(0x25d)](), _0x56a232[_0x5f2dc9(0x22e)](new CompositionEvent(_0x5f2dc9(0x1c3), { 'bubbles': !![] })); for (let _0x4874c3 = 0x0; _0x4874c3 < _0x3b58d1[_0x5f2dc9(0x259)]; _0x4874c3++) { const _0x22a41b = _0x3b58d1[_0x4874c3]; _0x56a232[_0x5f2dc9(0x22e)](new KeyboardEvent(_0x5f2dc9(0x20e), { 'key': _0x22a41b, 'code': _0x22a41b, 'bubbles': !![] })), _0x56a232[_0x5f2dc9(0x22e)](new KeyboardEvent('keypress', { 'key': _0x22a41b, 'code': _0x22a41b, 'bubbles': !![] })); const _0x5240d1 = Object[_0x5f2dc9(0x1f4)](window['HTMLInputElement'][_0x5f2dc9(0x1ff)], _0x5f2dc9(0x263))[_0x5f2dc9(0x20b)]; _0x5240d1[_0x5f2dc9(0x1f3)](_0x56a232, _0x56a232[_0x5f2dc9(0x263)] + _0x22a41b), _0x56a232[_0x5f2dc9(0x22e)](new InputEvent('input', { 'data': _0x22a41b, 'inputType': 'insertText', 'bubbles': !![] })), _0x56a232['dispatchEvent'](new KeyboardEvent(_0x5f2dc9(0x202), { 'key': _0x22a41b, 'code': _0x22a41b, 'bubbles': !![] })), await new Promise(_0x35ac39 => setTimeout(_0x35ac39, _0x5b4908)); } _0x56a232[_0x5f2dc9(0x22e)](new CompositionEvent('compositionend', { 'data': _0x3b58d1, 'bubbles': !![] })); const _0x1a7bf4 = new DataTransfer(); _0x1a7bf4[_0x5f2dc9(0x222)](_0x5f2dc9(0x225), _0x3b58d1), _0x56a232[_0x5f2dc9(0x22e)](new ClipboardEvent(_0x5f2dc9(0x1e8), { 'clipboardData': _0x1a7bf4, 'bubbles': !![] })), _0x56a232[_0x5f2dc9(0x22e)](new Event(_0x5f2dc9(0x257), { 'bubbles': !![] })); } function setReactInputValue(_0x2c1123, _0xa18327) { const _0x50f698 = _0x4470f9, _0x1c7dd5 = _0x2c1123[_0x50f698(0x263)]; _0x2c1123[_0x50f698(0x263)] = _0xa18327; const _0x277b1a = _0x2c1123[_0x50f698(0x1db)]; if (_0x277b1a) _0x277b1a[_0x50f698(0x1dc)](_0x1c7dd5); _0x2c1123[_0x50f698(0x22e)](new Event(_0x50f698(0x25b), { 'bubbles': !![] })), _0x2c1123[_0x50f698(0x22e)](new Event(_0x50f698(0x257), { 'bubbles': !![] })); } async function selectDropdownUniversal(_0x14e7c6, _0x2e6f4b, _0x5a661e = {}) { const _0x3bb356 = _0x4470f9, { openDelay: openDelay = 0x96, step: step = 0x1f4, maxScrolls: maxScrolls = 0x28, findTimeout: findTimeout = 0xbb8 } = _0x5a661e, _0xa02d71 = _0x20820e => new Promise(_0x3e82c1 => setTimeout(_0x3e82c1, _0x20820e)), _0x3c57ad = document[_0x3bb356(0x232)](_0x3bb356(0x1ef) + CSS[_0x3bb356(0x1ba)](_0x14e7c6) + '\x22]'); if (!_0x3c57ad) return ![]; _0x3c57ad['focus'](), _0x3c57ad['click'](), await _0xa02d71(openDelay); let _0x3c536b = _0x3c57ad[_0x3bb356(0x255)](_0x3bb356(0x208))?.['querySelector'](_0x3bb356(0x233)); !_0x3c536b && (_0x3c536b = Array[_0x3bb356(0x217)](document[_0x3bb356(0x253)]('input[placeholder]'))[_0x3bb356(0x23b)](_0x4a9702 => _0x4a9702[_0x3bb356(0x1cc)] !== null)); _0x3c536b && (await realUserType(_0x3c536b, _0x2e6f4b, 0x14), await _0xa02d71(0x50)); function _0x4b36c3(_0x1dc24b) { const _0x56a82c = _0x3bb356; let _0x1b34c7 = _0x1dc24b; while (_0x1b34c7 && _0x1b34c7 !== document[_0x56a82c(0x1f8)]) { const _0x5cab88 = getComputedStyle(_0x1b34c7), _0xbddc1d = /(auto|scroll)/[_0x56a82c(0x1e0)](_0x5cab88[_0x56a82c(0x1cd)]); if (_0xbddc1d && _0x1b34c7[_0x56a82c(0x220)] > _0x1b34c7['clientHeight']) return _0x1b34c7; _0x1b34c7 = _0x1b34c7[_0x56a82c(0x21f)]; } const _0x49aa5a = Array[_0x56a82c(0x217)](document[_0x56a82c(0x253)]('div,ul'))[_0x56a82c(0x21b)](_0x13d6c7 => _0x13d6c7['scrollHeight'] > _0x13d6c7[_0x56a82c(0x251)] && /(auto|scroll)/[_0x56a82c(0x1e0)](getComputedStyle(_0x13d6c7)[_0x56a82c(0x1cd)]))[_0x56a82c(0x261)]((_0x286082, _0x4799c0) => _0x4799c0[_0x56a82c(0x220)] - _0x286082[_0x56a82c(0x220)]); return _0x49aa5a[0x0] || document[_0x56a82c(0x1f8)]; } function _0x7de28() { const _0x442b0c = _0x3bb356, _0x1ad696 = Array[_0x442b0c(0x217)](document['querySelectorAll'](_0x442b0c(0x1ef) + CSS[_0x442b0c(0x1ba)](_0x14e7c6) + _0x442b0c(0x25a)))['filter'](_0x2d4283 => _0x2d4283 !== _0x3c57ad); if (!_0x1ad696[_0x442b0c(0x259)]) return Array['from'](document['querySelectorAll'](_0x442b0c(0x1ef) + CSS[_0x442b0c(0x1ba)](_0x14e7c6) + '\x22]'))[_0x442b0c(0x21b)](_0x47b627 => _0x47b627 !== _0x3c57ad); return _0x1ad696; } const _0x1f3383 = _0x51f2f5 => (_0x51f2f5 || '')[_0x3bb356(0x247)](/\s+/g, '\x20')[_0x3bb356(0x246)]()[_0x3bb356(0x239)](), _0x1de42f = _0x1f3383(_0x2e6f4b); let _0x28127a = null; const _0x2f2ddb = Date[_0x3bb356(0x23f)](); while (Date['now']() - _0x2f2ddb < findTimeout && !_0x28127a) { const _0x3eb9c8 = _0x7de28(); _0x28127a = _0x3eb9c8[_0x3bb356(0x23b)](_0x38ffbe => _0x1f3383(_0x38ffbe[_0x3bb356(0x1d6)]?.[_0x3bb356(0x1e7)] || _0x38ffbe[_0x3bb356(0x245)]) === _0x1de42f) || _0x3eb9c8[_0x3bb356(0x23b)](_0x4eb8a0 => _0x1f3383(_0x4eb8a0[_0x3bb356(0x1d6)]?.[_0x3bb356(0x1e7)] || _0x4eb8a0[_0x3bb356(0x245)])[_0x3bb356(0x238)](_0x1de42f)); if (_0x28127a) break; await _0xa02d71(0x3c); } if (!_0x28127a) { const _0x3ffce4 = _0x7de28()[0x0] || _0x3c536b || _0x3c57ad, _0x3c1d63 = _0x4b36c3(_0x3ffce4); let _0x1f9a3b = 0x0, _0x22d62c = -0x1; while (_0x1f9a3b < maxScrolls) { if (_0x3c1d63[_0x3bb356(0x271)] === _0x22d62c) break; _0x22d62c = _0x3c1d63[_0x3bb356(0x271)], _0x3c1d63[_0x3bb356(0x231)](0x0, step), await _0xa02d71(0x78); const _0x195b76 = _0x7de28(); _0x28127a = _0x195b76[_0x3bb356(0x23b)](_0x10024c => _0x1f3383(_0x10024c[_0x3bb356(0x1d6)]?.['name'] || _0x10024c[_0x3bb356(0x245)]) === _0x1de42f) || _0x195b76[_0x3bb356(0x23b)](_0x2334b2 => _0x1f3383(_0x2334b2['dataset']?.[_0x3bb356(0x1e7)] || _0x2334b2[_0x3bb356(0x245)])[_0x3bb356(0x238)](_0x1de42f)); if (_0x28127a) break; _0x1f9a3b++; } } if (!_0x28127a && _0x3c536b) for (let _0x5949ae = 0x0; _0x5949ae < 0x32; _0x5949ae++) { _0x3c536b[_0x3bb356(0x22e)](new KeyboardEvent(_0x3bb356(0x20e), { 'key': 'ArrowDown', 'bubbles': !![] })), await _0xa02d71(0x28); const _0xd59e43 = document[_0x3bb356(0x232)](_0x3bb356(0x1d3)); if (_0xd59e43) { const _0x42a98a = _0x1f3383(_0xd59e43[_0x3bb356(0x245)] || _0xd59e43[_0x3bb356(0x1d6)]?.[_0x3bb356(0x1e7)]); if (_0x42a98a[_0x3bb356(0x238)](_0x1de42f)) { _0x28127a = _0xd59e43; break; } } } if (_0x28127a) return _0x28127a[_0x3bb356(0x1f7)](), await _0xa02d71(0x50), document[_0x3bb356(0x1f8)]['click'](), !![]; return ![]; } function setReactCheckbox(_0x35e96b, _0x4a3c63 = !![]) { const _0x3b47ef = _0x4470f9, _0x5a2f50 = document['querySelector']('input[type=\x22checkbox\x22][name=\x22' + _0x35e96b + '\x22]'); if (_0x5a2f50) { if (_0x5a2f50[_0x3b47ef(0x267)] !== _0x4a3c63) _0x5a2f50[_0x3b47ef(0x1f7)](); return _0x5a2f50[_0x3b47ef(0x22e)](new Event(_0x3b47ef(0x257), { 'bubbles': !![] })), !![]; } return ![]; } const norm = _0x11214e => String(_0x11214e ?? '')[_0x4470f9(0x246)]()['toLowerCase'](); function isFieldFilled(_0x5dc148) { const _0x102900 = _0x4470f9; if (_0x5dc148[_0x102900(0x1be)] === _0x102900(0x25b)) { const _0x283684 = document[_0x102900(0x232)](_0x102900(0x213) + _0x5dc148[_0x102900(0x201)] + '\x22]'); if (!_0x283684) return ![]; return norm(_0x283684[_0x102900(0x263)]) === norm(_0x5dc148[_0x102900(0x277)]); } if (_0x5dc148[_0x102900(0x1be)] === 'checkbox') { const _0x40f5c1 = document[_0x102900(0x232)](_0x102900(0x1eb) + _0x5dc148[_0x102900(0x201)] + '\x22]'); return !!_0x40f5c1 && _0x40f5c1[_0x102900(0x267)] === !!_0x5dc148[_0x102900(0x277)]; } if (_0x5dc148[_0x102900(0x1be)] === _0x102900(0x266)) { const _0x32e567 = document['querySelector'](_0x102900(0x203) + _0x5dc148[_0x102900(0x201)] + '\x22]'); if (_0x32e567 && _0x32e567[_0x102900(0x263)]) return norm(_0x32e567[_0x102900(0x263)]) === norm(_0x5dc148[_0x102900(0x277)]); const _0x2c97e9 = document[_0x102900(0x232)]('button[name=\x22' + _0x5dc148['Name'] + '\x22]'); if (!_0x2c97e9) return ![]; const _0xfc31d9 = norm(_0x2c97e9[_0x102900(0x1d6)]?.['name'] || _0x2c97e9['textContent'] || ''), _0x265aba = norm(_0x5dc148[_0x102900(0x277)]); return _0xfc31d9[_0x102900(0x238)](_0x265aba) || _0xfc31d9 === _0x265aba; } return ![]; } async function ensureSectionsForField(_0x8480b9) { const _0x1054a4 = _0x4470f9; _0x8480b9['Name'] === _0x1054a4(0x1f2) && (await openAccordionByHeader('участники', [_0x1054a4(0x243), _0x1054a4(0x1ed)]), await openAccordionByHeader(_0x1054a4(0x1f1), [_0x1054a4(0x243)]), await openAccordionByHeader(_0x1054a4(0x1ea), [_0x1054a4(0x1e9)]), await openAccordionByHeader(_0x1054a4(0x230), [_0x1054a4(0x1f6)]), await openAccordionByHeader(_0x1054a4(0x1e4), [_0x1054a4(0x205)])), _0x8480b9[_0x1054a4(0x201)] === 'participants[0].iin' && (await openAccordionByHeader('фио', [_0x1054a4(0x25f), _0x1054a4(0x1c1)]), await openAccordionByHeader(_0x1054a4(0x254), [_0x1054a4(0x218), _0x1054a4(0x21c), _0x1054a4(0x23e)])); } async function clearField(_0x33467d) { const _0x4cb64a = _0x4470f9; if (AFM_PROTECTED_NAMES[_0x4cb64a(0x219)](_0x33467d[_0x4cb64a(0x201)])) return; if (_0x33467d['FieldType'] === 'input') { const _0x201b4b = document[_0x4cb64a(0x232)](_0x4cb64a(0x213) + _0x33467d[_0x4cb64a(0x201)] + '\x22]'); _0x201b4b && (_0x201b4b[_0x4cb64a(0x22f)] === 'INPUT' || _0x201b4b[_0x4cb64a(0x22f)] === 'TEXTAREA') && (await hardClearInput(_0x201b4b), _0x201b4b[_0x4cb64a(0x22e)](new Event(_0x4cb64a(0x269), { 'bubbles': !![] })), _0x201b4b[_0x4cb64a(0x22e)](new Event(_0x4cb64a(0x25d), { 'bubbles': !![] }))); return; } if (_0x33467d[_0x4cb64a(0x1be)] === _0x4cb64a(0x1e1)) { const _0x2b0726 = document['querySelector'](_0x4cb64a(0x1eb) + _0x33467d['Name'] + '\x22]'); _0x2b0726 && _0x2b0726[_0x4cb64a(0x267)] && (_0x2b0726[_0x4cb64a(0x1f7)](), _0x2b0726['dispatchEvent'](new Event(_0x4cb64a(0x257), { 'bubbles': !![] })), await _raf()); return; } if (_0x33467d[_0x4cb64a(0x1be)] === _0x4cb64a(0x266)) { const _0x2f34f0 = document[_0x4cb64a(0x232)](_0x4cb64a(0x203) + _0x33467d[_0x4cb64a(0x201)] + '\x22]'); if (_0x2f34f0) { const _0x1cd43f = _0x2f34f0[_0x4cb64a(0x263)]; _nativeSet(_0x2f34f0, ''), _touchTracker(_0x2f34f0, _0x1cd43f), _0x2f34f0[_0x4cb64a(0x22e)](new Event(_0x4cb64a(0x25b), { 'bubbles': !![] })), _0x2f34f0[_0x4cb64a(0x22e)](new Event(_0x4cb64a(0x257), { 'bubbles': !![] })), await _raf(); } document[_0x4cb64a(0x1f8)][_0x4cb64a(0x1f7)](); return; } } async function fillFieldOnce(_0x38f2c6) { const _0x4cd786 = _0x4470f9; await ensureSectionsForField(_0x38f2c6); if (_0x38f2c6['FieldType'] === _0x4cd786(0x25b)) { let _0x57899d = document[_0x4cd786(0x232)](_0x4cd786(0x213) + _0x38f2c6[_0x4cd786(0x201)] + '\x22]'); if (!_0x57899d) { const _0x12d511 = Date['now'](); while (!_0x57899d && Date[_0x4cd786(0x23f)]() - _0x12d511 < 0x7d0) { await new Promise(_0x249959 => setTimeout(_0x249959, 0x64)), _0x57899d = document[_0x4cd786(0x232)](_0x4cd786(0x213) + _0x38f2c6['Name'] + '\x22]'); } } if (_0x57899d && (_0x57899d[_0x4cd786(0x22f)] === _0x4cd786(0x262) || _0x57899d[_0x4cd786(0x22f)] === _0x4cd786(0x1d1))) setReactInputValue(_0x57899d, _0x38f2c6[_0x4cd786(0x277)]); } else { if (_0x38f2c6['FieldType'] === _0x4cd786(0x266)) await selectDropdownUniversal(_0x38f2c6['Name'], _0x38f2c6['Value']); else _0x38f2c6[_0x4cd786(0x1be)] === _0x4cd786(0x1e1) && setReactCheckbox(_0x38f2c6[_0x4cd786(0x201)], _0x38f2c6[_0x4cd786(0x277)]); } return await new Promise(_0x22e22c => setTimeout(_0x22e22c, 0x3c)), isFieldFilled(_0x38f2c6); } async function fillFieldsWithRetries(_0x29a3f4, _0x386557 = 0x3) { const _0x2d109e = _0x4470f9; let _0x2d87de = _0x29a3f4[_0x2d109e(0x21b)](_0x1869a3 => ['input', _0x2d109e(0x266), _0x2d109e(0x1e1)]['includes'](_0x1869a3[_0x2d109e(0x1be)]))[_0x2d109e(0x21b)](_0x5a372d => !AFM_PROTECTED_NAMES[_0x2d109e(0x219)](_0x5a372d[_0x2d109e(0x201)])); const _0x3d8285 = _0x2d87de['length']; let _0xaf59f6 = new Set(); updateOverlayCounters({ 'total': _0x3d8285, 'filled': 0x0 }); for (let _0x9291b0 = 0x1; _0x9291b0 <= _0x386557 && _0x2d87de['length']; _0x9291b0++) { const _0x6ad550 = []; if (_0x9291b0 > 0x1) await new Promise(_0x11d4fa => setTimeout(_0x11d4fa, 0x78)); for (const _0x2dbbe8 of _0x2d87de) { if (_0x9291b0 > 0x1) { try { await clearField(_0x2dbbe8); } catch (_0x34a329) { console['warn'](_0x2d109e(0x1fb), _0x2dbbe8['Name'], _0x34a329); } await new Promise(_0x53d8c7 => setTimeout(_0x53d8c7, 0x28)); } const _0x16df20 = await fillFieldOnce(_0x2dbbe8); !_0x16df20 ? _0x6ad550[_0x2d109e(0x21d)](_0x2dbbe8) : (_0xaf59f6['add'](_0x2dbbe8[_0x2d109e(0x201)]), updateOverlayCounters({ 'total': _0x3d8285, 'filled': _0xaf59f6['size'] })); } _0x2d87de = _0x6ad550, console[_0x2d109e(0x227)](_0x2d109e(0x26f) + _0x9291b0 + '\x20done,\x20remaining:\x20' + _0x2d87de[_0x2d109e(0x259)]); } return _0x2d87de; } async function getDataFromBuffer() { const _0x3d1673 = _0x4470f9; try { const _0x54e37f = await navigator[_0x3d1673(0x214)][_0x3d1673(0x1c7)](), _0x3c3794 = JSON[_0x3d1673(0x250)](_0x54e37f); if (_0x3c3794?.[_0x3d1673(0x22c)]) AFM_STATE[_0x3d1673(0x22c)] = _0x3c3794[_0x3d1673(0x22c)]; if (_0x3c3794?.[_0x3d1673(0x260)]) AFM_STATE[_0x3d1673(0x260)] = _0x3c3794['canSign']; if (_0x3c3794?.['json'] && Array['isArray'](_0x3c3794[_0x3d1673(0x209)])) { const _0x176dfc = _0x3c3794[_0x3d1673(0x209)]['find'](_0x1bde54 => _0x1bde54[_0x3d1673(0x201)] === _0x3d1673(0x25e))?.[_0x3d1673(0x277)]; if (_0x176dfc) AFM_STATE[_0x3d1673(0x25e)] = _0x176dfc; } return _0x3c3794; } catch { return null; } } console[_0x4470f9(0x227)]('AFMCANSIGN', AFM_STATE); function getAppIdFromUrl() { const _0x1ea71a = _0x4470f9, _0xf94af4 = location[_0x1ea71a(0x23c)][_0x1ea71a(0x248)]('/')[_0x1ea71a(0x21b)](Boolean), _0x58070e = _0xf94af4[_0x1ea71a(0x234)](_0x1ea71a(0x223)); if (_0x58070e >= 0x0 && _0xf94af4[_0x58070e + 0x1]) return _0xf94af4[_0x58070e + 0x1]; return ''; } async function getAfmDocId() { const _0x1334ad = _0x4470f9; let _0x4d25ce = document[_0x1334ad(0x232)]('input[name=\x22form.form_number\x22]'); (!_0x4d25ce || !_0x4d25ce['value']?.[_0x1334ad(0x246)]()) && (await openAccordionByHeader(_0x1334ad(0x1c9), [_0x1334ad(0x1d0)]), await new Promise(_0x57130f => setTimeout(_0x57130f, 0x64)), _0x4d25ce = document[_0x1334ad(0x232)](_0x1334ad(0x24d))); const _0x1898d5 = _0x4d25ce && typeof _0x4d25ce[_0x1334ad(0x263)] !== 'undefined' ? String(_0x4d25ce[_0x1334ad(0x263)])[_0x1334ad(0x246)]() : ''; return _0x1898d5 || getAppIdFromUrl(); } let _afmTimerId = null, _afmStartTs = 0x0; function ensureOverlayStyles() { const _0x5e7d49 = _0x4470f9; if (document[_0x5e7d49(0x265)](_0x5e7d49(0x26c))) return; const _0x4e3ba0 = document[_0x5e7d49(0x276)](_0x5e7d49(0x204)); _0x4e3ba0['id'] = _0x5e7d49(0x26c), _0x4e3ba0['textContent'] = _0x5e7d49(0x241), document['head'][_0x5e7d49(0x26a)](_0x4e3ba0); } function fmt(_0x3d87fb) { const _0x3daf88 = _0x4470f9, _0x277d95 = Math[_0x3daf88(0x221)](_0x3d87fb / 0x3e8), _0x581aa9 = Math[_0x3daf88(0x221)](_0x277d95 / 0xe10), _0x4f82dd = Math[_0x3daf88(0x221)](_0x277d95 % 0xe10 / 0x3c), _0xc8f307 = _0x277d95 % 0x3c, _0xe0f5c9 = _0x4e93f5 => _0x4e93f5 < 0xa ? '0' + _0x4e93f5 : '' + _0x4e93f5; return _0x581aa9 > 0x0 ? _0xe0f5c9(_0x581aa9) + ':' + _0xe0f5c9(_0x4f82dd) + ':' + _0xe0f5c9(_0xc8f307) : _0xe0f5c9(_0x4f82dd) + ':' + _0xe0f5c9(_0xc8f307); } function showOverlay(_0x7856f0 = 'Загрузка...') { const _0x1cecff = _0x4470f9; ensureOverlayStyles(); if (document[_0x1cecff(0x265)]('afm-loading-overlay')) return; _afmStartTs = Date['now'](); const _0x3e564d = document['createElement'](_0x1cecff(0x208)); _0x3e564d['id'] = _0x1cecff(0x26b), _0x3e564d[_0x1cecff(0x1c4)] = '\x0a\x20\x20\x20\x20<div\x20class=\x22afm-card\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-spin\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-title\x22>Автозаполнение\x20формы</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22afm-sub\x22\x20id=\x22afm-sub\x22>' + _0x7856f0 + _0x1cecff(0x1ec), document['body'][_0x1cecff(0x26a)](_0x3e564d); const _0x2a0e9e = () => { const _0x784c38 = _0x1cecff, _0x5d7f0c = document[_0x784c38(0x265)]('afm-time'); if (!_0x5d7f0c) return; _0x5d7f0c[_0x784c38(0x245)] = fmt(Date[_0x784c38(0x23f)]() - _afmStartTs); }; _afmTimerId = setInterval(_0x2a0e9e, 0x3e8), _0x2a0e9e(); } function updateOverlayCounters({ total: _0x29d988, filled: _0x5ca9a2 }) { const _0x85fd36 = _0x4470f9, _0x41453f = document[_0x85fd36(0x265)](_0x85fd36(0x1d2)), _0x13cec3 = document['getElementById'](_0x85fd36(0x1b9)), _0x2ee9d7 = document[_0x85fd36(0x265)](_0x85fd36(0x1f5)), _0x279c2e = document['getElementById'](_0x85fd36(0x22b)); if (!_0x41453f || !_0x13cec3 || !_0x2ee9d7 || !_0x279c2e) return; const _0x44420a = Math[_0x85fd36(0x212)](0x0, _0x29d988 | 0x0), _0xc1860 = Math['min'](Math['max'](0x0, _0x5ca9a2 | 0x0), _0x44420a), _0x478fc8 = Math['max'](0x0, _0x44420a - _0xc1860), _0x4d4bd2 = _0x44420a === 0x0 ? 0x0 : Math[_0x85fd36(0x229)](_0xc1860 / _0x44420a * 0x64); _0x41453f[_0x85fd36(0x245)] = String(_0x44420a), _0x13cec3[_0x85fd36(0x245)] = String(_0xc1860), _0x2ee9d7[_0x85fd36(0x245)] = String(_0x478fc8), _0x279c2e[_0x85fd36(0x204)][_0x85fd36(0x1c6)] = _0x4d4bd2 + '%'; } function hideOverlay() { const _0x4f3439 = _0x4470f9; _afmTimerId && (clearInterval(_afmTimerId), _afmTimerId = null); const _0x3844de = document['getElementById']('afm-loading-overlay'); if (_0x3844de) _0x3844de[_0x4f3439(0x226)](); } const AFM_BLOCKER_ID = _0x4470f9(0x1d7); let _afm_unbinders = [], _afm_prevBody = null; function _0x9d54(_0x24aa14, _0x4c7871) { const _0x164ed3 = _0x164e(); return _0x9d54 = function (_0x9d548a, _0x23b051) { _0x9d548a = _0x9d548a - 0x1b8; let _0x1da04c = _0x164ed3[_0x9d548a]; return _0x1da04c; }, _0x9d54(_0x24aa14, _0x4c7871); } function lockInteraction() { const _0x46fd73 = _0x4470f9; if (document[_0x46fd73(0x265)](AFM_BLOCKER_ID)) return; !_afm_prevBody && (_afm_prevBody = { 'bodyOverflow': document[_0x46fd73(0x1f8)]['style'][_0x46fd73(0x22d)], 'htmlOverflow': document[_0x46fd73(0x20f)][_0x46fd73(0x204)][_0x46fd73(0x22d)], 'userSelect': document[_0x46fd73(0x1f8)][_0x46fd73(0x204)][_0x46fd73(0x1bc)], 'touchAction': document['body'][_0x46fd73(0x204)]['touchAction'], 'overscroll': document[_0x46fd73(0x20f)][_0x46fd73(0x204)][_0x46fd73(0x24e)] }); document[_0x46fd73(0x1f8)]['style']['overflow'] = _0x46fd73(0x23a), document['documentElement']['style'][_0x46fd73(0x22d)] = _0x46fd73(0x23a), document[_0x46fd73(0x1f8)][_0x46fd73(0x204)]['userSelect'] = 'none', document[_0x46fd73(0x1f8)]['style'][_0x46fd73(0x256)] = _0x46fd73(0x1b8), document[_0x46fd73(0x20f)][_0x46fd73(0x204)]['overscrollBehavior'] = _0x46fd73(0x1b8); const _0x36c433 = document[_0x46fd73(0x276)]('div'); _0x36c433['id'] = AFM_BLOCKER_ID, _0x36c433[_0x46fd73(0x204)] = _0x46fd73(0x24b); const _0x27fb11 = _0x43c8cd => { const _0x243589 = _0x46fd73; _0x43c8cd[_0x243589(0x1ce)](), _0x43c8cd['preventDefault'](); };[_0x46fd73(0x20d), _0x46fd73(0x1fc), _0x46fd73(0x1d9), _0x46fd73(0x1f7), 'dblclick', _0x46fd73(0x249), _0x46fd73(0x264), _0x46fd73(0x237), _0x46fd73(0x252), _0x46fd73(0x200), _0x46fd73(0x216), 'touchmove', _0x46fd73(0x1fe), _0x46fd73(0x1c2), _0x46fd73(0x244)][_0x46fd73(0x206)](_0x282966 => _0x36c433[_0x46fd73(0x236)](_0x282966, _0x27fb11, { 'passive': ![] })), document[_0x46fd73(0x1f8)][_0x46fd73(0x26a)](_0x36c433); const _0x283d68 = _0x74a7a6 => { const _0x1ea6fb = _0x46fd73; _0x74a7a6[_0x1ea6fb(0x1ce)](), _0x74a7a6[_0x1ea6fb(0x228)](); }; window[_0x46fd73(0x236)]('keydown', _0x283d68, !![]), window['addEventListener'](_0x46fd73(0x21a), _0x283d68, !![]), window[_0x46fd73(0x236)]('keyup', _0x283d68, !![]), _afm_unbinders[_0x46fd73(0x21d)](() => { const _0x549b91 = _0x46fd73; window[_0x549b91(0x1f9)](_0x549b91(0x20e), _0x283d68, !![]), window[_0x549b91(0x1f9)](_0x549b91(0x21a), _0x283d68, !![]), window[_0x549b91(0x1f9)](_0x549b91(0x202), _0x283d68, !![]), _0x36c433[_0x549b91(0x226)](); }); } function unlockInteraction() { const _0x4262c1 = _0x4470f9; try { _afm_unbinders[_0x4262c1(0x206)](_0x2693a7 => _0x2693a7()); } catch { } _afm_unbinders = []; const _0x1e3ee3 = document[_0x4262c1(0x265)](AFM_BLOCKER_ID); if (_0x1e3ee3) _0x1e3ee3[_0x4262c1(0x226)](); _afm_prevBody && (document[_0x4262c1(0x1f8)]['style']['overflow'] = _afm_prevBody[_0x4262c1(0x1d5)] ?? '', document[_0x4262c1(0x20f)][_0x4262c1(0x204)][_0x4262c1(0x22d)] = _afm_prevBody[_0x4262c1(0x24a)] ?? '', document[_0x4262c1(0x1f8)][_0x4262c1(0x204)][_0x4262c1(0x1bc)] = _afm_prevBody[_0x4262c1(0x1bc)] ?? '', document[_0x4262c1(0x1f8)][_0x4262c1(0x204)][_0x4262c1(0x256)] = _afm_prevBody[_0x4262c1(0x256)] ?? '', document[_0x4262c1(0x20f)]['style'][_0x4262c1(0x24e)] = _afm_prevBody['overscroll'] ?? '', _afm_prevBody = null); } function bindActionButtonOnce(_0x4f7b3d, _0x208a17) { const _0x32ee5a = _0x4470f9; if (!_0x4f7b3d || _0x4f7b3d[_0x32ee5a(0x1df)](_0x32ee5a(0x224))) return; _0x4f7b3d[_0x32ee5a(0x1da)](_0x32ee5a(0x224), '1'), _0x4f7b3d[_0x32ee5a(0x236)](_0x32ee5a(0x1f7), async () => { const _0x5d148f = _0x32ee5a, _0x562b68 = await getAfmDocId(), _0x2c0f7e = { 'requestId': AFM_STATE['businessKey'] || '', 'AfmDocId': _0x562b68 || '', 'afmId': _0x562b68 || '', 'savedByUser': _0x208a17 === 0x2 ? AFM_STATE[_0x5d148f(0x22c)] || '' : '', 'subscribedByUser': _0x208a17 === 0x3 ? AFM_STATE[_0x5d148f(0x22c)] || '' : '', 'saveUserIp': '', 'subscribeUserIp': '', 'status': _0x208a17 }; try { const _0x2dc537 = await fetch(_0x5d148f(0x215), { 'method': 'POST', 'headers': { 'Content-Type': _0x5d148f(0x1bf) }, 'body': JSON[_0x5d148f(0x1e5)](_0x2c0f7e) }); if (!_0x2dc537['ok']) throw new Error(_0x5d148f(0x1cb)); } catch (_0x3b2953) { console['error'](_0x5d148f(0x1e3), _0x3b2953); } }); } function observeAndBindActionButtons() { const _0x1f0f03 = _0x4470f9; let _0x273a79 = null; const _0x42664d = () => { const _0x1aebfa = _0x9d54, _0x2ec6f5 = document[_0x1aebfa(0x232)](_0x1aebfa(0x1fd)); _0x2ec6f5 && (_0x2ec6f5[_0x1aebfa(0x204)][_0x1aebfa(0x1e6)] = 'none', _0x2ec6f5[_0x1aebfa(0x240)] = !![]); }, _0x42f8fe = () => { const _0x1aa4a4 = _0x9d54, _0x456d91 = document[_0x1aa4a4(0x232)]('button[name=\x22subscribe\x22]'); _0x456d91 && (_0x456d91['style'][_0x1aa4a4(0x1e6)] = '', _0x456d91[_0x1aa4a4(0x240)] = ![]); }, _0x2ac4c4 = () => { const _0x5459df = _0x9d54, _0x2c08bb = document[_0x5459df(0x232)](_0x5459df(0x1fd)); _0x2c08bb && (_0x2c08bb[_0x5459df(0x204)][_0x5459df(0x1e6)] = _0x5459df(0x1b8), _0x2c08bb['disabled'] = !![]); }, _0x1058e0 = () => { const _0x4c14d1 = _0x9d54; bindActionButtonOnce(document[_0x4c14d1(0x232)](_0x4c14d1(0x1ee)), 0x2), bindActionButtonOnce(document[_0x4c14d1(0x232)]('button[name=\x22subscribe\x22]'), 0x3), _0x42664d(), !_0x273a79 && (_0x273a79 = new MutationObserver(_0x2ac4c4), _0x273a79['observe'](document[_0x4c14d1(0x1f8)], { 'childList': !![], 'subtree': !![] })); }; _0x1058e0(); const _0x597ffe = new MutationObserver(() => _0x1058e0()); _0x597ffe[_0x1f0f03(0x1ca)](document[_0x1f0f03(0x1f8)], { 'childList': !![], 'subtree': !![] }); } (function () { 'use strict'; const _0xa80187 = _0x4470f9; console[_0xa80187(0x227)](_0xa80187(0x24c)); const _0x1ee9a3 = document['createElement'](_0xa80187(0x204)); _0x1ee9a3[_0xa80187(0x1c4)] = _0xa80187(0x258), document[_0xa80187(0x1f0)][_0xa80187(0x26a)](_0x1ee9a3); const _0x4171f4 = document[_0xa80187(0x276)](_0xa80187(0x270)); _0x4171f4[_0xa80187(0x1cf)] = 'Заполнить', _0x4171f4[_0xa80187(0x274)] = 'afm-pulse', _0x4171f4[_0xa80187(0x204)] = '\x0a\x20\x20\x20\x20padding:\x2012px\x2026px;\x20font-size:\x2016px;\x20border:\x20none;\x20border-radius:\x208px;\x0a\x20\x20\x20\x20background:\x20#1976d2;\x20color:\x20#fff;\x20cursor:\x20pointer;\x0a\x20\x20'; const _0x10d04b = 'background:#1976d2;color:#fff;cursor:pointer;', _0x7d12fd = 'background:#ffa726;color:#222;cursor:wait;', _0x441df9 = _0xa80187(0x210), _0x5c4c86 = _0xa80187(0x242); observeAndBindActionButtons(), setInterval(async () => { const _0x146f3f = _0xa80187, _0x436343 = await getDataFromBuffer(); _0x436343 == null ? (_0x4171f4[_0x146f3f(0x240)] = !![], _0x4171f4['innerText'] = _0x146f3f(0x1c0), _0x4171f4[_0x146f3f(0x204)] = _0x4171f4['style']['cssText'] + _0x5c4c86) : (_0x4171f4[_0x146f3f(0x240)] = ![], _0x4171f4[_0x146f3f(0x1cf)] = _0x146f3f(0x1bb), _0x4171f4[_0x146f3f(0x204)] = _0x4171f4[_0x146f3f(0x204)][_0x146f3f(0x1c5)] + _0x10d04b); }, 0x5dc), _0x4171f4[_0xa80187(0x1fa)] = async () => { const _0x458a7f = _0xa80187; _0x4171f4[_0x458a7f(0x240)] = !![], _0x4171f4[_0x458a7f(0x1cf)] = _0x458a7f(0x26d), _0x4171f4['style'] = _0x4171f4['style']['cssText'] + _0x7d12fd, showOverlay(_0x458a7f(0x20a)), lockInteraction(), ((async () => { const _0x9237f6 = _0x458a7f; try { const _0x4eb1bb = await getDataFromBuffer(); await new Promise(_0x2849bc => setTimeout(_0x2849bc, 0x64)); if (_0x4eb1bb?.['json'] == null) { _0x4171f4[_0x9237f6(0x240)] = ![], _0x4171f4[_0x9237f6(0x1cf)] = _0x9237f6(0x1bb), _0x4171f4[_0x9237f6(0x204)] = _0x4171f4['style']['cssText'] + _0x10d04b, hideOverlay(), unlockInteraction(), alert(_0x9237f6(0x1c0)); return; } await openAccordionByHeader(_0x9237f6(0x1c9), [_0x9237f6(0x1d4), _0x9237f6(0x22a)]), await openAccordionByHeader('сведения\x20об\x20операции', [_0x9237f6(0x1c8), 'operation.currency']), await new Promise(_0xcde307 => setTimeout(_0xcde307, 0xc8)); const _0x1d2ab5 = _0x4eb1bb[_0x9237f6(0x209)][_0x9237f6(0x23b)](_0x11645b => _0x11645b[_0x9237f6(0x201)] === _0x9237f6(0x25e))?.[_0x9237f6(0x277)]; if (_0x1d2ab5) AFM_STATE[_0x9237f6(0x25e)] = _0x1d2ab5; if (_0x4eb1bb[_0x9237f6(0x22c)]) AFM_STATE[_0x9237f6(0x22c)] = _0x4eb1bb[_0x9237f6(0x22c)]; let _0x16f1cb = []; try { _0x16f1cb = await fillFieldsWithRetries(_0x4eb1bb[_0x9237f6(0x209)], 0x3); } catch (_0x51733b) { console[_0x9237f6(0x268)](_0x9237f6(0x275), _0x51733b), await legacyFillOnce(_0x4eb1bb[_0x9237f6(0x209)]), _0x16f1cb = []; } _0x16f1cb['length'] && console[_0x9237f6(0x23d)]('Не\x20удалось\x20заполнить\x20поля:', _0x16f1cb['map'](_0x2d9f18 => _0x2d9f18[_0x9237f6(0x201)])), _0x4171f4[_0x9237f6(0x240)] = ![], _0x4171f4['innerText'] = _0x9237f6(0x1bb), _0x4171f4[_0x9237f6(0x204)] = _0x4171f4['style'][_0x9237f6(0x1c5)] + _0x441df9; } catch (_0x9c908) { console['error']('[AFM]\x20Autofill\x20error:', _0x9c908); } finally { hideOverlay(), unlockInteraction(); } })()), await new Promise(_0x4bd5d2 => setTimeout(_0x4bd5d2, 0x32)); }, document[_0xa80187(0x1f8)][_0xa80187(0x26a)](_0x4171f4); }()); async function legacyFillOnce(_0x4f9d02) { const _0x13d752 = _0x4470f9; for (const _0x3a720e of _0x4f9d02) { if (AFM_PROTECTED_NAMES[_0x13d752(0x219)](_0x3a720e[_0x13d752(0x201)])) continue; _0x3a720e[_0x13d752(0x201)] === _0x13d752(0x1f2) && (await openAccordionByHeader(_0x13d752(0x25c), [_0x13d752(0x243), _0x13d752(0x1d8)]), await openAccordionByHeader(_0x13d752(0x1f1), ['participants[0].participant']), await openAccordionByHeader(_0x13d752(0x1ea), [_0x13d752(0x1e9)]), await openAccordionByHeader(_0x13d752(0x230), [_0x13d752(0x1f6)]), await openAccordionByHeader(_0x13d752(0x1e4), ['participants[0].address.country'])); _0x3a720e[_0x13d752(0x201)] === 'participants[0].iin' && (await openAccordionByHeader(_0x13d752(0x1e2), [_0x13d752(0x25f), _0x13d752(0x1c1)]), await openAccordionByHeader(_0x13d752(0x254), [_0x13d752(0x218), _0x13d752(0x21c), 'participants[0].document.issue_date'])); if (_0x3a720e['FieldType'] === _0x13d752(0x25b)) { let _0x2ad173 = document['querySelector'](_0x13d752(0x213) + _0x3a720e[_0x13d752(0x201)] + '\x22]'); if (!_0x2ad173) { const _0x2a0151 = Date[_0x13d752(0x23f)](); while (!_0x2ad173 && Date[_0x13d752(0x23f)]() - _0x2a0151 < 0x7d0) { await new Promise(_0x4f3fa3 => setTimeout(_0x4f3fa3, 0x64)), _0x2ad173 = document['querySelector'](_0x13d752(0x213) + _0x3a720e[_0x13d752(0x201)] + '\x22]'); } } if (_0x2ad173 && (_0x2ad173[_0x13d752(0x22f)] === _0x13d752(0x262) || _0x2ad173[_0x13d752(0x22f)] === 'TEXTAREA')) { setReactInputValue(_0x2ad173, _0x3a720e[_0x13d752(0x277)]); continue; } } if (_0x3a720e[_0x13d752(0x1be)] === _0x13d752(0x266)) { await selectDropdownUniversal(_0x3a720e[_0x13d752(0x201)], _0x3a720e['Value']); continue; } if (_0x3a720e[_0x13d752(0x1be)] === _0x13d752(0x1e1)) { setReactCheckbox(_0x3a720e['Name'], _0x3a720e[_0x13d752(0x277)]); continue; } } }