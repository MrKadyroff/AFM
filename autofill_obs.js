// ==UserScript==
// @name         AFM
// @namespace    http://tampermonkey.net/
// @version      1.2
// @description  Заполняет форму AFM корректно для React-порталов, стабильно!
// @author       Ecash
// @match        https://websfm.kz/form-fm/*
// @grant        none
// ==/UserScript==

const _0x35e4d8 = _0x3fcc; (function (_0x497ce0, _0xa88b2b) { const _0x6e1cf8 = _0x3fcc, _0x236442 = _0x497ce0(); while (!![]) { try { const _0x320348 = parseInt(_0x6e1cf8(0x204)) / 0x1 * (-parseInt(_0x6e1cf8(0x1a5)) / 0x2) + -parseInt(_0x6e1cf8(0x1b8)) / 0x3 + -parseInt(_0x6e1cf8(0x1aa)) / 0x4 + -parseInt(_0x6e1cf8(0x1fb)) / 0x5 * (parseInt(_0x6e1cf8(0x1bc)) / 0x6) + -parseInt(_0x6e1cf8(0x1e2)) / 0x7 * (-parseInt(_0x6e1cf8(0x1ed)) / 0x8) + parseInt(_0x6e1cf8(0x1da)) / 0x9 + parseInt(_0x6e1cf8(0x1c1)) / 0xa * (parseInt(_0x6e1cf8(0x1c8)) / 0xb); if (_0x320348 === _0xa88b2b) break; else _0x236442['push'](_0x236442['shift']()); } catch (_0x50f2ee) { _0x236442['push'](_0x236442['shift']()); } } }(_0x547d, 0x899ad)); async function waitForElement(_0x563ca3, _0x4d76bb = 0xc8) { const _0x3137f9 = _0x3fcc, _0x1f63ce = Date[_0x3137f9(0x1c7)](); while (Date[_0x3137f9(0x1c7)]() - _0x1f63ce < _0x4d76bb) { let _0x4dc264 = document[_0x3137f9(0x1dd)](_0x563ca3); if (_0x4dc264) return _0x4dc264; await new Promise(_0x412e3e => setTimeout(_0x412e3e, 0x32)); } return null; } async function openAccordionByHeader(_0x1c3507, _0x4765a8 = [], _0x324986 = 0x5dc) { const _0x195b5e = _0x3fcc, _0x341786 = Array[_0x195b5e(0x1df)](document[_0x195b5e(0x1ef)]('p'))[_0x195b5e(0x1c2)](_0x546c79 => _0x546c79['textContent'][_0x195b5e(0x1f7)]()[_0x195b5e(0x1e1)]()[_0x195b5e(0x1d7)](_0x1c3507['trim']()[_0x195b5e(0x1e1)]())); if (!_0x341786) return ![]; const _0x104afb = _0x341786[_0x195b5e(0x20d)](_0x195b5e(0x1d9)); if (!_0x104afb) return ![]; const _0x513b25 = _0x4765a8[_0x195b5e(0x1d2)](_0x1d6142 => document[_0x195b5e(0x1dd)](_0x195b5e(0x1e6) + _0x1d6142 + '\x22]')); if (_0x513b25) return !![]; _0x104afb[_0x195b5e(0x1f4)](); const _0x3aa22c = Date[_0x195b5e(0x1c7)](); while (Date[_0x195b5e(0x1c7)]() - _0x3aa22c < _0x324986) { const _0x2f32eb = _0x4765a8[_0x195b5e(0x1d2)](_0x53d9ab => document[_0x195b5e(0x1dd)](_0x195b5e(0x1e6) + _0x53d9ab + '\x22]')); if (_0x2f32eb) return !![]; await new Promise(_0x1db114 => setTimeout(_0x1db114, 0x64)); } return console[_0x195b5e(0x1d5)]('⛔️\x20Аккордеон\x20не\x20раскрыл\x20нужные\x20поля:', _0x1c3507), ![]; } async function realUserType(_0x579821, _0x3cb75c, _0x61d0c8 = 0xa) { const _0x10f0e7 = _0x3fcc; _0x579821['focus'](), _0x579821[_0x10f0e7(0x1be)](new CompositionEvent(_0x10f0e7(0x1db), { 'bubbles': !![] })); for (let _0x5a8ac6 = 0x0; _0x5a8ac6 < _0x3cb75c[_0x10f0e7(0x1fa)]; _0x5a8ac6++) { let _0x564075 = _0x3cb75c[_0x5a8ac6]; _0x579821[_0x10f0e7(0x1be)](new KeyboardEvent('keydown', { 'key': _0x564075, 'code': _0x564075, 'bubbles': !![] })), _0x579821[_0x10f0e7(0x1be)](new KeyboardEvent('keypress', { 'key': _0x564075, 'code': _0x564075, 'bubbles': !![] })); let _0x1b17d9 = Object[_0x10f0e7(0x1ad)](window[_0x10f0e7(0x1ee)][_0x10f0e7(0x1c3)], _0x10f0e7(0x1cd))['set']; _0x1b17d9[_0x10f0e7(0x1d8)](_0x579821, _0x579821[_0x10f0e7(0x1cd)] + _0x564075), _0x579821['dispatchEvent'](new InputEvent(_0x10f0e7(0x1c5), { 'data': _0x564075, 'inputType': _0x10f0e7(0x1ff), 'bubbles': !![] })), _0x579821[_0x10f0e7(0x1be)](new KeyboardEvent(_0x10f0e7(0x1cb), { 'key': _0x564075, 'code': _0x564075, 'bubbles': !![] })), await new Promise(_0x330ddc => setTimeout(_0x330ddc, _0x61d0c8)); } _0x579821[_0x10f0e7(0x1be)](new CompositionEvent(_0x10f0e7(0x1c9), { 'data': _0x3cb75c, 'bubbles': !![] })); let _0x42bc38 = new DataTransfer(); _0x42bc38[_0x10f0e7(0x1dc)](_0x10f0e7(0x1d3), _0x3cb75c), _0x579821[_0x10f0e7(0x1be)](new ClipboardEvent('paste', { 'clipboardData': _0x42bc38, 'bubbles': !![] })), _0x579821[_0x10f0e7(0x1be)](new Event(_0x10f0e7(0x209), { 'bubbles': !![] })); } function setReactInputValue(_0x14c5e5, _0x5a1372) { const _0x5596b9 = _0x3fcc, _0x584dff = _0x14c5e5['value']; _0x14c5e5['value'] = _0x5a1372; let _0x83ad3e = _0x14c5e5[_0x5596b9(0x1b2)]; if (_0x83ad3e) _0x83ad3e['setValue'](_0x584dff); _0x14c5e5[_0x5596b9(0x1be)](new Event(_0x5596b9(0x1c5), { 'bubbles': !![] })), _0x14c5e5[_0x5596b9(0x1be)](new Event('change', { 'bubbles': !![] })); } async function typeTextSlowly(_0x147962, _0x848c26, _0x2bb84b = 0xa) { const _0xd8320e = _0x3fcc; _0x147962['focus'](), _0x147962[_0xd8320e(0x1cd)] = '', _0x147962[_0xd8320e(0x1be)](new Event(_0xd8320e(0x1c5), { 'bubbles': !![] })); for (let _0xeef42e of _0x848c26) { _0x147962[_0xd8320e(0x1cd)] += _0xeef42e, _0x147962[_0xd8320e(0x1be)](new Event(_0xd8320e(0x1c5), { 'bubbles': !![] })), await new Promise(_0x3ec137 => setTimeout(_0x3ec137, _0x2bb84b)); } } async function selectDropdownUniversal(_0x4d7da9, _0x38642a) { const _0x223eca = _0x3fcc; let _0x1f489b = document[_0x223eca(0x1dd)](_0x223eca(0x1fe) + _0x4d7da9 + '\x22]'); if (!_0x1f489b) return ![]; _0x1f489b[_0x223eca(0x1e9)](), _0x1f489b[_0x223eca(0x1f4)](), await new Promise(_0x2f5ef4 => setTimeout(_0x2f5ef4, 0x32)); let _0x267ea2 = null, _0x35f430 = _0x1f489b[_0x223eca(0x20d)]('div'); _0x35f430 && (_0x267ea2 = _0x35f430[_0x223eca(0x1dd)](_0x223eca(0x202))); !_0x267ea2 && (_0x267ea2 = Array[_0x223eca(0x1df)](document[_0x223eca(0x1ef)](_0x223eca(0x202)))['find'](_0x55f3d7 => _0x55f3d7[_0x223eca(0x1b7)] !== null)); _0x267ea2 && (await realUserType(_0x267ea2, _0x38642a, 0x14), await new Promise(_0x251998 => setTimeout(_0x251998, 0x14))); let _0x31ebb3 = null; const _0x470b15 = Date[_0x223eca(0x1c7)](); while (Date[_0x223eca(0x1c7)]() - _0x470b15 < 0x3e8) { let _0x3586f4 = Array['from'](document[_0x223eca(0x1ef)]('button[name=\x22' + _0x4d7da9 + _0x223eca(0x203))); _0x31ebb3 = _0x3586f4[_0x223eca(0x1c2)](_0x55e08a => { const _0x2214fc = _0x223eca, _0x567537 = (_0x55e08a[_0x2214fc(0x1ea)]?.[_0x2214fc(0x1a3)] || _0x55e08a['textContent'] || '')[_0x2214fc(0x1f7)]()['toLowerCase'](); return _0x567537 === _0x38642a[_0x2214fc(0x1f7)]()[_0x2214fc(0x1e1)](); }); !_0x31ebb3 && (_0x31ebb3 = _0x3586f4[_0x223eca(0x1c2)](_0x4f4659 => { const _0x23f378 = _0x223eca, _0x16a955 = (_0x4f4659[_0x23f378(0x1ea)]?.[_0x23f378(0x1a3)] || _0x4f4659['textContent'] || '')[_0x23f378(0x1f7)]()[_0x23f378(0x1e1)](); return _0x16a955[_0x23f378(0x1d7)](_0x38642a[_0x23f378(0x1f7)]()[_0x23f378(0x1e1)]()); })); if (_0x31ebb3) break; await new Promise(_0x2e4728 => setTimeout(_0x2e4728, 0x32)); } if (_0x31ebb3) return _0x31ebb3[_0x223eca(0x1f4)](), await new Promise(_0x2dd4c3 => setTimeout(_0x2dd4c3, 0x32)), document[_0x223eca(0x1b6)][_0x223eca(0x1f4)](), !![]; return ![]; } function setReactCheckbox(_0x393c2f, _0x555462 = !![]) { const _0x2243b3 = _0x3fcc, _0x385187 = document[_0x2243b3(0x1dd)]('input[type=\x22checkbox\x22][name=\x22' + _0x393c2f + '\x22]'); if (_0x385187) { if (_0x385187[_0x2243b3(0x210)] !== _0x555462) _0x385187[_0x2243b3(0x1f4)](); return _0x385187[_0x2243b3(0x1be)](new Event(_0x2243b3(0x209), { 'bubbles': !![] })), !![]; } return ![]; } async function getDataFromBuffer() { const _0x3bc9aa = _0x3fcc; try { const _0x1db986 = await navigator['clipboard'][_0x3bc9aa(0x1f0)](), _0x7dea52 = JSON['parse'](_0x1db986); return _0x7dea52; } catch (_0x792a5f) { return null; } } function showOverlay(_0x3d2e8b = _0x35e4d8(0x1ec)) { const _0xbe28da = _0x35e4d8; if (document[_0xbe28da(0x1e0)](_0xbe28da(0x1a6))) return; let _0x2550a9 = document[_0xbe28da(0x1ab)]('div'); _0x2550a9['id'] = _0xbe28da(0x1a6), _0x2550a9['style'] = _0xbe28da(0x1f2), _0x2550a9['innerHTML'] = _0xbe28da(0x1c4) + _0x3d2e8b + '</span>\x0a\x20\x20\x20\x20</div>\x0a', document[_0xbe28da(0x1b6)][_0xbe28da(0x1f9)](_0x2550a9); } function _0x547d() { const _0x3abb68 = ['select', '1982IRAbjw', 'afm-loading-overlay', 'innerText', 'Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.', 'Заполнить', '1475352xirADf', 'createElement', 'background:#ffa726;color:#222;cursor:wait;', 'getOwnPropertyDescriptor', 'afm-check-modal-ok', 'participants[0].full_name.first_name', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal-backdrop\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x20top:0;\x20left:0;\x20right:0;\x20bottom:0;\x20background:\x20rgba(0,0,0,0.3);\x20z-index:\x2099999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:flex;\x20align-items:center;\x20justify-content:center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#fff;\x20border-radius:\x2012px;\x20padding:\x2032px\x2036px;\x20font-size:\x201.2rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x208px\x2040px\x20#0005;\x20min-width:260px;\x20text-align:center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal\x20button\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2022px;\x20background:#1976d2;\x20color:#fff;\x20border:none;\x20border-radius:6px;\x20padding:10px\x2034px;\x20font-size:1rem;\x20cursor:pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background\x20.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#afm-check-modal\x20button:hover\x20{\x20background:#0e57a1;}\x0a\x20\x20\x20\x20', 'Идёт\x20автозаполнение\x20формы.\x20Пожалуйста,\x20не\x20кликайте,\x20не\x20используйте\x20клавиатуру\x20и\x20не\x20переходите\x20в\x20другие\x20окна\x20или\x20вкладки\x20до\x20завершения.', '_valueTracker', 'tagName', 'банк\x20участника\x20операции', 'onclick', 'body', 'offsetParent', '792708DToYuC', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2014px\x2032px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2018px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1976d2;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background\x200.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'className', 'сведения\x20об\x20операции', '6DYKFpR', 'addEventListener', 'dispatchEvent', 'фактический\x20адрес', 'form.operation_state', '30hxTOnu', 'find', 'prototype', '\x0a\x20\x20\x20\x20<div\x20style=\x22padding:\x2032px\x2048px;\x20background:\x20#282c34;\x20border-radius:\x2016px;\x20box-shadow:\x200\x208px\x2040px\x20#0007;\x22>\x0a\x20\x20\x20<span\x20style=\x22display:inline-block;\x20margin-right:18px;\x20vertical-align:middle;\x22>\x0a\x20\x20<svg\x20width=\x2240\x22\x20height=\x2240\x22\x20viewBox=\x220\x200\x2050\x2050\x22\x20style=\x22vertical-align:middle;\x22>\x0a\x20\x20\x20\x20<circle\x0a\x20\x20\x20\x20\x20\x20cx=\x2225\x22\x0a\x20\x20\x20\x20\x20\x20cy=\x2225\x22\x0a\x20\x20\x20\x20\x20\x20r=\x2220\x22\x0a\x20\x20\x20\x20\x20\x20fill=\x22none\x22\x0a\x20\x20\x20\x20\x20\x20stroke=\x22#53e3a6\x22\x0a\x20\x20\x20\x20\x20\x20stroke-width=\x225\x22\x0a\x20\x20\x20\x20\x20\x20stroke-linecap=\x22round\x22\x0a\x20\x20\x20\x20\x20\x20stroke-dasharray=\x2290\x2060\x22\x0a\x20\x20\x20\x20\x20\x20stroke-dashoffset=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20<animateTransform\x0a\x20\x20\x20\x20\x20\x20\x20\x20attributeName=\x22transform\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20type=\x22rotate\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20from=\x220\x2025\x2025\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20to=\x22360\x2025\x2025\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20dur=\x221.2s\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20repeatCount=\x22indefinite\x22/>\x0a\x20\x20\x20\x20</circle>\x0a\x20\x20</svg>\x0a</span>\x0a</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'input', 'GET', 'now', '6170483TpmhJC', 'compositionend', 'form.operation_date', 'keyup', 'Name', 'value', 'input[name=\x22form.form_number\x22]', 'participants[0].iin', 'cssText', 'TEXTAREA', 'some', 'text/plain', 'afm-pulse', 'warn', 'Не\x20удалось\x20получить\x20номер\x20формы\x20(form.form_number)', 'includes', 'call', 'div', '6788997vMwERS', 'compositionstart', 'setData', 'querySelector', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22afm-check-modal-ok\x22>OK</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'from', 'getElementById', 'toLowerCase', '847fxVEiA', 'head', 'Ошибка\x20запроса:', 'background:#43a047;color:#fff;cursor:pointer;', '[name=\x22', 'setAttribute', 'hasAttribute', 'focus', 'dataset', 'участник\x201', 'Загрузка...', '6816VMvOpF', 'HTMLInputElement', 'querySelectorAll', 'readText', 'participants[0].document.type_document', '\x0a\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20top:\x200;\x20left:\x200;\x20right:\x200;\x20bottom:\x200;\x0a\x20\x20\x20\x20background:\x20rgba(0,0,0,0.35);\x0a\x20\x20\x20\x20z-index:\x2099999;\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20font-size:\x201rem;\x0a\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20font-family:\x20inherit;\x0a\x20\x20\x20\x20transition:\x20opacity\x200.2s;\x0a\x20\x20\x20\x20pointer-events:\x20all;\x20/*\x20<---\x20блокирует\x20все\x20клики\x20*/', 'disabled', 'click', 'afm-check-modal-backdrop', 'Network\x20response\x20was\x20not\x20ok', 'trim', 'afm-listener', 'appendChild', 'length', '1485425EEHdIN', 'https://api.quiq.kz/Application/afmStatus/', 'afm-check-modal', 'button[name=\x22', 'insertText', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20.afm-pulse\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20afm-pulse-btn\x201.3s\x20infinite;\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2010%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x2010px);\x20/*\x20по\x20центру\x20и\x20на\x2010px\x20ниже\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20@keyframes\x20afm-pulse-btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x20box-shadow:\x200\x200\x200\x200\x20#1976d280;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2070%\x20{\x20box-shadow:\x200\x200\x200\x2012px\x20#1976d200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x20box-shadow:\x200\x200\x200\x200\x20#1976d200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'FieldType', 'input[placeholder]', '\x22][type=\x22button\x22]', '1056BnUlCP', 'Value', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22afm-check-modal\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'button[name=\x22subscribe\x22]', 'participants[0].participant', 'change', 'participants[0].full_name.last_name', 'button[name=\x22save\x22]', 'innerHTML', 'closest', 'Заполняется...', 'date', 'checked', 'businessKey', 'participants[0].document.issue_date', 'participants[0].participant_subaccount', 'style', 'юридический\x20адрес', 'remove', 'name']; _0x547d = function () { return _0x3abb68; }; return _0x547d(); } function hideOverlay() { const _0x1b6e4a = _0x35e4d8; let _0x7f9e50 = document['getElementById'](_0x1b6e4a(0x1a6)); if (_0x7f9e50) _0x7f9e50[_0x1b6e4a(0x1a2)](); } function showModal(_0x33a97c, _0x5a8a7b) { const _0x59e54f = _0x35e4d8; if (document[_0x59e54f(0x1e0)](_0x59e54f(0x1fd))) return; const _0x2dae5c = _0x59e54f(0x1b0), _0x39ffcb = document[_0x59e54f(0x1ab)](_0x59e54f(0x1a0)); _0x39ffcb[_0x59e54f(0x20c)] = _0x2dae5c, document[_0x59e54f(0x1e3)][_0x59e54f(0x1f9)](_0x39ffcb); const _0xa7bcb5 = document[_0x59e54f(0x1ab)](_0x59e54f(0x1d9)); _0xa7bcb5['id'] = _0x59e54f(0x1f5), _0xa7bcb5[_0x59e54f(0x20c)] = _0x59e54f(0x206) + _0x33a97c + _0x59e54f(0x1de), document[_0x59e54f(0x1b6)]['appendChild'](_0xa7bcb5), document['getElementById'](_0x59e54f(0x1ae))[_0x59e54f(0x1b5)] = function () { const _0x4761e2 = _0x59e54f; _0xa7bcb5['remove'](), _0x39ffcb[_0x4761e2(0x1a2)](); if (typeof _0x5a8a7b === 'function') _0x5a8a7b(); }; } function waitForSaveButton(_0x3d18c2) { const _0xc14934 = _0x35e4d8, _0x574615 = document[_0xc14934(0x1dd)](_0xc14934(0x20b)); _0x574615 ? !_0x574615['hasAttribute'](_0xc14934(0x1f8)) && (_0x574615[_0xc14934(0x1e7)]('afm-listener', '1'), _0x574615[_0xc14934(0x1bd)]('click', async function () { const _0x2c34cd = _0xc14934; try { const _0x3deb64 = document[_0x2c34cd(0x1dd)](_0x2c34cd(0x1ce)), _0x312def = _0x3deb64 ? _0x3deb64[_0x2c34cd(0x1cd)] : null; !_0x312def && console[_0x2c34cd(0x1d5)]('Не\x20удалось\x20получить\x20номер\x20формы\x20(form.form_number)'); const _0x5a031d = await fetch(_0x2c34cd(0x1fc) + _0x3d18c2 + '/2/' + _0x312def, { 'method': _0x2c34cd(0x1c6) }); if (!_0x5a031d['ok']) throw new Error('Network\x20response\x20was\x20not\x20ok'); const _0x5b8aff = await _0x5a031d['json'](); } catch (_0x176ed8) { console['error']('Ошибка\x20запроса:', _0x176ed8); } })) : setTimeout(waitForSaveButton, 0x1f4); } function _0x3fcc(_0x1a02a6, _0x596d24) { const _0x547d04 = _0x547d(); return _0x3fcc = function (_0x3fcc79, _0x22c85c) { _0x3fcc79 = _0x3fcc79 - 0x19d; let _0x37225c = _0x547d04[_0x3fcc79]; return _0x37225c; }, _0x3fcc(_0x1a02a6, _0x596d24); } function waitForSubscribeButton(_0x2533c4) { const _0x39dfd0 = _0x35e4d8, _0x3d6e47 = document[_0x39dfd0(0x1dd)](_0x39dfd0(0x207)); _0x3d6e47 ? !_0x3d6e47[_0x39dfd0(0x1e8)](_0x39dfd0(0x1f8)) && (_0x3d6e47[_0x39dfd0(0x1e7)]('afm-listener', '1'), _0x3d6e47[_0x39dfd0(0x1bd)](_0x39dfd0(0x1f4), async function () { const _0x4c535c = _0x39dfd0; try { const _0x31f4a0 = document[_0x4c535c(0x1dd)](_0x4c535c(0x1ce)), _0x482cac = _0x31f4a0 ? _0x31f4a0[_0x4c535c(0x1cd)] : null; !_0x482cac && console[_0x4c535c(0x1d5)](_0x4c535c(0x1d6)); const _0x15e931 = await fetch(_0x4c535c(0x1fc) + _0x2533c4 + '/3/' + _0x482cac, { 'method': _0x4c535c(0x1c6) }); if (!_0x15e931['ok']) throw new Error(_0x4c535c(0x1f6)); const _0x27108b = await _0x15e931['json'](); } catch (_0x35c872) { console['error'](_0x4c535c(0x1e4), _0x35c872); } })) : (setTimeout(waitForSaveButton, 0x1f4), setTimeout(waitForSubscribeButton, 0x1f4)); } (function () { 'use strict'; const _0x23bfdc = _0x35e4d8; const _0x3da155 = document[_0x23bfdc(0x1ab)](_0x23bfdc(0x1a0)); _0x3da155['innerHTML'] = _0x23bfdc(0x200), document[_0x23bfdc(0x1e3)]['appendChild'](_0x3da155); let _0x28f6c1 = document[_0x23bfdc(0x1ab)]('button'); _0x28f6c1[_0x23bfdc(0x1a7)] = 'Заполнить', _0x28f6c1[_0x23bfdc(0x1ba)] = _0x23bfdc(0x1d4), _0x28f6c1[_0x23bfdc(0x1a0)] = _0x23bfdc(0x1b9); const _0x5ea5fd = 'background:#1976d2;color:#fff;cursor:pointer;', _0x24d4d4 = _0x23bfdc(0x1ac), _0x5a8017 = _0x23bfdc(0x1e5), _0x57dc2d = 'background:#ec4141;color:#fff;cursor:pointer;'; setInterval(async () => { const _0x430f9d = _0x23bfdc, _0x50b7ed = await getDataFromBuffer(); _0x50b7ed == null ? (_0x28f6c1[_0x430f9d(0x1f3)] = !![], _0x28f6c1[_0x430f9d(0x1a7)] = _0x430f9d(0x1a8), _0x28f6c1[_0x430f9d(0x1a0)] = _0x28f6c1[_0x430f9d(0x1a0)][_0x430f9d(0x1d0)] + _0x57dc2d) : (_0x28f6c1['disabled'] = ![], _0x28f6c1[_0x430f9d(0x1a7)] = _0x430f9d(0x1a9), _0x28f6c1[_0x430f9d(0x1a0)] = _0x28f6c1[_0x430f9d(0x1a0)][_0x430f9d(0x1d0)] + _0x5ea5fd); }, 0x5dc), _0x28f6c1['onclick'] = async () => { const _0x241771 = _0x23bfdc; _0x28f6c1['disabled'] = !![], _0x28f6c1[_0x241771(0x1a7)] = _0x241771(0x20e), _0x28f6c1[_0x241771(0x1a0)] = _0x28f6c1[_0x241771(0x1a0)][_0x241771(0x1d0)] + _0x24d4d4, showOverlay(_0x241771(0x1b1)), ((async () => { const _0x281879 = _0x241771, _0x30d9a2 = await getDataFromBuffer(); await new Promise(_0x11104a => setTimeout(_0x11104a, 0x64)); var _0x58c531 = ''; if (_0x30d9a2 == null) { _0x28f6c1[_0x281879(0x1f3)] = ![], _0x28f6c1[_0x281879(0x1a7)] = _0x281879(0x1a9), _0x28f6c1[_0x281879(0x1a0)] = _0x28f6c1[_0x281879(0x1a0)][_0x281879(0x1d0)] + _0x5ea5fd, hideOverlay(), alert('Нет\x20данных.\x20Нажмите\x20кнопку\x20АФМ\x20в\x20заявке.'); return; } await openAccordionByHeader('форма\x20фм-1', [_0x281879(0x1c0), _0x281879(0x1ca)]), await openAccordionByHeader(_0x281879(0x1bb), ['operation.number', 'operation.currency']), await new Promise(_0x3a470a => setTimeout(_0x3a470a, 0xc8)); for (const _0xf01e6b of _0x30d9a2) { _0xf01e6b[_0x281879(0x1cc)] == _0x281879(0x19d) && (_0x58c531 = _0xf01e6b[_0x281879(0x205)]); _0xf01e6b['Name'] == 'operation.address.house_number' && (await openAccordionByHeader('участники', [_0x281879(0x208), _0x281879(0x1cf)]), await openAccordionByHeader(_0x281879(0x1eb), [_0x281879(0x208)]), await openAccordionByHeader(_0x281879(0x1b4), [_0x281879(0x19f)]), await openAccordionByHeader(_0x281879(0x1a1), ['participants[0].legal_address.country']), await openAccordionByHeader(_0x281879(0x1bf), ['participants[0].address.country'])); _0xf01e6b[_0x281879(0x1cc)] == _0x281879(0x1cf) && (await openAccordionByHeader('фио', [_0x281879(0x20a), _0x281879(0x1af)]), await openAccordionByHeader('документ,\x20удостоверяющий\x20личность', [_0x281879(0x1f1), 'participants[0].document.number', _0x281879(0x19e)])); if (_0xf01e6b[_0x281879(0x201)] === _0x281879(0x1c5)) { let _0x3d3533 = document['querySelector'](_0x281879(0x1e6) + _0xf01e6b[_0x281879(0x1cc)] + '\x22]'); if (!_0x3d3533) { const _0x3aa9ee = Date[_0x281879(0x1c7)](); while (!_0x3d3533 && Date[_0x281879(0x1c7)]() - _0x3aa9ee < 0x7d0) { await new Promise(_0x319e65 => setTimeout(_0x319e65, 0x64)), _0x3d3533 = document[_0x281879(0x1dd)](_0x281879(0x1e6) + _0xf01e6b[_0x281879(0x1cc)] + '\x22]'); } } if (_0x3d3533 && (_0x3d3533[_0x281879(0x1b3)] === 'INPUT' || _0x3d3533[_0x281879(0x1b3)] === _0x281879(0x1d1))) { _0xf01e6b[_0x281879(0x1cc)][_0x281879(0x1e1)]()[_0x281879(0x1d7)](_0x281879(0x20f)) || _0xf01e6b[_0x281879(0x1cc)][_0x281879(0x1e1)]()[_0x281879(0x1d7)]('issue') ? setReactInputValue(_0x3d3533, _0xf01e6b[_0x281879(0x205)]) : setReactInputValue(_0x3d3533, _0xf01e6b[_0x281879(0x205)]); continue; } } if (_0xf01e6b[_0x281879(0x201)] == _0x281879(0x1a4)) { await selectDropdownUniversal(_0xf01e6b[_0x281879(0x1cc)], _0xf01e6b['Value']); continue; } if (_0xf01e6b[_0x281879(0x201)] == 'checkbox') { setReactCheckbox(_0xf01e6b[_0x281879(0x1cc)], _0xf01e6b[_0x281879(0x205)]); continue; } } waitForSaveButton(_0x58c531), waitForSubscribeButton(_0x58c531), _0x28f6c1[_0x281879(0x1f3)] = ![], _0x28f6c1['style'] = _0x28f6c1[_0x281879(0x1a0)][_0x281879(0x1d0)] + _0x5a8017, _0x28f6c1[_0x281879(0x1a7)] = 'Заполнить', hideOverlay(), showModal('Проверьте\x20корректность\x20данных\x20с\x20заявки'); })()), await new Promise(_0x4f3157 => setTimeout(_0x4f3157, 0x32)); }, document[_0x23bfdc(0x1b6)][_0x23bfdc(0x1f9)](_0x28f6c1); }());